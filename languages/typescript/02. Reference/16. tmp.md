
##### 반환 `promise` <sub>(객체)</sub> `await` X
- `unhandledrejection` <sub>(이벤트)</sub> 발생 가능
  - `x` <sub>(변수)</sub> 비동기 청소 중 실행 중단
  - 반환 `Promise` <sub>(객체)</sub> 처리 X
- 문제 발생 가능 경우
  - `await using` 선언
  - 비동기 <sub>(`async`)</sub> 함수 내 `try…finally`
```ts
async function f() {
  try {

    // unhandledrejection (이벤트) 발생
    return g();
  }

  finally {
    await somethingElse();
  }
}
```

##### `Promise` <sub>(객체)</sub> 반환 시
- `await` <sub>(키워드)</sub> 명시
```ts
async function f() {
  await using x = new C();
  return await g();
}
```

<br />

## `for[…of]` 내 `[await] using`

##### `using` · `await using`
- `for` <sub>(반복문)</sub> 내 사용 가능
```ts
/* x (변수) 수명
 for (반복문) 전체
 반복문 종료 시 청소
 - break
 - return
 - throw
 - 반복 조건 만족 X
 */
for (using x = getReader(); !x.eof; x.next()) {
  …
}
```
- `for…of` <sub>(반복문)</sub> 내 사용 가능
- 특정 자원 소비 시 유용
  - 제너레이터 의해 1번씩 생성
```ts
// x (변수) 수명
// - 각 반복 종료 시 청소
//   - 다음값 재초기화
function * g() {
  yield createResource1();
  yield createResource2();
}

for (using x of g()) {
  …
}
```

<br />

## 구식 런타임 내 `using` · `await using`

##### 호환 폴리필 필요
- 메서드 구현
  - `[Symbol.dispose]`
  - `[Symbol.asyncDispose]`
- ex\) 최신 NodeJS 기본 제공
