폼 프로퍼티 · 메서드
==================

### 폼 요소 탐색

##### `document.forms` <sub>(기명 컬렉션)</sub>
- 이름 · 순서 有
    문서 내 폼 접근
```javascript
// 폼 (이름 : my)
document.forms.my;

// 문서 내 1번째 폼
document.forms[0];
```

##### `form.elements` <sub>(기명 컬렉션)</sub>
- 폼 내 요소 얻기
```html
<form name="my">
  <input name="one" value="1">
  <input name="two" value="2">
</form>

<script>
  // 폼 얻기
  // - <form name="my"> 요소
  let form = document.forms.my;

  // 폼 내 요소 얻기
  // - <input name="one"> 요소
  let elem = form.elements.one;

  alert(elem.value); // 1
</script>
```

##### 폼 내 다수 동일명 요소
- `form.elements[name]`
  - 컬렉션
```html
<form>
  <input type="radio" name="age" value="10">
  <input type="radio" name="age" value="20">
</form>

<script>
let form = document.forms[0];
let ageElems = form.elements.age;

alert(ageElems[0]); // [object HTMLInputElement]
</script>
```

##### 폼 요소 탐색 프로퍼티
- 태그 구조 의존 X
- `form.elements`
  - 폼 조작 요소들 접근
  - 태그 깊이 무관

<br />

<img src="../../images/commons/icons/circle-exclamation-solid.svg" /> **`fieldset` <sub>(하위 폼 기능)</sub>**

##### `<fieldset>` <sub>(요소)</sub>
- 폼 내 다수 존재 가능
- `elements` <sub>(프로퍼티)</sub> 지원
  - 내부 폼 조작 요소 접근
```html
<body>
  <form id="form">
    <fieldset name="userFields">
      <legend>info</legend>
      <input name="login" type="text">
    </fieldset>
  </form>

  <script>
    // <input name="login">
    alert(form.elements.login);

    let fieldset = form.elements.userFields;

    // HTMLFieldSetElement
    alert(fieldset);

    // form · fieldset (요소)
    // - 이름 사용해 <input> (요소) 접근
    // true
    alert(fieldset.elements.login == form.elements.login);
  </script>
</body>
```

<br />

<img src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **축약형 <sub>(`form.name`)</sub>**

##### 축약형
- `form[index·name]`
```javascript
form.elements.login == form.login;
```

##### 특징
- 요소 `name` <sub>(속성)</sub> 변경 후
  - 이전 이름 계속 인식
```html
<form id="form">
  <input name="login">
</form>

<script>
  // true
  // - 동일 <input> (요소)
  alert(form.elements.login == form.login);

  // <input> (요소) name (속성) 변경
  form.login.name = "username";

  // form.elements
  // - name (속성) 변경 반영
  alert(form.elements.login);    // undefined
  alert(form.elements.username); // input

  // form
  // - 새 · 전 이름 모두 인식
  alert(form.username == form.login); // true
</script>
```

##### 폼 요소명 변경
- 드물게 발생
  - 보통 특징 때문에 문제 발생 X

<br />

### `element.form` <sub>(역참조)</sub>

##### `element.form`
- 모든 요소
  - 폼 접근 <sub>(역참조)</sub> 가능

![form-navigation](../../images/02/04/01/form-navigation.svg)

```html
<form id="form">
  <input type="text" name="login">
</form>

<script>
  // 폼 → 요소
  let login = form.login;

  // 요소 → 폼
  alert(login.form); // HTMLFormElement
</script>
```

### 폼 요소

#### `input` · `textarea`
`input`과 `textarea` 요소의 값은 `input.value` (`string`) 또는 `input.checked` (`boolean`)을 사용해 얻을 수 있습니다.

이렇게 말이죠.
```javascript
input.value = "New value";
textarea.value = "New text";

input.checked = true; // 체크박스나 라디오 버튼에서 쓸 수 있습니다.
```

<br />

<img src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`textarea.innerHTML` 말고 `textarea.value`를 사용하세요.**

`<textarea>…</textarea>`안의 값이 HTML이더라도 값을 얻을 때 `textarea.innerHTML`을 사용하지 말아야 합니다.

`textarea.innerHTML`엔 페이지를 처음 열 당시의 HTML만 저장되어 최신 값을 구할 수 없기 때문입니다.

<br />

#### `select`와 `option`
`<select>` 요소에는 세 가지 중요 프로퍼티가 있습니다.
1. `select.options` – `<option>` 하위 요소를 담고 있는 컬렉션
2. `select.value` – 현재 선택된 `<option>` 값
3. `select.selectedIndex` – 현재 선택된 `<option>`의 번호(인덱스)

이 세 프로퍼티를 응용하면 아래와 같은 세 가지 방법으로 `<select>`의 값을 설정할 수 있습니다.
1. 조건에 맞는 `<option>` 하위 요소를 찾아 `option.selected` 속성을 `true`로 설정합니다.
2. `select.value를` 원하는 값으로 설정합니다.
3. `select.selectedIndex를` 원하는 `option` 번호로 설정합니다.

세 방법 중 첫 번째 방법이 가장 확실하지만 두 번째나 세 번째 방법이 대체로 더 편리합니다.

예시:
```html
<select id="select">
  <option value="apple">Apple</option>
  <option value="pear">Pear</option>
  <option value="banana">Banana</option>
</select>

<script>
  // 세 가지 코드의 실행 결과는 모두 같습니다.
  select.options[2].selected = true;
  select.selectedIndex = 2;
  select.value = 'banana';
</script>
```

대부분의 다른 폼 조작 요소와 달리 `<select>`는 `multiple` 속성이 있는 경우 `option`을 다중 선택할 수 있습니다. `multiple` 속성을 쓰는 경우는 아주 드물지만, 쓰게 되다면 첫 번째 방법을 사용해 `<option>` 하위 요소에 있는 `selected` 프로퍼티를 추가·제거해야 합니다.

선택된 여러 개의 option이 담긴 컬렉션은 다음 예시처럼 select.options를 사용해 얻을 수 있습니다.
```html
<select id="select" multiple>
  <option value="blues" selected>Blues</option>
  <option value="rock" selected>Rock</option>
  <option value="classic">Classic</option>
</select>

<script>
  // 선택한 값 전체
  let selected = Array.from(select.options)
    .filter(option => option.selected)
    .map(option => option.value);

  alert(selected); // blues,rock
</script>
```

[`<select>` 요소 명세](https://html.spec.whatwg.org/multipage/forms.html#the-select-element)

#### `Option` 생성자
`Option` 생성자는 잘 사용되지는 않지만 흥미로운 점이 있습니다.

[명세서](https://html.spec.whatwg.org/multipage/form-elements.html#the-option-element)를 보면 `<option>` 요소를 생성하는 간단하고 멋진 문법을 찾을 수 있죠.
```javascript
option = new Option(text, value, defaultSelected, selected);
```

매개변수:
- `text` – `option` 내부의 텍스트
- `value` – `option`의 값
- `defaultSelected` – `true`이면 HTML 속성 `selected`가 생성됨
- `selected` – `true`이면 해당 `option`이 선택됨

`defaultSelected`와 `selected`의 차이가 무엇인지 헷갈릴 수 있습니다. `defaultSelected`는 `option.getAttribute('selected')`를 사용해 얻을 수 있는 HTML 속성을 설정해 줍니다. 반면 `selected` 는 `option`의 선택 여부를 결정합니다. 그렇기 때문에 당연히 `selected`가 더 중요한 매개변수이죠. `Option` 생성자를 사용할 때는 대개 두 매개변수 모두를 `true`나 `false`로 설정합니다.

예시:
```javascript
let option = new Option("Text", "value");
// <option value="value">Text</option> 가 생성됩니다.
```

이번엔 같은 요소를 선택된 상태로 생성합니다.
```javascript
let option = new Option("Text", "value", true, true);
```

`Option`을 사용해 만든 요소에는 다음과 같은 프로퍼티가 있습니다.

- `option.selected`
  - `option`의 선택 여부
- `option.index`
  - `option` 중 몇 번째인지를 나타내는 번호
- `option.text`
  - 사용자가 보게 될 텍스트

### 참고 자료
- [명세서](https://html.spec.whatwg.org/multipage/forms.html)

<br />

## 요약
폼 탐색하기
- `document.forms`
  - `document.forms[name/index]`로 폼에 접근할 수 있습니다.
- `form.elements`
  - 폼 요소는 `form.elements[name/index]` 또는 `form[name/index]`로 접근합니다. `elements` 프로퍼티는 `<fieldset>`에도 똑같이 작동합니다.
- `element.form`
  - 요소는 `form` 프로퍼티에서 자신이 속한 폼을 참조합니다.

각 요소의 값은 `input.value`, `textarea.value`, `select.value` 등으로 접근할 수 있습니다. 체크박스와 라디오 버튼에서는 `input.checked`를 사용할 수 있습니다.

`<select>`에서는 인덱스 `select.selectedIndex`나 `option` 컬렉션 `select.options`을 통해 값을 구할 수도 있습니다.

지금까지는 폼 관련 기본을 다뤘습니다. 이 튜토리얼에서 앞으로 더 많은 예시를 만날 것입니다.

다음 챕터에서는 어느 요소에서든 발생할 수 있지만 대부분 폼에서 처리되는 `focus`와 `blur` 이벤트를 다루겠습니다.

<br />

## <img src="../../images/commons/icons/circle-check-solid.svg" /> 과제

### `select`에 옵션 추가하기
아래에 `<select>`가 있습니다.
```html
<select id="genres">
  <option value="rock">Rock</option>
  <option value="blues" selected>Blues</option>
</select>
```

자바스크립트를 사용하여 아래 항목을 수행하는 코드를 작성해봅시다.

1. 선택한 옵션의 값과 텍스트를 표시하세요.
2. `<option value="classic">Classic</option>`라는 옵션을 추가하세요.
3. 추가한 옵션을 선택하세요.

모든 항목을 올바르게 수행했다면 얼럿창에 `blues`가 출력됩니다.

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

단계별 해답입니다.
```html
<select id="genres">
  <option value="rock">Rock</option>
  <option value="blues" selected>Blues</option>
</select>

<script>
  // 1)
  let selectedOption = genres.options[genres.selectedIndex];
  alert( selectedOption.value );

  // 2)
  let newOption = new Option("Classic", "classic");
  genres.append(newOption);

  // 3)
  newOption.selected = true;
</script>
```
