스타일과 클래스
==============

#### 요소 스타일 적용 방법 <sub>(2가지)</sub>

##### 1. CSS 클래스 생성 후 요소에 추가
- `<div class="…">`
- 우선 사용
- 유용한 상황
  - 스타일 작업
    - 유연성 확보
    - 유지보수 용이
##### 2. `style` <sub>(속성)</sub> 에 바로 쓰기
- `<div style="…">`
- 클래스 사용 불가 시 사용
- 유용한 상황
  - 요소 좌표 동적 계산 후
    - 계산한 좌표 설정

```javascript
let top  = /* 복잡한 계산식 */;
let left = /* 복잡한 계산식 */;

elem.style.left = left; // ex) '123px', 런타임 좌표 계산
elem.style.top  = top;  // ex) '456px', 런타임 좌표 계산
```

### `className` · `classList`

##### 아주 오래전 JS 제약사항 <sub>(현재 X)</sub>
- 예약어 <sub>(`"class"` 등)</sub>
  - 객체 프로퍼티 X
  - `elem.class` X
- `"className"` 도입
  - `"class"` <sub>(속성)</sub> 대응
```html
<body class="main page">
  <script>

    // main page
    alert(document.body.className);
  </script>
</body>
```

##### `className` 에 무언가 대입 시
- 클래스 문자열 전체 변경

#### `elem.classList` <sub>(프로퍼티)</sub>

##### 개별 클래스 조작 메서드 구현
- `[add · remove]("class")`
  - `class` 추가 · 제거
- `toggle("class")`
  - `class` 존재 시 제거
  - `class` 부재 시 추가
- `contains("class")`
  - `class` 존재 여부 확인
```html
<body class="main page">
  <script>

    // 클래스 추가
    document.body.classList.add('article');

    // main page article
    alert(document.body.className);

  </script>
</body>
```

##### 취사선택
- `className`
  - 클래스 속성값 전체 변경
- `classList`
  - 개별 클래스 조작

##### 이터러블 <sub>(객체)</sub>
- `for…of` <sub>(반복문)</sub>
```html
<body class="main page">
  <script>
    for (let name of document.body.classList) {
      alert(name); // main · page
    }
  </script>
</body>
```

### 요소 스타일

##### `style`<sub>(프로퍼티)</sub>
- `"style"` <sub>(속성)</sub> 값 대응 객체
- ex&#41; `style.width="100px"`
  - `style={width: 100px}`

##### 여러 단어 구성
- 카멜 표기법
  - `-` <sub>(대시)</sub>
    - 대문자
```javascript
background-color  → backgroundColor
z-index           → zIndex
border-left-width → borderLeftWidth
```
```javascript
document.body.style.backgroundColor = prompt('배경을 무슨 색으로 바꿀까요?', 'green');
```

<br />

<img class="icon" src="../../images/commons/icons/circle-exclamation-solid.svg" /> **특정 브라우저 전용 프로퍼티**

##### 브라우저 관련 접두사 프로퍼티
- `-moz-border-radius`
- `-webkit-border-radius`
- 기타 등등
```javascript
button.style.MozBorderRadius = '5px';
button.style.WebkitBorderRadius = '5px';
```

<br />

### `style` <sub>(프로퍼티)</sub> 재지정하기

##### 처음부터 설정하지 않았던 것처럼 되돌리기
- 삭제 X
  - `delete` <sub>(연산자)</sub>
- `""` <sub>(빈 문자열)</sub> 할당
  - `style.display = ""`
```javascript
/* <body> (요소) 깜빡임 */
// 숨기기
document.body.style.display = "none";

// 1초 후 원래 상태
setTimeout(() => document.body.style.display = "", 1000);
```

<br />

<img class="icon" src="../../images/commons/icons/circle-exclamation-solid.svg" /> **`style.cssText` <sub>(완전히 다시 쓰기)</sub>**

##### 개별 스타일 프로퍼티 적용
- `style.*`

##### `style` <sub>(프로퍼티)</sub>
- 객체
- 읽기 전용
- 문자열 할당 X
  - `div.style="color: red; width: 100px"`

##### `style.cssText` <sub>(프로퍼티)</sub>
- 문자열로 전체 스타일 설정
```html
<div id="div">버튼</div>

<script>
  // 'important' 같은 규칙도 설정 가능
  div.style.cssText=`
    color: red !important;
    background-color: yellow;
    width: 100px;
    text-align: center;
  `;

  alert(div.style.cssText);
</script>
```

##### 전체 스타일 교체
- 드물게 사용
  - 기존 스타일 사라질 위험
- 새 요소 생성 시 유용

##### `div.setAttribute('style', 'color: red…)`
- `style.cssText` 동일 기능

<br />

### 단위 주의
자바스크립트를 사용해 스타일 값을 설정할 때는 단위를 붙여주는 걸 잊지 말아야 합니다.

`elem.style.top`에 값을 설정할 때 `10px`이 아닌 `10`을 설정하면 제대로 동작하지 않습니다.
```html
<body>
  <script>
    // 동작하지 않습니다!
    document.body.style.margin = 20;
    alert(document.body.style.margin); // '' (값이 제대로 할당되지 않았기 때문에 빈 문자열이 출력됩니다.)

    // CSS 단위(px)를 추가해봅시다. 제대로 동작하네요!
    document.body.style.margin = '20px';
    alert(document.body.style.margin); // 20px

    alert(document.body.style.marginTop); // 20px
    alert(document.body.style.marginLeft); // 20px
  </script>
</body>
```

참고로 브라우저는 위 예시와 같이 `style.margin`를 ‘분석’ 및 추론한 결과를 `style.marginLeft`와 `style.marginTop`에 할당해줍니다.

### `getComputedStyle`로 계산된 스타일 얻기
지금까지 배운 내용을 응용하면 스타일을 쉽게 수정할 수 있습니다. 그럼 어떻게 하면 스타일을 읽을 수 있을까요?

요소의 크기와 마진, 색을 알고 싶다면 어떻게 해야 할까요?

`style` 프로퍼티 값을 읽으면 되지 않을까 생각할 수 있겠지만, **`style` 프로퍼티는 `"style"` 속성의 값을 읽을 때만 사용할 수 있습니다. `style` 프로퍼티만으론 CSS 종속(CSS cascade)값을 다루지 못합니다.**

이런 특징 때문에 `elem.style`만으로는 CSS 클래스를 사용해 적용한 스타일을 읽을 수 없습니다.

`style` 프로퍼티를 사용해도 마진값을 읽을 수 없다는 것을 직접 확인해봅시다.
```html
<head>
  <style> body { color: red; margin: 5px } </style>
</head>
<body>

  붉은 글씨
  <script>
    alert(document.body.style.color); // 빈 문자열
    alert(document.body.style.marginTop); // 빈 문자열
  </script>
</body>
```

그렇다면 마진을 현재 크기보다 `20px` 더 크게 하려면 어떻게 해야 할까요? 원하는 작업을 하려먼 먼저 현재 크기를 알 수 있어야 합니다.

이럴 때 `getComputedStyle` 메서드를 사용할 수 있습니다.

`getComputedStyle` 메서드의 문법은 다음과 같습니다.
```javascript
getComputedStyle(element, [pseudo])
```

- `element`
  - 값을 읽을 요소
- `pseudo`
  - `::before`같이 의사 요소(pseudo-element)가 필요한 경우 명시해줌. 빈 문자열을 넘겨주거나 아무런 값을 입력하지 않은 경우 요소 자체를 의미함

`getComputedStyle`을 호출하면 `elem.style`같이 스타일 정보가 들어 있는 객체가 반환되는데, 여기엔 `elem.style`과는 달리 전체 CSS 클래스 정보도 함께 담기게 됩니다.

예시:
```html
<head>
  <style> body { color: red; margin: 5px } </style>
</head>
<body>

  <script>
    let computedStyle = getComputedStyle(document.body);

    // 이제 마진과 색 정보를 얻을 수 있습니다.

    alert( computedStyle.marginTop ); // 5px
    alert( computedStyle.color ); // rgb(255, 0, 0)
  </script>

</body>
```

<br />

<img class="icon" src="../../images/commons/icons/circle-exclamation-solid.svg" /> **계산 값과 결정 값**

[CSS](https://drafts.csswg.org/cssom/#resolved-values)에는 속성과 관련된 두 가지 개념이 있습니다.

1. 계산 값(computed style value) – CSS 규칙과 CSS 상속이 모두 적용된 후의 값을 의미합니다. 값의 형태는 `height:1em`나 `font-size:125%` 같이 생겼습니다.
2. 결정 값(resolved style value) – 요소에 최종적으로 적용되는 값을 의미합니다. 계산 값에서 사용한 `1em`나 `125%`은 상대 단위를 사용하는 상댓값인데, 브라우저는 계산 값을 받아 단위를 전환해 `height:20px`나 `font-size:16px`같이 고정 단위를 사용하는 값(절댓값)으로 값을 변환합니다. 기하 관련 프로퍼티의 결정 값에는 `width:50.5px`같이 소수점 단위가 있을 수 있습니다.
`getComputedStyle`은 계산 값을 얻기 위해서 만들어진 아주 오래된 메서드입니다. 그런데 계산 값보다는 결정 값을 사용하는 게 훨씬 편리하기 때문에 표준이 개정되었습니다.

따라서 지금은 `getComputedStyle`을 호출하면 프로퍼티의 결정 값이 반환됩니다. 기하 프로퍼티의 경우 주로 `px`가 단위로 사용됩니다.

<br />

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`getComputedStyle`엔 프로퍼티 전체 이름이 필요합니다.**

`getComputedStyle`을 사용할 때는 `paddingLeft`, `marginTop`, `borderTopWidth`같이 프로퍼티 이름 전체를 정확히 알고 있어야 합니다. 그렇지 않으면 원하는 값을 얻을 수 없는 경우가 생깁니다.

`paddingLeft`나 `paddingTop`엔 값이 지정되어있는데 `getComputedStyle(elem).padding`을 사용해 값을 얻으려 하는 경우를 생각해 봅시다. 어떤 값을 얻을 수 있을까요? 아무것도 얻지 못할까요 아니면 값이 설정되어 있는 `paddingLeft`나 `paddingTop`에서 값을 가져올까요? 이런 상황에 적용할만한 표준은 아직 제정되어있지 않습니다.

따라서 브라우저마다 동작 방식이 다릅니다. Chrome 같은 몇몇 브라우저는 아래 예시와 같이 `10px`을 출력해주는데 Firefox에서 빈 문자열이 출력됩니다.
```html
<style>
  body {
    margin: 10px;
  }
</style>
<script>
  let style = getComputedStyle(document.body);
  alert(style.margin); // Firefox에선 빈 문자열이 출력됩니다.
</script>
```

<br />

<img class="icon" src="../../images/commons/icons/circle-exclamation-solid.svg" /> **`:visited` 링크 관련 스타일은 숨겨져 있습니다.**

방문한 적이 있는 링크엔 `:visited`라는 CSS 의사 클래스를 사용해 색을 입힐 수 있습니다.

그런데 `getComputedStyle`을 사용해서 이 색을 얻을 수 없습니다. 색을 얻을 수 있도록 하면 임의의 페이지에서 사용자가 해당 링크를 방문했는지 아닌지를 `getComputedStyle`을 사용해 알아낼 수 있기 때문입니다.

자바스크립트로는 `:visited`에 적용된 스타일을 얻지 못합니다. 여기에 더하여 CSS에는 `:visited`에 기하학적 변화를 가져오는 스타일을 적용하는 것을 금지하는 제약도 있습니다. 이런 제약들은 악의를 가진 페이지가 사용자가 링크를 방문했는지 여부를 테스트 하고, 방문 여부에 따라 사생활을 침해할 만한 어떠한 것도 하지 못하도록 하려고 만들어졌습니다.

<br />

## 요약
클래스를 관리할 수 있게 해주는 DOM 프로퍼티:
- `className` – 클래스 전체를 문자열 형태로 반환해주는 프로퍼티로 클래스 전체를 관리할 때 유용합니다.
- `classList` – 클래스 하나를 관리할 수 있게 해주는 메서드입니다. `add`/`remove`/`toggle`/`contains가` 구현된 객체를 반환합니다. 개별 클래스를 조작할 때 유용합니다.

스타일 변경 방법:
- `style` 프로퍼티 – 카멜 표기법을 이용해 변경한 스타일이 있는 객체로, 이 객체를 조작하는 것은 `"style"` 속성과 대응하는 개별 프로퍼티를 조작하는 것과 같습니다. `important` 등의 규칙을 어떻게 적용할 수 있는지 알아보려면 [MDN](https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration)에서 관련 메서드를 살펴보시기 바랍니다.
- `style.cssText` 프로퍼티는 `"style"` 속성 전체에 대응하므로 스타일 전체에 대한 문자열이 저장됩니다.

요소의 스타일 결정 값을 읽는 방법:
- 스타일 정보가 들어 있는 객체를 반환해주는 메서드 `getComputedStyle(elem, [pseudo])`를 사용합니다. 이 메서드는 읽기 전용입니다.

<br />

### <img class="icon" src="../../images/commons/icons/circle-check-solid.svg" /> 과제

<hr />

### 알림 만들기
샌드박스를 열었을 때 보이는 콘텐츠를 기반으로 `<div class="notification">` 알림을 만들어주는 함수 `showNotification(options)`를 작성해봅시다. 이 알림은 1.5초 후에 자동으로 사라집니다.

옵션은 다음과 같습니다.

```javascript
// 창의 오른쪽 상단에 "Hello"라는 텍스트가 담긴 요소를 보여줍니다.
showNotification({
  top: 10, // 창의 상단에서 10px 떨어진 위치에 표시합니다(기본값은 0px).
  right: 10, // 창의 오른쪽 가장자리에서 10px 떨어진 위치에 표시합니다(기본값은 0px).
  html: "Hello!", // 알림의 HTML입니다.
  className: "welcome" // div에 대한 추가 클래스입니다(선택 사항).
});
```

CSS 포지셔닝을 사용하여 주어진 좌표(오른쪽 상단)에 알림을 표시하세요. 필요한 스타일들은 링크를 열면 찾아볼 수 있습니다.

<br />

<img class="icon" src="../../images/commons/icons/circle-answer.svg" />

[샌드박스를 열어 정답을 확인해보세요.](https://plnkr.co/edit/nV8o4gP6KxFJLw5T?p=preview)
