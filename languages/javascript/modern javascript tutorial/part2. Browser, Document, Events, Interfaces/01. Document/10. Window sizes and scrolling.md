브라우저 창 사이즈 · 스크롤
=========================

- 브라우저 창 차지 너비 · 높이
- 문서 전체 차지 너비 · 높이
  - 스크롤 의해 가려진 영역 포함
- JS 이용해 페이지 스크롤 동작

##### `document.documentElement`
- 루트 문서 요소
- `<html>` <sub>(태그)</sub> 상응 요소
- 다양한 메서드 지원
  - 몇 가지 주의점 존재

### 브라우저 창 너비 · 높이
```javascript
document.documentElement.clientWidth
document.documentElement.clientHeight
```

![document-client-width-height](../../images/02/01/10/document-client-width-height.svg)

![alert-clientHeight-1](../../images/02/01/10/alert-clientHeight-1.png)

![alert-clientHeight-2](../../images/02/01/10/alert-clientHeight-2.png)

<br />

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`window` <sub>(전역 객체)</sub> 사용 X**

##### `document.documentElement.client[Width · Height]`
- 스크롤바 영역 제외
  - 눈에 보이는 실제 콘텐츠 영역

##### `window.inner[Width · Height]`
- 스크롤바 영역 포함

```javascript
// (스크롤바 영역 제외) 창 너비
alert( document.documentElement.clientWidth );

// 전체 창 너비
alert( window.innerWidth );
```

##### 창 크기 값 필요한 경우
- 대부분 스크롤바 안쪽에 작업
  - 무언가 그리기 · 위치시키기

<br />

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`DOCTYPE` 명시 필수**

##### `<!DOCTYPE HTML>` 부재 시
- 기하 관련 프로퍼티
  - 오작동 가능 <sub>(부정확 · 부적절 값)</sub>

<br />

### 문서 너비 · 높이

##### 이론
- `document.documentElement`
  - 문서 루트 요소 상응
  - 모든 콘텐츠 들어감
  - `scroll[Width · Height]` 사용 무관

##### 실제 <sub>(전체 페이지 대상)</sub>
- `document.documentElement` 프로피터들
  - 예상대로 동작 X

#####  Chrome · Safari · Opera
- 스크롤 부재 시
  - 프로퍼티들 값 상이 가능성 有
```javascript
let de = document.documentElement;

// 예상 : false
// 실제 : true · falae
alert( de.scrollHeight < de.clientHeight );
```

##### 정확한 문서 전체 높이 값
- 6가지 프로퍼티 값 중 최댓값

##### `document.[body · documentElement]`
- `[scroll · offset · client]Height`
```javascript
let scrollHeight = Math.max(
  document.documentElement.scrollHeight,
  document.documentElement.offsetHeight,
  document.documentElement.clientHeight,
  document.body.scrollHeight,
  document.body.offsetHeight,
  document.body.clientHeight
);

// 전체 문서 높이
// - 스크롤 의해 가려진 영억 포함
alert(scrollHeight);
```

##### 이유
- 역사적인 이유 <sub>(비논리적)</sub>

### 스크롤 정보 얻기

#### DOM 요소 현재 스크롤 상태
- 스크롤 의해 가려진 영역 정보

##### 대다수 브라우저
- `scroll[Left · Top]` <sub>(프로퍼티)</sub>

##### 일부 브라우저 브라우저 <sub>(구버전 WebKit 기반)</sub>
- [버그 <sub>(5991)</sub>](https://bugs.webkit.org/show_bug.cgi?id=5991) 존재
  - `document.documentElement` X
  - `document.body` 사용

##### `page[X·Y]Offset`
- `window` <sub>(전역 객체)</sub> 프로퍼티
- 동일한 스크롤 정보
  - 예외 상황 <sub>(브라우저 종류)</sub> X
```javascript
alert('세로 스크롤에 의해 가려진 위쪽 영역 높이: ' + window.pageYOffset);
alert('가로 스크롤에 의해 가려진 왼쪽 영역 너비: ' + window.pageXOffset);
```

참고로 이 두 프로퍼티는 읽기만 가능합니다.

### `scrollTo`, `scrollBy`로 스크롤 상태 변경하기

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **중요**

자바스크립트를 사용해 스크롤을 움직이려면 DOM이 완전히 만들어진 상태이어야 합니다.
`<head>`에 있는 스크립트에서 페이지 전체의 스크롤을 움직이려 하면 잘 동작하지 않을 수 있습니다.

<br />

일반 요소의 스크롤 상태는 `scrollTop`이나 `scrollLeft`로 쉽게 변경할 수 있습니다.

페이지 전체의 스크롤 상태 역시 `document.documentElement`의 `scrollTop`/`scrollLeft`를 사용해 변경 가능하죠(다만, Safari는 `document.body`의 `scrollTop`/`scrollLeft`를 써야 합니다).

그런데 이보다 더 편하고 브라우저 상관없이 쓸 수 있는 대안이 있긴합니다. 바로 [`window.scrollBy(x,y)`](https://developer.mozilla.org/ko/docs/Web/API/Window/scrollBy)와 [`window.scrollTo(pageX,pageY)`](https://developer.mozilla.org/ko/docs/Web/API/Window/scrollTo)입니다.

- `scrollBy(x,y)`메서드를 사용하면 페이지의 스크롤 상태를 현재 포지션을 기준으로 상대적으로 조정합니다. `scrollBy(0,10)`는 문서의 스크롤 상태를 현재를 기준으로 스크롤을 `10px`아래로 내린것 처럼 움직여주죠.

아래 버튼을 눌러 직접 실습해봅시다.

![window-scrollBy-0-10](../../images/02/01/10/window-scrollBy-0-10.png)

- 반면 `scrollTo(pageX,pageY)`메서드는 절대 좌표를 기준으로 페이지 스크롤 상태를 변경합니다. 따라서 눈에 보이는 영역의 왼쪽 위 모서리의 좌표가 문서 전체의 왼쪽 위 모서리를 기준으로 `(pageX, pageY)`가 됩니다. 마치 `scrollLeft`와 `scrollTop` 값을 변경한 것처럼 움직이는 거죠.
그래서 `scrollTo(0,0)`을 호출하면 문서 스크롤 상태를 처음 상태로 되돌릴 수 있습니다.

![window-scrollTo-0-0](../../images/02/01/10/window-scrollTo-0-0.png)

그리고 이 두 메서드는 브라우저 종류에 상관없이 동일한 동작을 보장합니다.

### `scrollIntoView`
추가 메서드 `elem.scrollIntoView(top)`를 머릿속에 추가해 스크롤 상태를 완벽히 마스터 해봅시다.

`elem.scrollIntoView(top)`를 호출하면 전체 페이지 스크롤이 움직여 `elem`이 눈에 보이는 상태로 변경됩니다. `elem.scrollIntoView`는 인수를 하나 받는데, 인수에 따라 다음과 같이 동작합니다.

- `top`이 `true`(디폴트)인 경우, `elem`이 창 제일 위에 보이도록 스크롤 상태가 변경됩니다. `elem`의 위쪽 모서리가 창의 위쪽 모서리와 일치하게 되죠.
- `top`이 `false`인 경우, `elem`이 창 가장 아래에 보이도록 스크롤 상태가 변경됩니다. `elem`의 아래쪽 모서리가 창의 아래쪽 모서리와 일치하게 변합니다.

버튼을 눌러 직접 실습해봅시다. 첫 번째 버튼을 누르면 버튼 상단이 창 제일 꼭대기로 붙는 것을 확인할 수 있습니다.

![this-scrollIntoView](../../images/02/01/10/this-scrollIntoView.png)

두 번째 버튼을 누르면 버튼의 아래 모서리가 창 밑으로 붙는 것을 확인할 수 있습니다.

![this-scrollIntoView-false](../../images/02/01/10/this-scrollIntoView-false.png)

### 스크롤 막기
때에 따라 문서 스크롤바를 ‘고정’ 해야 하는 경우가 생기곤 합니다. 사용자에게 반드시 전달해야 하는 중요한 메시지가 있어서 이 메시지를 화면에 크게 띄우고, 사용자가 스크롤을 움직여 다른 콘텐츠를 보지 못하게 한 상태에서 메시지를 읽게 하려는 경우가 대표적인 예가 될 수 있습니다.

이럴 때 `document.body.style.overflow = "hidden"`를 사용할 수 있습니다. 해당 스크립트가 동작하면 페이지의 스크롤바 위치가 ‘고정’ 됩니다.

직접 실습해봅시다.

![document-body-style-overflow-hidden](../../images/02/01/10/document-body-style-overflow-hidden.png)


![document-body-style-overflow](../../images/02/01/10/document-body-style-overflow.png)

위쪽 버튼을 누르면 스크롤바가 고정되었다가, 아래 버튼을 누르면 고정이 해제되는 것을 확인할 수 있습니다.

이 방법은 `document.body` 요소 뿐만 아니라 다른 요소의 스크롤을 고정시킬 때도 사용할 수 있습니다.

그런데 이 방법은 스크롤바가 사라진다는 단점이 있습니다. 스크롤바는 일정 공간을 차지하는데, 스크롤바가 사라지면 해당 공간을 채우기 위해 콘텐츠가 갑자기 ‘움직이는’ 현상이 발생합니다.

이렇게 페이지 전체의 스크롤 상태가 갑자기 변경되면 사용자 입장에선 이상해 보일 수 있기 때문에 개발자는 스크롤바를 고정시키기 전과 후의 `clientWidth`값을 비교해서 해당 증상을 보정해야 합니다. 스크롤바가 사라질 땐 `clientWidth`값이 커지는데 이때 스크롤바가 차지했던 영역만큼 `document.body`에 `padding`을 줘서 콘텐츠 전체의 너비를 스크롤바가 사라지기 전과 같은 값으로 유지할 수 있습니다.

<br />

## 요약
기하 프로퍼티:

- 사용자 눈에 보이는 문서(콘텐츠가 실제 보여지는 영역)의 너비와 높이: `document.documentElement.clientWidth/clientHeight`
- 스크롤에 의해 가려진 영역을 포함한 문서 전체의 너비와 높이:
```javascript
let scrollHeight = Math.max(
  document.body.scrollHeight, document.documentElement.scrollHeight,
  document.body.offsetHeight, document.documentElement.offsetHeight,
  document.body.clientHeight, document.documentElement.clientHeight
);
```

스크롤 관련 프로퍼티:

- 현재 스크롤 정보 읽기: `window.pageYOffset/pageXOffset`.
- 스크롤 상태 변경시키기:
  - `window.scrollTo(pageX,pageY)` – 절대 좌표
  - `window.scrollBy(x,y)` – 현재 스크롤 상태를 기준으로 상대적으로 스크롤 정보 변경
  - `elem.scrollIntoView(top)` – `elem`이 눈에 보이도록 스크롤 상태 변경(인수에 따라 창 최상단, 최하단에 해당 요소가 노출되도록 처리)
