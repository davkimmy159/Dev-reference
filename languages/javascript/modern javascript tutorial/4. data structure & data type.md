원시값의 메서드
==============

- 원시값
  - 원시형 값
  - 종류
    - string
    - number
    - bigint
    - boolean
    - symbol
    - null
    - undefined
- 객체
  - 프로퍼티 다양한 종류 값 저장
  - 중괄호 {} 생성
  - 함수 ≒ 객체
  - 함수 프로퍼티
  - 다양한 내장 객체 (고유 프로퍼티 · 메서드 보유)
    - 날짜
    - 오류
    - HTML 요소 (HTML element) 등
  - 시스템 자원 소모량 多
  - 원시값보다 heavy, 내부 구조 유지 위해 추가 자원 사용

### 원시값 객체처럼 사용하기
- "원시 래퍼 객체 (object wrapper)"
  - 원시값 메서드 · 프로퍼티 접근 시 추가 기능 제공
  - String
  - Number
  - Boolean
  - Symbol
```javascript
let str = "Hello";
alert( str.toUpperCase() ); // HELLO
```
1. 문자열 str : 원시값
    - 원시값 프로퍼티 (toUpperCase) 접근 시 특별한 객체 (String) 생성
      - 특별한 객체 (String) :  문자열 값 알고 있음, 유용한 메서드 보유
2. 메서드 실행 후 새로운 문자열 반환
3. 특별한 객체 파괴, 원시값 str만 남음

#### String / Number / Boolean 생성자 사용 X
- Java 등의 몇몇 언어에선 new Number(1) 또는 new Boolean(false)와 같은 문법을 사용해 원하는 타입의 "래퍼 객체"를 직접 만들 수 있습니다.

- 자바스크립트 하위 호환성 위해 래퍼 객체 생성자 호출 가능
  - 비추천 (혼동)
```javascript
// 자료형 혼동
alert( typeof 0 );             // "number"
alert( typeof new Number(0) ); // "object"!

// 객체 논리 평가 시 항상 true 반환
let zero = new Number(0);
if (zero) { // 변수 zero == 객체, 조건문 참
  alert( "그런데 여러분은 zero가 참이라는 것에 동의하시나요!?!" );
}
```
- new 없이  String / Number / Boolean 사용 OK
  - 상식 맞게 인수 원하는 형 원시값 변환
```javascript
let num = Number("123"); // 문자열 → 숫자
```
#### null / undefined 메서드 없음
- 특수 자료형 null · undefined 원시값
  - null · undefined
  - 자료형 연관 "래퍼 객체" X
  - 메서드 X
  - "가장 원시적" 자료형
  - 프로퍼티 접근 시 에러 발생
```javascript
alert(null.test); // error
```

<br />

숫자형
=====

- 일반적인 숫자
  - '배정밀도 부동소수점 숫자 (double precision floating point number)'
  - 64비트 형식 IEEE-754 저장
  - -253 < x < 253 범위 제약

- BigInt
  - 임의 길이 정수
  - 아주 특별한 경우에만 사용

### 숫자를 입력하는 다양한 방법
- 숫자 옆 'e' · '-e' → '0' 개수
```javascript
// 10 거듭제곱
1e3    === 1    * 1000
1.23e6 === 1.23 * 1000000

// 음수 10 거듭제곱
1e-3    === 1    / 1000    // 0.001
1.23e-6 === 1.23 / 1000000 // 0.00000123
```

#### 16진수, 2진수, 8진수
- 16진수
  - 다양한 곳 두루 사용
    - 색 표현
    - 문자 인코딩 등
  - '0x'
- 2진수 · 8진수
  - 아주 드물게 사용
  -  '0b' · '0o'
```javascript
// 16진수
alert( 0xff ); // 255
alert( 0xFF ); // 255 (대·소문자 구별 X)

// 2진수, 8진수
let a = 0b11111111; // 255의 2진수
let b = 0o377;      // 255의 8진수
alert( a == b );    // true, (진법만 상이)
```

### toString(base)
- base진법 표현 후 문자형 변환 · 반환
```javascript
let num = 255;
alert( num.toString(16) );  // ff
alert( num.toString(2) );   // 11111111
```
- base
  - 2 ~ 36
  - 기본값 : 10
  - 유스 케이스
    - base = 16
      - 숫자 : 0 ~ 9
      - 10 이상 : A ~  F
      - 16진수 색, 문자 인코딩 등 표현
    - base = 2
      - 숫자 : 0, 1
      - 연산 디버깅 주 사용
    - base = 36
      - 숫자 : 0 ~ 9
      - 10 이상 : A ~ Z
      - 긴 숫자 식별자 축약
        - url 축약 등
```javascript
// base = 36

// 점 2개
alert( 123456..toString(36) );  // 2n9c

// 괄호
alert( (123456).toString(36) ); // 2n9c
```
#### 점 두 개와 메서드 호출
- 숫자 대상 메서드 toString 직접 호출
  - 점 2개 사용
  - 점 1개 사용 시
    - 첫 번째 점 이후 소수부 인식 후 에러 발생 가능
    - 점 하나 더 추가 시 소수부 없다고 판단, 함수 호출
    - 대신 괄호 사용 가능

### 어림수 구하기
- 어림수 관련 내장 함수
  - Math.floor
    - 소수점 첫째 자리 내림(버림)
    - 3.1 → 3
    - -1.1 → -2
  - Math.ceil
    - 소수점 첫째 자리 올림
    - 3.1 → 4
    - -1.1 → -1
  - Math.round
    - 소수점 첫째 자리 반올림
    - 3.1 → 3
    - 3.6 → 4
    - -1.1 → -1
  - Math.trunc (Internet Explorer 미지원)
    - 소수부 무시
    - 3.1 → 3
    - -1.1 → -1

||Math.floor|Math.ceil|Math.round|Math.trunc|
|:---:|:---:|:---:|:---:|:---:|
|3.1|3|4|3|3|
|3.6|3|4|4|3|
|-1.1|-2|-1|-1|-1|
|-1.6|-2|-1|-2|-1|

#### 소수점 n-th번째 수 기준 어림수
- ① 곱하기와 나누기
  1. '숫자 * (n*10)'
  2. 어림수 내장 함수 호출
  3. '숫자 / (n*10)'
```javascript
// 소수점 2번째 수 기준
let num = 1.23456;

// 1.23456 → 123.456 → 123 → 1.23
alert( Math.floor(num * 100) / 100 );
```

- ② toFixed(n)
  - 가장 가까운 값 올림 · 버림
    - Math.round 유사
  - 반환 값 : 문자열
    - 단항 덧셈 연산자 · Number() : 숫자형 변환
  - 소수부 길이 < 인수 : 끝에 0 추가
```javascript
let num1 = 12.34;
alert( num1.toFixed(1) ); // "12.3"
let num2 = 12.36;
alert( num2.toFixed(1) ); // "12.4"

// 숫자형 변환
alert( +num2.toFixed(1) ); // 12.4
alert( Number(num2.toFixed(1)) ); // 12.4

//소수부 길이 < 인수
let num3 = 12.34;
alert( num3.toFixed(5) ); // "12.34000" (소수부 길이 5 맞춤)
```

### 부정확한 계산
- 숫자 내부적으로 64비트 형식 IEEE-754 표현
  - 숫자 저장 시 정확히 64비트 필요
    - 52비트 : 숫자 저장
    - 11비트 : 소수점 위치 (정수 : 0)
    - 1비트 : 부호 저장
  - 숫자 너무 커지면 64비트 공간 넘쳐 Infinity 처리
```javascript
alert( 1e500 ); // Infinity
```
#### 정밀도 손실 (loss of precision)
```javascript
alert( 0.1 + 0.2 == 0.3 ); // false
alert( 0.1 + 0.2 );        // 0.30000000000000004
```
- 숫자 0, 1 이루어진 이진수 변환되어 연속된 메모리 공간 저장
- 분수 : 이진법 표현 시 무한 소수 (10진법 쉽게 표현)
  - 2진법 체계
    - 2의 거듭제곱 나눈 값 잘 동작
    - 2의 거듭제곱 아닌 값 나누면 무한 소수
  -  2진법 0.1 · 0.2 정확하게 저장 방법 X
  - IEEE-754 : 가능한 가장 가까운 숫자 반올림 방법 사용해 문제 해결
    - 반올림 규칙 적용 시 '작은 정밀도 손실’ 발생
    ```javascript
    alert( 0.1.toFixed(20) ); // 0.10000000000000000555
    ```
    - 숫자 덧셈 시 '정밀도 손실’도 덧셈
  - 문제 해결
    - ⓐ toFixed(n) 메서드 사용해 어림수 생성
      - 항상 문자열 반환
      - 소수점 다음 숫자 항상 항상 인수 갯수
      - 단항 덧셈 연산자 : 숫자형 형 변환
    ```javascript
    let sum = 0.1 + 0.2;
    alert( sum.toFixed(2) ); // 0.30

    // 단항 덧셈 연산자 (숫자형 형 변환)
    alert( +sum.toFixed(2) ); // 0.3
    ```
    - ⓑ 10 거듭제곱 곱 / 나누기
      1. 숫자에 임시 10 거듭제곱 곱하여 정수 변환
      2. 연산
      3. 다시 10 거듭제곱 나누기
      - 정수 대상 수학 연산 : 비교적 에러 小
      - 마지막 나눗셈 : 소수 다시 등장
        - 오류 완전 제거 X
      ```javascript
      alert( (0.1 * 10 + 0.2 * 10) / 10 );     // 0.3
      alert( (0.28 * 100 + 0.14 * 100) / 100); // 0.4200000000000001
      ```
  - 무한소수 방지 완벽 방법 X
    - 필요 때마다 '꼬리’ 잘라 어림수 생성

#### 흥미로운 발견
```javascript
alert( 9999999999999999 ); // 10000000000000000
```
- 정밀도 손실
  - 숫자 저장 52비트 공간 모자람
    - 최소 유효 숫자 (the least significant digit) 손실
- 자바스크립트 숫자 손실 발생해도 오류 발생 X
  - 적절한 포맷으로 숫자 맞추는 데 최선

#### 두 종류의 0
- 0, -0 존재
  - 숫자 부호 단일 비트 저장
  - 0 포함 모든 숫자 부호 설정 가능
  - 대부분의 연산 0, -0 동일 취급 → 차이 두드러지지 않는 편

### isNaN과 isFinite
- Infinity · -Infinity : 그 어떤 숫자보다 큰 · 작은 특수 숫자 값
- NaN : 에러 표현 값
- 숫자형, but ‘비정상적인’ 숫자
- 구분 위한 특별 함수 존재
  - isNaN(value)
    - 인수 숫자 변환 후 NaN 테스트
  ```javascript
  alert( isNaN(NaN) );   // true
  alert( isNaN("str") ); // false

  // 자기 자신 포함 그 어떤 값과도 동일 X (함수 필요 이유)
  alert( NaN === NaN );  // false
  ```
  - isFinite(value)
    - 인수 숫자 변환 후 일반 숫자 경우 true 반환
  ```javascript
  alert( isFinite("15") );     // true
  alert( isFinite("str") );    // false
  alert( isFinite(Infinity) ); // false

  // 종종 문자열 일반 숫자 검증에 사용
  // 숫자 아닌 값 · Infinity · -Infinity 입력 시 false
  let num = +prompt("숫자를 입력하세요.", '');
  alert( isFinite(num) );
  ```
- 빈 문자열 · 공백만 있는 문자열 ("")
  - isFinite 포함 모든 숫자 관련 내장 함수 0 취급

#### Object.is와 비교하기
- Object.is
  - 값 비교 특별 내장 메서드
  - 예외 제외 '===' 전부 동일
  ```javascript
  // 예외
  Object.is(NaN, NaN) // true
  Object.is(0, -0)    // false
  ```

### parseInt와 parseFloat
- 단항 덧셈 연산자 '+' · Number() 사용 숫자형 변환 시 규칙 엄격 적용
  - 피연산자 숫자 아니면 형 변환 실패
  - 엄격 규칙 미적용 : 문자열 처음 · 끝 공백 무시
  ```javascript
  alert( +"100px" ); // NaN
  ```
- parseInt, parseFloat
  - 불가능할 때까지 문자열 숫자 읽음<br />숫자 읽는 도중 오류 발생 시 이미 수집된 숫자 반환
    - parseInt : 정수
    - parseFloat : 부동 소수점 숫자
    ```javascript
    alert( parseInt('100px') );    // 100
    alert( parseFloat('12.5em') ); // 12.5

    alert( parseInt('12.3') );     // 12 (정수 부분만 반환)
    alert( parseFloat('12.3.4') ); // 12.3 (두 번째 점 숫자 읽기 멈춥)
    ```
  - NaN 반환 : 읽을 수 있는 숫자 없을 시
  ```javascript
  alert( parseInt('a123') ); // NaN
  ```

####parseInt(str, radix)의 두 번째 인수
- parseInt 두 번째 매개 변수
  - 진수 지정
  ```javascript
  alert( parseInt('0xff', 16) ); // 255
  alert( parseInt('ff', 16) );   // 255 (0x 없이도 동작)
  alert( parseInt('2n9c', 36) ); // 123456
  ```

### 기타 수학 함수
- 내장 객체 Math
  - 다양한 수학 관련 함수, 상수 보유
    - Math.random()
      - 0 ~ 1 사이 난수 반환 (1 제외)
      ```javascript
      alert( Math.random() ); // 0.1234567894322
      alert( Math.random() ); // 0.5435252343232
      alert( Math.random() ); // ... (무작위 수)
      ```

    - Math.max(a, b, c...) / Math.min(a, b, c...)
      - 인수 중 최대 · 최솟값 반환
      ```javascript
      alert( Math.max(3, 5, -10, 0, 1) ); // 5
      alert( Math.min(1, 2) );            // 1
      ```
    - Math.pow(n, power)
      - n을 power번 거듭제곱 값 반환
      ```javascript
      alert( Math.pow(2, 10) ); // 2의 10제곱 = 1024
      ```

<br />

문자열
=====

- 페이지 인코딩 방식 상관없이 항상 UTF-16 형식

### 따옴표

- 작은따옴표 (")
- 큰따옴표 　(')
- 백틱　　　 (`)
  - 템플릿 리터럴 (template literal)
    - ${…}
  ```javascript
  function sum(a, b) {
    return a + b;
  }
  alert(`1 + 2 = ${sum(1, 2)}`); // 1 + 2 = 3
  ```
    - 문자열 여러 줄 걸쳐 작성
    ```javascript
    let guestList = `손님:
    * John
    * Pete
    * Mary
    `;
    ```
      - 작은따옴표, 큰따옴표 여러줄 문자열 X
  - 템플릿 함수 (template function)
    - 첫 번째 백틱 바로 앞 함수 이름 존재 시 함수 백틱 안 문자열 조각 · 표현식 평가 결과 인수로 받아 자동 호출
      - ex) func`string`
      - '태그드 템플릿(tagged template)'
      - 드물게 사용

### 특수 기호

|특수 문자|설명|
|---|---|
|\n|줄 바꿈|
|\r|캐리지 리턴(carriage return)<br />Windows에서 캐리지 리턴, 줄 바꿈 특수 문자 조합해 줄 바꿈<br />- (\r\n)<br />캐리지 리턴 단독 사용 경우 X|
|\\' · \\"|따옴표|
|\\\\ |역슬래시|
|\t|탭|
|b · \f · \v|백스페이스 (Backspace)<br />폼 피드 (Form Feed)<br />세로 탭 (Vertical Tab)<br />- 호환성 유지 위해 남아있는 기호 (요즘 사용 X)|
|\xXX|16진수 유니코드 XX로 표현한 유니코드 글자<br />- ex) 알파벳 'z' → '\x7A'|
|\uXXXX|UTF-16 인코딩 규칙 사용 16진수 코드 XXXX로 표현한 유니코드 기호<br />XXXX 반드시 네 개의 16진수 구성<br />- ex) \u00A9 → 저작권 기호 © 유니코드|
|\u{X…XXXXXX}<br />(1개 ~ 6개 사이 16진수 글자)|UTF-32 표현 유니코드 기호<br />몇몇 특수 글자 두 개의 유니코드 기호 사용해 인코딩되므로 4바이트 차지<br />이 방법 사용 시 긴 코드 삽입 가능|
- 유니코드
```javascript
alert( "\u00A9" ); // ©
alert( "\u{20331}" ); // 佫, 중국어(긴 유니코드)
alert( "\u{1F60D}" ); // 😍, 웃는 얼굴 기호(긴 유니코드)
```
- 모든 특수 문자 역슬래시 \ 시작
  - '이스케이프 문자 (escape character)'
- 문자열 내 따옴표
```javascript
alert( 'I\'m the Walrus!' ); // 역슬래시
alert( `I'm the Walrus!` );  // 백틱
```
- 문자열 안 역슬래시 \ 표시
  - \\\\
```javascript
alert( `역슬래시: \\` ); // \
```

### 문자열의 길이
- length 프로퍼티
```javascript
// '\n' : ‘특수 문자’ 1개 → 길이 1
alert( `My\n`.length ); // 3
```
### 특정 글자에 접근하기
- 대괄호[] · charAt(pos) 메서드
  - 위치 0부터 시작
```javascript
let str = `Hello`;

// 첫 번째 글자
alert( str[0] );        // H
alert( str.charAt(0) ); // H

// 마지막 글자
alert( str[str.length - 1] ); // o
```
- 대괄호[] 선호
- charAt 하위 호환성 위해 남아있는 메서드
- 접근 위치 글자 없는 경우
  - 대괄호[] → undefined
  - charAt　→ 빈 문자열
```javascript
let str = `Hello`;

alert( str[1000] );        // undefined
alert( str.charAt(1000) ); // '' (빈 문자열)
```
- for..of
  - 문자열 구성 글자 대상 반복 작업
```javascript
for (let char of "Hello") {
  alert(char); // H,e,l,l,o
}
```

### 문자열의 불변성
- 문자열 수정 불가능
- 문자열 중간 글자 하나 수정 시 에러 발생
  - 완전히 새로운 문자열 생성 후 할당
```javascript
let str1 = 'Hi';

str1[0] = 'h';    // Error: Cannot assign to read only property '0' of string 'Hi'
alert( str1[0] ); // 동작 X

let str2 = 'Hi';

str2 = 'h' + str2[1]; // 문자열 전체 교체
alert( str2 );        // hi
```

### 대·소문자 변경하기
- toLowerCase() · toUpperCase()
  - 대문자 ↔ 소문자
```javascript
alert( 'Interface'.toUpperCase() ); // INTERFACE
alert( 'Interface'.toLowerCase() ); // interface

// 글자 하나만 변경
alert( 'Interface'[0].toLowerCase() ); // 'i'
```

### 부분 문자열 찾기

#### str.indexOf(substr, pos)
- 문자열 str의 pos에서부터 시작
- 부분 문자열 substr 어디 위치하는지 검색
- 원하는 부분 문자열 찾으면 위치 반환, 그렇지 않으면 -1 반환
```javascript
let str = 'Widget with id';

alert( str.indexOf('Widget') ); // 0 ('Widget' with id)
alert( str.indexOf('widget') ); // -1, indexOf : 대·소문자 따짐
alert( str.indexOf("id") );     // 1, (W'id'get with id)
```
- 두 번째 매개변수 pos
  - 선택적 사용
  - 해당 위치 검색 시작
```javascript
let str = 'Widget with id';

alert( str.indexOf('id', 2) ) // 12 (Widget with id)
                              //       ↑ 검색 시작
```
- 문자열 내 부분 문자열 전체 대상 작업
  - 반복문 안 indexOf 사용
```javascript
let str = 'As sly as a fox, as strong as an ox';
let target = 'as';
let pos = 0;
while (true) {
  let foundPos = str.indexOf(target, pos);
  if (foundPos == -1) break;

  alert( `위치: ${foundPos}` );
  pos = foundPos + 1; // 다음 위치 기준 검색 이어 시작
}

↓↓↓

let str = "As sly as a fox, as strong as an ox";
let target = "as";
let pos = -1;
while ((pos = str.indexOf(target, pos + 1)) != -1) {
  alert( `위치: ${pos}` );
}
```
#### str.lastIndexOf(substr, position)
- 문자열 끝에서부터 부분 문자열 검색
- 반환 부분 문자열 위치
  - 문자열 끝 기준

#### if문 조건식 indexOf 주의 점
- if문 : 0 → false 간주
  - -1과 비교
```javascript
let str = "Widget with id";

// if(0) → false
if (str.indexOf("Widget")) {
  alert("찾았다!");
}

// -1 비교
if (str.indexOf("Widget") != -1) {
    alert("찾았다!"); // 의도한 대로 동작합니다.
}
```

#### 비트 NOT 연산자를 사용한 기법

