객체
====

##### 자료형 구분
- 원시형
- 객체형 <sub>(프로퍼티 보유)</sub>
  - 키 : 문자형 · 심볼형
  - 값 : 모든 자료형
- 빈 객체 생성
```javascript
let user = new Object(); // 객체 생성자
let user = {};           // 객체 리터럴, 주로 사용
```

### 리터럴과 프로퍼티
- `{ … }` <sub>(중괄호)</sub> 안 선언
  - '키 : 값' 쌍 <sub>(프로퍼티)</sub>
```javascript
let user = {    // 객체
  name: "John", // 키: "name", 값: "John"
  age: 30       // 키: "age" , 값: 30
};
```
- 프로퍼티 키
  - 프로퍼티 이름
  - 식별자
- `.` <sub>(점)</sub> 표기법
  - 프로퍼티 값 읽기
```javascript
alert( user.name ); // John
alert( user.age );  // 30
```
- 프로퍼티 추가
  - 값 : 모든 자료형 가능
```javascript
user.isAdmin = true;
```
- 프로퍼티 삭제
  - `delete` <sub>(연산자)</sub>
```javascript
delete user.age;
```
- 프로퍼티 이름 복수 단어 조합
  - 따옴표로 묶기
```javascript
let user = {
  name: "John",
  age: 30,

  // 복수 단어
  // → 따옴표 사용
 "likes birds": true
};
```

##### 마지막 프로퍼티 : `,` <sub>(쉼표)</sub> 사용 가능
- trailing <sub>(길게 늘어지는)</sub> 쉼표
- hanging <sub>(매달리는)</sub> 쉼표
- 모든 프로퍼티 동일 구조
  - 프로퍼티 추가 · 삭제 · 이동 용이
```javascript
let user = {
  name: "John",
  age: 30,
}
```

<br />

<img class="icon" src="../../images/commons/icons/circle-exclamation-solid.svg" /> **상수 객체 수정될 수 있음**

- `const` 선언 객체 : 수정 가능
  - 할당된 객체 고정
  - 할당된 객체 내용 고정 X

```javascript
const user = {
  name: "John"
};
user.name = "Pete";
alert(user.name); // Pete
```

<br />

### `[ … ]` <sub>(대괄호)</sub> 표기법
- 복수 단어 조합 <sub>(프로퍼티 키)</sub>
  - `.` <sub>(점)</sub> 표기법 불가능

##### `.` <sub>(점)</sub> 표기법
- '유효한 변수 식별자'
  - 공백 X
  - 숫자 시작 X
  - 특수 문자 X <sub>(`$` · `_` 제외)</sub>
```javascript
// 문법 에러 발생
user.likes birds = true; // 공백
user.likes.1irds = true; // 숫자 시작
user.likes.bi#ds = true; // 특수 문자 ('$' · '_' 제외)
```

##### `[ … ]` <sub>(대괄호)</sub> 표기법
- 모든 문자열 정상 동작
- 따옴표 <sub>(`"` · `'`)</sub> 묶기
```javascript
let user = {};
user["likes birds"] = true; // 할당
alert(user["likes birds"]); // 접근
delete user["likes birds"]; // 삭제
```
- 모든 표현식 평가 결과
  - 키로 사용 가능
```javascript
let key = "likes birds";

// user["likes birds"] = true;
user[key] = true;
```
- 프로퍼티 키 변수 런타임 평가
  - 사용자 입력값 변경 등에 따라 값 변경
  - 평가 종료 이후의 결과
  - 응용하여 코드 유연하게 작성
```javascript
let user = {
  name: "John",
  age: 30
};
let key = prompt("사용자의 어떤 정보를 얻고 싶으신가요?", "name");

// 변수로 접근
alert( user[key] ); // John, 프롬프트 창 "name" 입력한 경우
```
##### `.` <sub>(점)</sub> 표기법
- 런타임 평가 X
```javascript
let user = {
  name: "John",
  age: 30
};
let key = "name";
alert( user.key ) // undefined
```

#### 계산된 프로퍼티
- 객체 생성 시
  - 객체 리터럴 내 `[ … ]` <sub>(대괄호)</sub>
```javascript
let fruit = prompt("어떤 과일을 구매하시겠습니까?", "apple");
let bag = {
  [fruit]: 5,       // fruit (변수) 에서 프로퍼티 이름 동적으로 받아옴
// apple : 5,       // fruit (변수) == 'apple'
};
alert( bag.apple ); //  5, fruit (변수) → 'apple' (문자열) 할당

// 동일

let fruit = prompt("어떤 과일을 구매하시겠습니까?", "apple");
let bag = {};
bag[fruit] = 5;     // fruit (변수) 사용해 프로퍼티 이름 생성
// bag.fruit  = 5;
```
- `[ … ]` <sub>(대괄호)</sub> 내 복잡한 표현식 가능
```javascript
let fruit = 'apple';
let bag = {

// bag.appleComputers  = 5
  [fruit + 'Computers']: 5
};
```
- 프로퍼티 이름 · 값 제약 제거
  - `.` <sub>(점)</sub> 표기법 보다 강력
  - 작성 번거로움

##### `.` <sub>(점)</sub> 표기법 vs `[ … ]` <sub>(대괄호)</sub> 표기법
- `.` <sub>(점)</sub> 표기법
  - 이름 확정
  - 단순한 이름
- `[ … ]` <sub>(대괄호)</sub> 표기법
  - 복잡한 상황

### 단축 프로퍼티
- 프로퍼티 · 변수 이름 동일 시
  - 프로퍼티 값 단축 구문 사용
```javascript
function makeUser(name, age) {
  return {
    name: name,
    age: age,
  };
}

↓↓↓

function makeUser(name, age) {
  return {
    name, // name: name
    age,  // age : age
  };
}
```
- 일반 · 단축 프로퍼티 함께 사용
```javascript
let user = {
  name,  // name: name
  age: 30
};
```

### 프로퍼티 이름 제약사항
- 특별한 제약 X
  - 문자형
  - 심볼형
  - 예약어
  - 기타 등등
```javascript
// 예약어 프로퍼티 키
let obj = {
  for: 1,
  let: 2,
  return: 3
};
alert( obj.for + obj.let + obj.return );  // 6
```
- 문자형 · 심볼형 외 자료형
  - 문자열 자동 형 변환
```javascript
let obj = {
  0: "test"        // "0": "test"
};
alert( obj["0"] ); // test
alert( obj[0] );   // test, 0 → "0" (자동 형 변환)
```
- `__proto__`
  - 특별 대우 프로퍼티 이름 <sub>(역사적인 이유)</sub>
```javascript
let obj = {};
obj.__proto__ = 5;    // 숫자 할당
alert(obj.__proto__); // [object Object], 할당 무시됨
```

### `in` <sub>(연산자)</sub> : 프로퍼티 존재 여부 확인
- 미존재 프로퍼티 접근 시
  - 에러 발생 X
  - `undefined` 반환
```javascript
let user = {};
alert( user.noSuchProperty === undefined );
```
- `in` 왼쪽 : 반드시 프로퍼티 이름
  - 보통 따옴표 감싼 문자열
```javascript
"key" in object
```
```javascript
let user = {
  name: "John",
  age: 30
};
alert( "age" in user );    // true
alert( "blabla" in user ); // false
```
- 따옴표 생략 시
  - 엉뚱한 변수 조사 위험
```javascript
let user = { age: 30 };
let key = "age";
alert( key in user ); // true
                      // 프로퍼티 존재 여부 확인 시
                      // - key (변수) 값 "age" 사용
```
- `in` <sub>(연산자)</sub> 존재 이유
  - 가끔 `=== undefined` 실패
```javascript
let obj = {
  test: undefined
};

// test (프로퍼티)
// - 객체 내 존재
// - 값 : undefined
alert( obj.test );      // undefined

// in (연산자)
// - 프로퍼티 존재 유무 제대로 확인
alert( "test" in obj ); // true
```

### `for…in` <sub>(반복문)</sub>
- 객체 내 모든 키 순회
```javascript
for (key in object) {

  // 본문 : 각 프로퍼티 키 사용 코드

}
```
```javascript
let user = {
  name: "John",
  age: 30,
  isAdmin: true
};

/*
 user (객체) 내 모든 프로퍼티 출력
 반복 변수 선언
 - let key
 반복 변수명
 - 자유롭게 지정
 */
for (let key in user) {
  alert( key );       // name, age, isAdmin
  alert( user[key] ); // John, 30 , true
}
```

### 객체 정렬 방식
- 특별한 정렬 방식
- 정수 프로퍼티
  - 자동 정렬
```javascript
let codes = {
  "49": "독일",
  "41": "스위스",
  "44": "영국",
  "1": "미국"
};

// 정수 프로퍼티 자동 정렬
for (let code in codes) {
  alert(code); // 1, 41, 44, 49
}
```

<br />

<img class="icon" src="../../images/commons/icons/circle-exclamation-solid.svg" /> **정수 프로퍼티**

- 변형 없이 정수 형 변환 가능 문자열

|문자열|정수|변형|정수<br />프로퍼티|
|---|:---:|:---:|:---:|
|`"49"`|49|X|O|
|`+49`|49|O|X|
|`1.2`|1|O|X|

```javascript
// Math.trunc (함수)
// - 소수점 아래 버리고 숫자 정수부만 반환
alert( String(Math.trunc(Number("49"))) );  // '49' ==  49 (정수 프로퍼티)
alert( String(Math.trunc(Number("+49"))) ); // '49' != +49 (정수 프로퍼티 X)
alert( String(Math.trunc(Number("1.2"))) ); // '1'  != 1.2 (정수 프로퍼티 X)
```

<br />

- 그 외 프로퍼티
  - 객체 추가 순서 순
```javascript
let user = {
  name: "John",
  surname: "Smith"
};
user.age = 25;   // 프로퍼티 1개 추가

// 추가 순서대로 나열
for (let prop in user) {
  alert( prop ); // name, surname, age
}
```
- 정수 프로퍼티 자동 정렬 방지 트릭
  - 프로퍼티 앞 `+` 사용
```javascript
let codes = {
  "+49": "독일",
  "+41": "스위스",
  "+44": "영국",
  "+1" : "미국"
};

for (let code in codes) {
  alert( +code ); // 49, 41, 44, 1
}
```

<br />

## 요약
객체는 몇 가지 특수한 기능을 가진 연관 배열(associative array)입니다.

객체는 프로퍼티(키-값 쌍)를 저장합니다.
- 프로퍼티 키는 문자열이나 심볼이어야 합니다. 보통은 문자열입니다.
- 값은 어떤 자료형도 가능합니다.

아래와 같은 방법을 사용하면 프로퍼티에 접근할 수 있습니다.
- 점 표기법: `obj.property`
- 대괄호 표기법 `obj["property"]`. 대괄호 표기법을 사용하면 `obj[varWithKey]`같이 변수에서 키를 가져올 수 있습니다.
- 객체엔 다음과 같은 추가 연산자를 사용할 수 있습니다.

프로퍼티를 삭제하고 싶을 때: `delete obj.prop`
- 해당 key를 가진 프로퍼티가 객체 내에 있는지 확인하고자 할 때: `"key" in obj`
- 프로퍼티를 나열할 때: `for (let key in obj)`
- 지금까진 '순수 객체(plain object)'라 불리는 일반 객체에 대해 학습했습니다.

자바스크립트에는 일반 객체 이외에도 다양한 종류의 객체가 있습니다.
- `Array` – 정렬된 데이터 컬렉션을 저장할 때 쓰임
- `Date` – 날짜와 시간 정보를 저장할 때 쓰임
- `Error` – 에러 정보를 저장할 때 쓰임
- 기타 등등

객체마다 고유의 기능을 제공하는데, 이에 대해선 추후 학습하겠습니다. 사람들은 종종 'Array 타입’이나 'Date 타입’이라는 용어를 쓰곤 합니다. 사실 Array와 Date는 독립적인 자료형이 아니라 '객체’형에 속합니다. 객체에 다양한 기능을 넣어 확장한 또 다른 객체이죠.

객체는 다재다능한 자료구조로 자바스크립트에서 그 영향력이 막강합니다. 지금까진 객체라는 거대한 주제의 극히 일부만 다루었습니다. 튜토리얼 뒤쪽에서 객체에 대한 더 상세한 내용을 다루도록 하겠습니다.

<br />

## <img class="icon" src="../../images/commons/icons/circle-check-solid.svg" /> 과제

### 객체야 안녕?
다음 각 동작을 한 줄씩, 코드로 작성해보세요.
1. 빈 객체 `user`를 만듭니다.
2. `user`에 키가 `name`, 값이 `John`인 프로퍼티를 추가하세요.
3. `user`에 키가 `surname`, 값이 `Smith`인 프로퍼티를 추가하세요.
4. `name`의 값을 `Pete`로 수정해보세요.
5. `user`에서 프로퍼티 `name`을 삭제하세요.

<br />

<img class="icon" src="../../images/commons/icons/circle-answer.svg" />

```javascript
let user = {};
user.name = "John";
user.surname = "Smith";
user.name = "Pete";
delete user.name;
```

<hr />

### 객체가 비어있는지 확인하기
객체에 프로퍼티가 하나도 없는 경우 `true`, 그렇지 않은 경우 `false`를 반환해주는 함수 `isEmpty(obj)`를 만들어 보세요.

아래와 같이 동작해야 합니다.
```javascript
let schedule = {};

alert( isEmpty(schedule) ); // true

schedule["8:30"] = "get up";

alert( isEmpty(schedule) ); // false
```

<br />

<img class="icon" src="../../images/commons/icons/circle-answer.svg" />

객체 프로퍼티를 대상으로 반복문을 실행하다가 프로퍼티가 하나라도 있으면 그 즉시 `false`를 반환하게 코드를 작성하면 됩니다.
```javascript
function isEmpty(obj) {
  for (let key in obj) {
    // if the loop has started, there is a property
    return false;
  }
  return true;
}
```
[정답](https://plnkr.co/edit/JMZhLxbDAP09s42G?p=preview)

<hr />


### 변하지 않는 객체?
`const`와 함께 선언한 객체를 변경하는 게 가능할까요? 생각을 공유해주세요!
```javascript
const user = {
  name: "John"
};
// 아래 코드는 에러 없이 실행될까요?
user.name = "Pete";
```

<br />

<img class="icon" src="../../images/commons/icons/circle-answer.svg" />

당연히 에러 없이 실행됩니다.

`const`는 한 번이라도 값을 할당한 변수가 변경되는 걸 막습니다.

변수 `user`는 객체 참조 값을 저장하고 있는데, `const`는 이 값이 변경되는걸 막는 것이지, 객체의 내용(프로퍼티)을 변경하는 건 막지 않습니다.

```javascript
const user = {
  name: "John"
};
// works
user.name = "Pete";
// error
user = 123;
```

<hr />

### 프로퍼티 합계 구하기
모든 팀원의 월급에 대한 정보를 담고 있는 객체가 있다고 해봅시다.
```javascript
let salaries = {
  John: 100,
  Ann: 160,
  Pete: 130
}
```

모든 팀원의 월급을 합한 값을 구하고, 그 값을 변수 `sum`에 저장해주는 코드를 작성해보세요. `sum`엔 `390`이 저장되어야겠죠?

주의: `salaries`가 비어있다면 `sum`에 `0`이 저장되어야 합니다.

<br />

<img class="icon" src="../../images/commons/icons/circle-answer.svg" />

```javascript
let salaries = {
  John: 100,
  Ann: 160,
  Pete: 130
};

let sum = 0;
for (let key in salaries) {
  sum += salaries[key];
}

alert(sum); // 390
```

<hr />


### 프로퍼티 값 두 배로 부풀리기
객체 `obj`의 프로퍼티 값이 숫자인 경우 그 값을 두 배 해주는 함수 `multiplyNumeric(obj)`을 만들어보세요.

예시:
```javascript
// 함수 호출 전
let menu = {
  width: 200,
  height: 300,
  title: "My menu"
};

multiplyNumeric(menu);

// 함수 호출 후
menu = {
  width: 400,
  height: 600,
  title: "My menu"
};
```

`multiplyNumeric`은 아무것도 반환하지 않아도 괜찮습니다. 객체 자체를 수정해주기만 하면 됩니다.

힌트: `typeof`를 사용하면 프로퍼티 값이 숫자인지 확인할 수 있습니다.

<br />

<img class="icon" src="../../images/commons/icons/circle-answer.svg" />

```javascript
function multiplyNumeric(obj) {
  for (let key in obj) {
    if (typeof obj[key] == 'number') {
      obj[key] *= 2;
    }
  }
}
```

[정답](https://plnkr.co/edit/ZCVikuTipQmblDNG?p=preview)
