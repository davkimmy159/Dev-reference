`?.` <sub>(옵셔널 체이닝)</sub>
=================

<img src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **최근 추가됨**

- 구식 브라우저 폴리필 필요

<br />

- 해당 프로퍼티 없는 중첩 객체
  - 에러 없이 안전하게 접근

### `?.` <sub>(옵셔널 체이닝)</sub> 필요 이유
- 일반적으로 미존재 정보 접근 시
  - 에러 발생
```javascript
let user = {}; // 주소 정보 없는 사용자
alert(user.address.street); // TypeError: Cannot read property 'street' of undefined
```
```javascript
// querySelector( … ) 호출 결과 null 인 경우
// - 에러 발생
let html = document.querySelector('.my-element').innerHTML;
```

##### `?.`<sub>(옵셔널 체이닝)</sub> 명세서 등장 전
- `&&` <sub>(AND 연산자)</sub> 사용
  - 객체 · 프로퍼티 존재 여부 확인
  - 코드량 ↑
```javascript
let user = {}; // 주소 정보 없는 사용자
alert( user && user.address && user.address.street ); // undefined, 에러 발생 X
```

### `?.`<sub>(옵셔널 체이닝)</sub> 등장
- 평가 대상 <sub>(앞)</sub> : `undefined` · `null`
  - 평가 중단
  - `undefined` 반환
- 평가 대상 <sub>(앞)</sub> 에만 동작 · 확장 X
```javascript
let user = {};                  // 주소 정보 없는 사용자
alert( user?.address?.street ); // undefined, 에러 발생 X
```
- 객체 부재 시
  - 에러 발생 X
```javascript
let user = null;

/*
 user?.
 - null · undefined 만 처리
 user 존재 · user.address (프로퍼티) 부재 시
 - 2번째 . (점 연산자) 에러 발생
 */
alert( user?.address );        // undefined
alert( user?.address.street ); // undefined
```

<br />

<img src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`?.`<sub>(옵셔널 체이닝)</sub> 남용 X**

- 존재하지 않아도 괜찮은 대상에만 사용
- 논리상 필수값
  - 사용 X
```javascript
// user    : 논리상 필수값   (사용 X)
// address : 논리상 필수값 X (사용)
user.address?.street;

// 실수로 인해 user 값 미할당 시
// - 바로 알아낼 수 있도록 에러 발생 유도
// - 그렇지 않으면 에러 초기 발견 X (디버깅 난이도 ↑)
```

<br />

<img src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`?.`<sub>(옵셔널 체이닝)</sub> 앞 변수 반드시 선언**

```javascript
/*
 user (변수) 미선언 시
   - 평가 때 에러 발생
   - 선언 완료 변수에만 동작
 let · const · var 사용해 user (변수) 정의
 */
user?.address; // ReferenceError: user is not defined
```

<br />

### 단락 평가
- 좌측 평가대상 값 부재 시
  - 즉시 평가 중단
  - 우측 동작도 중단
```javascript
let user = null;
let x = 0;
user?.sayHi(x++); // 아무 일도 일어나지 않음
alert(x);         // 0, 증가 X
```

### `?.()` <sub>(함수)</sub> vs `?.[]` <sub>(프로퍼티)</sub>

##### `?.`<sub>(옵셔널 체이닝)</sub> ≠ 연산자
- 함수 · 대괄호 함께 동작
  - 특별한 문법 구조체

##### `?.()` <sub>(함수)</sub>
- 존재 여부 불확실한 함수 호출
```javascript
let user1 = {
  admin() {
    alert("관리자 계정입니다.");
  }
}
let user2 = {};  // admin (메서드) 부재

// admin (메서드) 호출
user1.admin?.();
user2.admin?.(); // 에러 없이 평가 중단
```

##### `?.[]` <sub>(프로퍼티)</sub>
- 존재 여부 불확실한 프로퍼티
  - 안전하게 접근
- `?.prop` → `?.[key]`
```javascript
let user1 = {
  firstName: "Violet"
};
let user2 = null;
let key = "firstName";

alert( user1?.[key] ); // Violet
alert( user2?.[key] ); // undefined
alert( user1?.[key]?.something?.not?.existing); // undefined
```
- `?.`<sub>(옵셔널 체이닝)</sub> · `delete` 조합
```javascript
delete user?.name; // user 존재 시
                   // - user.name 삭제
```

<br />

<img src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`?.`<sub>(옵셔널 체이닝)</sub> : 읽기 · 삭제 가능 (쓰기 X)**

- `=` <sub>(할당 연산자)</sub> 좌측 X
```javascript
// undefined = "Violet"
user?.name = "Violet"; // SyntaxError: Invalid left-hand side in assignment
```

<br />

## 요약
옵셔널 체이닝 문법 `?.`은 세 가지 형태로 사용할 수 있습니다.
- `obj?.prop `– `obj`가 존재하면 `obj.prop`을 반환하고, 그렇지 않으면 `undefined`를 반환함
- `obj?.[prop]` – `obj`가 존재하면 `obj[prop]`을 반환하고, 그렇지 않으면 `undefined`를 반환함
- `obj?.method()` – `obj`가 존재하면 `obj.method()`를 호출하고, 그렇지 않으면 `undefined`를 반환함

여러 예시를 통해 살펴보았듯이 옵셔널 체이닝 문법은 꽤 직관적이고 사용하기도 쉽습니다. `?.` 좌측 평가 대상이 `null`이나 `undefined`인지 확인하고 `null`이나 `undefined`가 아니라면 평가를 계속 진행합니다.
- `?.`를 계속 연결해서 체인을 만들면 중첩 프로퍼티들에 안전하게 접근할 수 있습니다.
- `?.`은 `?.`좌측 평가대상이 없어도 괜찮은 경우에만 선택적으로 사용해야 합니다.

꼭 있어야 하는 값인데 없는 경우에 `?.`을 사용하면 프로그래밍 에러를 쉽게 찾을 수 없으므로 이런 상황을 만들지 말도록 합시다.
