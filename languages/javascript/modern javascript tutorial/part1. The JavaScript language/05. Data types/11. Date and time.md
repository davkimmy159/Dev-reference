`Date` <sub>(객체)</sub> · 날짜
===============

##### 사용처
- 생성 · 수정 시간 저장
- 시간 측정
- 현재 날짜 출력
- 기타 등등

### 객체 생성

#### `new Date()`

##### 인수 없이 호출 시
- 현재 날짜 · 시간 `Date` <sub>(객체)</sub> 반환
```javascript
let now = new Date();
alert( now ); // 현재 날짜 · 시간 출력
```

#### `new Date(ms)`

##### 인수 1개
- `ms` <sub>(1/1000 초)</sub> 후 시점 `Date` <sub>(객체)</sub> 반환</sub>
  - 1970.1.1 00:00:00 기준
  - UTC 기준 <sub>(UTC + 0)</sub>
```javascript
// 1970.1.1 00:00:00 (UTC + 0)
let Jan01_1970 = new Date(0);
alert( Jan01_1970 );

// 1970.1.1 에서 24시간 후
// - 1970.1.2 (UTC+0)
let Jan02_1970 = new Date(24 * 3600 * 1000);
alert( Jan02_1970 );
```

##### 타임스탬프 <sub>(timestamp)</sub>
- 1970년 첫날 기준
  - 흘러간 밀리초 표현 정수
- 숫자 형태
  - 간편한 표현
- `new Date(timestamp)`
  - 특정 날짜 `Date` <sub>(객체)</sub> 손쉽게 생성
- `date.getTime()` <sub>(메서드)</sub>
  - `Date` <sub>(객체)</sub> 타임스탬프 추출
- 1970.1.1 이전 날짜 해당 값
  - 음수
```javascript
// 1969.12.31
let Dec31_1969 = new Date(-24 * 3600 * 1000);
alert( Dec31_1969 );
```

#### `new Date(datestring)`

##### 인수 1개
- 문자열 인수
  - 자동 구문 분석
- 구문 분석 적용 시 알고리즘
  - `Date.parse` 사용 알고리즘 동일
```javascript
let date = new Date("2017-01-26");
alert(date);
/*
 인수 : 시간 미지정 시
 - GMT 자정 기준
 코드 실행 시간대 (timezone) 따라 출력 문자열 바뀜
 - Thu Jan 26 2017 11:00:00 GMT+1100 (Australian Eastern Daylight Time)
 - Wed Jan 25 2017 16:00:00 GMT-0800 (Pacific Standard Time)
 */
```

#### `new Date(`<br />　　　`year,`<br />　　　`month,`<br />　　　`date,`<br />　　　`hours,`<br />　　　`minutes,`<br />　　　`seconds,`<br />　　　`ms)`

##### 주어진 인수 조합 · 생성 가능 날짜 `Date` <sub>(객체)</sub> 반환
- 지역 시간대 <sub>(timezone)</sub> 기준

|인수|설명|예시|필수|기본값|
|:---:|---|---|:---:|:---:|
|`year`|4자리 <sub>(숫자)</sub>|`2013` <sub>(O)</sub><br />`98` <sub>(X)</sub>|O|X|
|`month`|0 <sub>(1월)</sub> ~ 11 <sub>(12월)</sub> <sub>(숫자)</sub>|`3`|O|X|
|`date`|하루 <sub>(일)</sub>|`6`|X|`1`|
|`hours`<br />`minutes`<br />`seconds`<br />`ms`|시간 · 분 · 초 · 밀리초||X|`0`|

```javascript
// 2011.1.1, 00:00:00
new Date(2011, 0, 1, 0, 0, 0, 0);
new Date(2011, 0, 1);

// 최소 정밀도
// - 1밀리초 (1 / 1000초)
let date = new Date(2011, 0, 1, 2, 3, 4, 567);
alert( date ); // 2011.1.1 02:03:04.567
```

### 날짜 구성 요소 얻기

|메서드|반환 값|
|---|---|
|`getFullYear()`|연도 <sub>(4자릿수)</sub>|
|`getMonth()`|월 <sub>(`0` ~ `11`)</sub>|
|`getDate()`|일 <sub>(`1` ~ `31`)</sub>|
|`getHours()`<br />`getMinutes()`<br />`getSeconds()`<br />`getMilliseconds()`|시 · 분 · 초 · 밀리초|

<br />

<img src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`getYear()` X · `getFullYear()` 사용**

##### 여러 JS 엔진
- `getYear()` <sub>(비표준 메서드)</sub> 구현
  - 사용 X <sub>(`deprecated`)</sub>

##### 두 자릿수 연도 필요 시
- `getYear()` X
- `getFullYear()` 사용

<br />

#### `getDay()`
- `0` <sub>(일)</sub> ~ `6` <sub>(토)</sub> 중 하나 반환
- 몇몇 국가
  - 요일 첫날 ≠ 일요일
- `getDay()`
  - `0` == 일요일
  - 변경 불가능

#### 위 모든 메서드 : 현지 시간 기준 날짜 구성 요소 반환

##### 표준시 <sub>(UTC + 0)</sub> 기준 날짜 구성 요소 반환 메서드
- `getUTCFullYear()`
- `getUTCMonth()`
- `getUTCDay()`
```javascript
// 현재 일시
let date = new Date();

// 현지 시간 기준
alert( date.getHours() );

// 표준시간대 기준
// - UTC + 0
// - 일광 절약 시간제 미적용 런던 시간
alert( date.getUTCHours() );
```

#### `getTime()`
- 타임스탬프 반환
  - 1970.1.1 00:00:00 ~ '인수 일시'
  - 밀리초 단위

#### `getTimezoneOffset()`
- 현지 시간 ~ 표준 시간 차이 <sub>(분)</sub> 반환

### 날짜 구성 요소 설정

##### 날짜 구성 요소 설정 메서드
- `setFullYear(year, [month], [date])`
- `setMonth(month, [date])`
- `setDate(date)`
- `setHours(hour, [min], [sec], [ms])`
- `setMinutes(min, [sec], [ms])`
- `setSeconds(sec, [ms])`
- `setMilliseconds(ms)`
- `setTime(milliseconds)`
  - 1970.1.1 00:00:00 UTC 기준

##### 모든 메서드 <sub>(`setTime` 제외)</sub>
- 표준시 기준 메서드 <sub>(짝)</sub> 존재
  - ex&#41; `setUTCHours()`
```javascript
let today = new Date();

 // 시 변경 (0)
// - 날짜 변경 X
today.setHours(0);
alert(today);

// 시 · 분 · 초 변경 (00:00:00)
// - 날짜 변경 X
today.setHours(0, 0, 0, 0);
alert(today);
```

### 자동 고침

##### 범위 벗어난 값 설정 시
- 자동 고침 기능 활성화
  - 값 자동 수정
```javascript
let date = new Date(2013, 0, 32); // 2013.1.32 X
alert(date);                      // 2013.2.1
```

#### 입력 받은 날짜 : 구성 요소 범위 벗어날 시
- 초과분
  - 다른 날짜 구성 요소 자동 배분

##### ex&#41; 윤년 자동 계산
```javascript
let date = new Date(2016, 1, 28);
date.setDate(date.getDate() + 2);

alert( date ); // 2016.3.1
```

##### 일정 시간 지난 후 날짜 구하기
```javascript
let date = new Date();
date.setSeconds(date.getSeconds() + 70);

alert( date ); // 70초 후 날짜 출력
```

##### 0 · 음수
- 날짜 구성 요소 설정 가능
```javascript
let date = new Date(2016, 0, 2); // 2016.1.2

date.setDate(1); // 1일 변경
alert( date );   // 2016.1.1

/*
 일 설정 최솟값 : 1
 0일 설정 시
 - 전 달 마지막 날 설정
*/
date.setDate(0); // 0일 변경 (전달 마지막 날)
alert( date );   // 2015.12.31
```

### `Date` <sub>(객체)</sub> : 숫자 변경 후 시간차 측정

##### `Date` <sub>(객체)</sub> → 숫자형 형 변환 시
- 타임스탬프
- `date.getTime()` 반환 값 동일
```javascript
let date = new Date();
alert(+date); // 타임스탬프
              // date.getTime() 동일
```

##### 날짜 : `-` <sub>(뺄셈 연산자)</sub> 적용 시
- 시차 <sub>(밀리초 기준)</sub>
```javascript
let start = new Date(); // 측정 시작

// 원하는 작업 수행
for (let i = 0; i < 100000; i++) {
  let doSomething = i * i * i;
}

let end = new Date();   // 측정 종료

alert( `반복문을 모두 도는데 ${end - start} 밀리초가 걸렸습니다.` );
```

### `Date.now()`

##### 현재 타임스탬프 반환
- `new Date().getTime()` 동일

##### `Date` <sub>(객체)</sub> 미생성
- `new Date().getTime()` 보다 빠름
- 가비지 컬렉터 부담 ↓
- 성능 중요 시 자주 활용
```javascript
// 측정 시작
// - 1970.1.1 ~ 현재 (밀리초)
let start = Date.now();

// 원하는 작업 수행
for (let i = 0; i < 100000; i++) {
  let doSomething = i * i * i;
}

// 측정 종료
let end = Date.now();

// 숫자끼리 차감
// - Date (객체) X
alert( `반복문을 모두 도는데 ${end - start} 밀리초가 걸렸습니다.` );
```

### 벤치마크 테스트
- 비교 대상 성능 비교 · 시험 · 평가

##### CPU 소모 큰 함수
- 신뢰할만한 벤치마크 <sub>(평가 기준)</sub> 구할 시
  - 상당한 주의 필요
```javascript
// 숫자형 형 변환
function diffSubtract(date1, date2) {
  return date2 - date1;
}

// 숫자형 형 변환 X
function diffGetTime(date1, date2) {
  return date2.getTime() - date1.getTime();
}

// 벤치마크 테스트
function bench(f) {
  let date1 = new Date(0);
  let date2 = new Date();

  let start = Date.now();
  for (let i = 0; i < 100000; i++) f(date1, date2);
  return Date.now() - start;
}

alert( 'diffSubtract 십만번 호출 소모 시간: ' + bench(diffSubtract) + 'ms' );
alert( 'diffGetTime  십만번 호출 소모 시간: ' + bench(diffGetTime) + 'ms' );
```

##### 형 변환 X
- 엔진 최적화 소모 자원 ↓
- `getTime()` 훨씬 빠름

##### 멀티 프로세스 지원 운영체제
- 병렬 처리 <sub>(CPU 자원 투입)</sub> 시스템
  - 벤치마크 영향 (부정확한 결과)

##### 좀 더 신뢰할만한 벤치마크 테스트
- 번갈아 가면서 여러 번 실행
```javascript
// … 동일 …

let time1 = 0;
let time2 = 0;

/*
 벤치마크 테스트
 bench (함수)
 - 각 함수 별로 10번씩 실행
   - diffSubtract 10번
   - diffGetTime  10번
 */
for (let i = 0; i < 10; i++) {
  time1 += bench(diffSubtract);
  time2 += bench(diffGetTime);
}

alert( 'diffSubtract에 소모된 시간: ' + time1 );
alert( 'diffGetTime에 소모된 시간: ' + time2 );
```

##### 모던 JS 엔진
- hot code <sub>(아주 많이 실행된 코드)</sub>
  - 최적화 수행
- 예열용 `bench` 실행
```javascript
// "예열용" 코드 (메인 반복문 전)
bench(diffSubtract);
bench(diffGetTime);

// 벤치마크 테스트 시작
for (let i = 0; i < 10; i++) {
  time1 += bench(diffSubtract);
  time2 += bench(diffGetTime);
}
```

<br />

<img src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **세밀한 벤치마킹 진행 시 주의**

##### 모던 JS 엔진 : 최적화 多
- 만들어진 테스트 vs 실제 사례
  - 결과 상이 가능
  - 아주 작은 것 : 더 상이 가능
    - 연산자
    - 내장 함수
    - 기타 등등

##### 진지한 성능 이해 목표 시
- JS 엔진 동작 방식 공부 필요
- [Javscript v8 Engine Essay](http://mrale.ph)

<br />

### `Date.parse` · 문자열

#### 문자열에서 날짜 읽음
- 요구 문자열 형식
  - `YYYY-MM-DDTHH:mm:ss.sssZ`
  - `YYYY-MM-DD`
  - `YYYY-MM`
  - `YYYY`
  - 기타 등등

|문자열|내용|
|---|---|
|`YYYY-MM-DD`|연-월-일 <sub>(날짜)</sub>|
|`T`|구분 기호|
|`HH:mm:ss.sss`|시:분:초.밀리초|
|`Z` <sub>(옵션)</sub>|`+-hh:mm` 형식 시간대|
||`Z` <sub>(한 글자)</sub> : `UTC + 0`|

##### 문자열 대응 날짜 타임스탬프 반환
- 문자열 형식 조건 부적합 시
  - `NaN` 반환
```javascript
let ms = Date.parse('2012-01-26T13:51:50.417-07:00');

alert(ms); // 1327611110417 (타임스탬프)

// 타임스탬프만으로 새 Date (객체) 생성 가능
let date = new Date( Date.parse('2012-01-26T13:51:50.417-07:00') );

alert(date);
```

<br />

## 요약
- 자바스크립트에선 [`Date`](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Date) 객체를 사용해 날짜와 시간을 나타냅니다. `Date` <sub>(객체)</sub>엔 '날짜만' 혹은 '시간만' 저장하는 것은 불가능하고, 항상 날짜와 시간이 함께 저장됩니다.
- 월은 `0`부터 시작합니다(`0`은 1월을 나타냅니다).
- 요일은 `getDay()`를 사용하면 얻을 수 있는데, 요일 역시 0부터 시작합니다(`0`은 일요일을 나타냅니다).
- 범위를 넘어가는 구성요소를 설정하려 할 때 `Date` 자동 고침이 활성화됩니다. 이를 이용하면 월/일/시간을 쉽게 날짜에 추가하거나 뺄 수 있습니다.
- 날짜끼리 빼는 것도 가능한데, 이때 두 날짜의 밀리초 차이가 반환됩니다. 이게 가능한 이유는 `Date` 가 숫자형으로 바뀔 때 타임스탬프가 반환되기 때문입니다.
- `Date.now()`를 사용하면 현재 시각의 타임스탬프를 빠르게 구할 수 있습니다.

자바스크립트의 타임스탬프는 초가 아닌 밀리초 기준이라는 점을 항상 유의하시기 바랍니다.

간혹 밀리초보다 더 정확한 시간 측정이 필요할 때가 있습니다. 자바스크립트는 마이크로초(1/1,000,000초)를 지원하진 않지만 대다수의 호스트 환경은 마이크로초를 지원합니다. 브라우저 환경의 메서드 [`performance.now()`](https://developer.mozilla.org/en-US/docs/Web/API/Performance/now)는 페이지 로딩에 걸리는 밀리초를 반환해주는데, 반환되는 숫자는 소수점 아래 세 자리까지 지원합니다.
```javascript
alert(`페이지 로딩이 ${performance.now()}밀리초 전에 시작되었습니다.`);
// 얼럿 창에 "페이지 로딩이 34731.26000000001밀리초 전에 시작되었습니다."와 유사한 메시지가 뜰 텐데
// 여기서 '.26'은 마이크로초(260마이크로초)를 나타냅니다.
// 소수점 아래 숫자 세 개 이후의 숫자는 정밀도 에러때문에 보이는 숫자이므로 소수점 아래 숫자 세 개만 유효합니다.
```

Node.js에선 `microtime` 모듈 등을 사용해 마이크로초를 사용할 수 있습니다. 자바스크립트가 구동되는 대다수의 호스트 환경과 기기에서 마이크로초를 지원하고 있는데 `Date` <sub>(객체)</sub>만 마이크로초를 지원하지 않습니다.

<br />

## <img src="../../images/commons/icons/circle-check-solid.svg" /> 과제

### 날짜 생성하기
2012년 2월 20일, 오전 3시 12분을 나타내는 `Date` <sub>(객체)</sub>를 만들어보세요(시간대는 로컬).

그리고 `alert` 함수를 이용해 생성한 객체를 출력하세요.

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

`new Date` 생성자는 로컬 시간대를 사용하기 때문에 특별히 지정해주지 않아도 됩니다. 주의할 점은 월이 `0`부터 시작한다는 것입니다.

따라서 2월은 숫자 `1`을 사용해 만듭니다.

Here's an example with numbers as date components:
```javascript
//new Date(year, month, date, hour, minute, second, millisecond)
let d1 = new Date(2012, 1, 20, 3, 12);
alert( d1 );
```

We could also create a date from a string, like this:
```javascript
//new Date(datastring)
let d2 = new Date("February 20, 2012 03:12:00");
alert( d2 );
```

<hr />

### 요일 보여주기
날짜를 입력하면 `'MO'`, `'TU'`, `'WE'`, `'TH'`, `'FR'`, `'SA'`, `'SU'` 형식으로 요일을 보여주는 함수 `getWeekDay(date)`를 만들어보세요.

예시:
```javascript
let date = new Date(2012, 0, 3);  // 2012년 1월 3일
alert( getWeekDay(date) );        // "TU"가 출력되어야 합니다.
```

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

`date.getDay()` 메서드는 요일을 나타내는 숫자를 반환합니다(일요일부터 시작).

요일이 담긴 배열을 만들고, `date.getDay()`를 호출해 반환받은 값을 인덱스로 사용하면 원하는 기능을 구현할 수 있습니다.
```javascript
function getWeekDay(date) {
  let days = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];

  return days[date.getDay()];
}

let date = new Date(2014, 0, 3); // 2014년 1월 3일
alert( getWeekDay(date) ); // FR
```

[정답](https://plnkr.co/edit/pUQkdQrx5kJvOsM7?p=preview)

<hr />

### 유럽 기준 달력
유럽국가의 달력은 월요일부터 시작합니다(월요일-1, 화요일-2, … 일요일-7). '유럽' 기준 숫자를 반환해주는 함수 `getLocalDay(date)`를 만들어보세요.
```javascript
let date = new Date(2019, 11, 5);  // 2019년 11월 5일
alert( getLocalDay(date) );        // 금요일이므로, 5가 출력되어야 함
```

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

```javascript
function getLocalDay(date) {

  let day = date.getDay();

  if (day == 0) { // 일요일(숫자 0)은 유럽에선 7입니다.
    day = 7;
  }

  return day;
}
```

[정답](https://plnkr.co/edit/Qco3seOgg7schHb1?p=preview)

<hr />

### `n`일 전 '일' 출력하기
`date`를 기준으로 `days`일 전 '일'을 반환하는 함수 `getDateAgo(date, days)`를 만들어보세요,

오늘이 20일이라면 `getDateAgo(new Date(), 1)`는 `19`를, `getDateAgo(new Date(), 2)`는 `18`을 반환해야 합니다.

`days`가 `365`일 때도 제대로 동작해야 합니다.
```javascript
let date = new Date(2015, 0, 2); // 2015년 1월 2일

alert( getDateAgo(date, 1) ); // 1, (2015년 1월 1일)
alert( getDateAgo(date, 2) ); // 31, (2014년 12월 31일)
alert( getDateAgo(date, 365) ); // 2, (2014년 1월 2일)
```

주의: 함수는 `date`를 변경하지 않아야 합니다.

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

구현 아이디어는 간단합니다. `date`에서 주어진 숫자를 빼면 됩니다.
```javascript
function getDateAgo(date, days) {
  date.setDate(date.getDate() - days);
  return date.getDate();
}
```

그런데 주의사항에서 `date`를 변경하지 말라고 했기 때문에 위와 같이 작성하면 오답이 됩니다. 외부 코드에서 `date`를 사용하고 있는 경우, `date`를 수정하게 되면 원치 않는 일이 발생할 수 있습니다.

아래와 같이 `date`를 복사하면 `date`를 변경시키지 않고 원하는 기능을 구현할 수 있습니다.
```javascript
function getDateAgo(date, days) {
  let dateCopy = new Date(date);

  dateCopy.setDate(date.getDate() - days);
  return dateCopy.getDate();
}

let date = new Date(2015, 0, 2); // 2015년 1월 2일

alert( getDateAgo(date, 1) ); // 1, (2015년 1월 1일)
alert( getDateAgo(date, 2) ); // 31, (2014년 12월 31일)
alert( getDateAgo(date, 365) ); // 2, (2014년 1월 2일)
```

[정답](https://plnkr.co/edit/0wfAge0X0nfO7606?p=preview)

<hr />

### 달의 마지막 일
특정 달의 마지막 일을 반환하는 함수 `getLastDayOfMonth(year, month)`를 작성해보세요. 반환 값은 `30`이나 `31`, `29`(2월), `28`(2월)이 될 겁니다.

매개변수:

`year` – 숫자 4개로 구성된 연(예: `2012`)
`month` – 월(`0`부터 `11`)
윤년인 2012년의 2월은 `29`가 반환되어야 합니다. `getLastDayOfMonth(2012, 1) = 29`

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

다음 달을 나타내는 객체를 만들고 `day`에는 `0`을 넘겨주면 됩니다.
```javascript
function getLastDayOfMonth(year, month) {
  let date = new Date(year, month + 1, 0);
  return date.getDate();
}

alert( getLastDayOfMonth(2012, 0) ); // 31
alert( getLastDayOfMonth(2012, 1) ); // 29
alert( getLastDayOfMonth(2013, 1) ); // 28
```

`new Date`의 세 번째 매개변수의 기본값은 `1`입니다. 그런데 어떤 숫자를 넘겨줘도 자바스크립트는 이를 자동 조정해줍니다. `0`을 넘기면 '첫 번째 일의 1일 전'을 의미하게 됩니다. 이는 '이전 달의 마지막 일'과 동일합니다.

[정답](https://plnkr.co/edit/NECaeDhzPyj2dEsN?p=preview)

<hr />

### 몇 초나 지났을까요?
오늘 하루가 시작된 이후 몇 초나 지났는지 반환하는 함수 `getSecondsToday()`를 만들어보세요.

현재 시각이 `10:00 am`이고, 서머타임이 적용되지 않은 경우라면 아래와 같은 결과가 나와야 합니다.
```javascript
getSecondsToday() == 36000 // (3600 * 10)
```

주의: 어떤 날이든 함수를 호출했을 때, 원하는 결과가 반환되어야 합니다. '오늘'을 나타내는 값을 하드 코딩하지 마세요.

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

경과 초를 알려면 오늘 00시 00분 00초를 나타내는 `Date` 객체를 만들고, '지금'을 나타내는 객체에서 이 객체를 빼야 합니다.

차이는 밀리초 기준이기 때문에 `1000`을 나눠 초로 변경해야 합니다.
```javascript
function getSecondsToday() {
  let now = new Date();

  // 현재 년, 월, 일을 나타내는 객체를 생성
  let today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

  let diff = now - today; // 차이(ms)
  return Math.round(diff / 1000); // 초로 변환
}

alert( getSecondsToday() );
```

경과 시간, 분, 초를 초로 변환하는 것도 방법이 될 수 있습니다.
```javascript
function getSecondsToday() {
  let d = new Date();
  return d.getHours() * 3600 + d.getMinutes() * 60 + d.getSeconds();
}

alert( getSecondsToday() );
```

<hr />

### 몇 초나 남았을까요?
오늘 하루가 끝날 때까지 남은 초를 반환해주는 함수 `getSecondsToTomorrow()를` 만들어보세요.

현재 시각이 `23:00`이라면 아래와 같은 결과가 나와야 합니다.
```javascript
getSecondsToTomorrow() == 3600
```

주의: 어떤 날이든 함수를 호출했을 때, 원하는 결과가 반환되어야 합니다. '오늘'을 나타내는 값을 하드 코딩하지 마세요.

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

오늘 하루가 끝날 때까지 남은 밀리초를 구하려면 '내일 00시 00분 00초'에서 현재 날짜를 빼면 됩니다.

내일을 나타내는 객체를 먼저 만들고, 이후 작업을 하면 됩니다.
```javascript
function getSecondsToTomorrow() {
  let now = new Date();

  // 내일 날짜
  let tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate()+1);

  let diff = tomorrow - now; // 차이(ms)
  return Math.round(diff / 1000); // 초로 변환
}
```

또 다른 방법:
```javascript
function getSecondsToTomorrow() {
  let now = new Date();
  let hour = now.getHours();
  let minutes = now.getMinutes();
  let seconds = now.getSeconds();
  let totalSecondsToday = (hour * 60 + minutes) * 60 + seconds;
  let totalSecondsInADay = 86400;

  return totalSecondsInADay - totalSecondsToday;
}
```

일광 절약 시간제(Daylight Savings Time, DST)를 실시하는 나라에선 하루가 23시간 혹은 25시간으로 구성될 수 있습니다. 이런 경우는 따로 다뤄야 합니다.

<hr />

### 상대 날짜 출력하기
`date`를 아래와 같은 형식으로 변경해주는 함수 `formatDate(date)`를 만들어보세요.
- `date`가 지금으로부터 1초 미만 전의 날짜를 나타내면 `"현재"`를 반환해야 합니다.
- 그렇지 않고, `date`가 지금으로부터 1분 이하 전의 날짜를 나타내면 `"n초 전"`을 반환해야 합니다.
- 그렇지 않고, `date`가 지금으로부터 1시간 미만 전의 날짜를 나타내면 `"n분 전"`을 반환해야 합니다.
- 이 외의 경우는 전체 날짜를 `"DD.MM.YY HH:mm"`형식(`"일.월.연 시:분"`)으로 반환해야 합니다(예시: `31.12.16 10:00`).

예시:
```javascript
alert( formatDate(new Date(new Date - 1)) ); // "현재"

alert( formatDate(new Date(new Date - 30 * 1000)) ); // "30초 전"

alert( formatDate(new Date(new Date - 5 * 60 * 1000)) ); // "5분 전"

// 어제를 나타내는 날짜를 "일.월.연 시:분" 포맷으로 출력
alert( formatDate(new Date(new Date - 86400 * 1000)) );
```

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

현재와 `date`의 차이를 알려면 빼야 합니다.
```javascript
function formatDate(date) {
  let diff = new Date() - date; // 차이(ms)

  if (diff < 1000) { // 차이가 1초 미만이라면
    return '현재';
  }

  let sec = Math.floor(diff / 1000); // 차이를 초로 변환

  if (sec < 60) {
    return sec + '초 전';
  }

  let min = Math.floor(diff / 60000); // 차이를 분으로 변환
  if (min < 60) {
    return min + '분 전';
  }

  // 날짜의 포맷을 변경
  // 일, 월, 시, 분이 숫자 하나로 구성되어있는 경우, 앞에 0을 추가해줌
  let d = date;
  d = [
    '0' + d.getDate(),
    '0' + (d.getMonth() + 1),
    '' + d.getFullYear(),
    '0' + d.getHours(),
    '0' + d.getMinutes()
  ].map(component => component.slice(-2)); // 모든 컴포넌트의 마지막 숫자 2개를 가져옴

  // 컴포넌트를 조합
  return d.slice(0, 3).join('.') + ' ' + d.slice(3).join(':');
}

alert( formatDate(new Date(new Date - 1)) ); // "현재"

alert( formatDate(new Date(new Date - 30 * 1000)) ); // "30초 전"

alert( formatDate(new Date(new Date - 5 * 60 * 1000)) ); // "5분 전"

// 어제의 날짜를 31.12.2016 20:00 형태로 출력
alert( formatDate(new Date(new Date - 86400 * 1000)) );
```

다른 방법:
```javascript
function formatDate(date) {
  let dayOfMonth = date.getDate();
  let month = date.getMonth() + 1;
  let year = date.getFullYear();
  let hour = date.getHours();
  let minutes = date.getMinutes();
  let diffMs = new Date() - date;
  let diffSec = Math.round(diffMs / 1000);
  let diffMin = diffSec / 60;
  let diffHour = diffMin / 60;

  // formatting
  year = year.toString().slice(-2);
  month = month < 10 ? '0' + month : month;
  dayOfMonth = dayOfMonth < 10 ? '0' + dayOfMonth : dayOfMonth;
  hour = hour < 10 ? '0' + hour : hour;
  minutes = minutes < 10 ? '0' + minutes : minutes;

  if (diffSec < 1) {
    return 'right now';
  } else if (diffMin < 1) {
    return `${diffSec} sec. ago`
  } else if (diffHour < 1) {
    return `${diffMin} min. ago`
  } else {
    return `${dayOfMonth}.${month}.${year} ${hour}:${minutes}`
  }
}
```

[정답](https://plnkr.co/edit/6OnGmSRYTc1rcU6d?p=preview)
