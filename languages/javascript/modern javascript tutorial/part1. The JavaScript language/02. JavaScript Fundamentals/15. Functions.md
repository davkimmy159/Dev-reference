함수
====

### 함수 선언
- 함수 선언문
  - `function` <sub>(키워드)</sub>
  - 함수명
  - 매개변수 <sub>(N개)</sub>
```javascript
function name(param1, param2, … paramN) {

  // 함수 본문

}
```
- 용도
  - 중복 코드 피하기
```javascript
function showMessage() {
  alert( '안녕하세요!' );
}
showMessage();
showMessage();
```

### 지역 변수
- 함수 내 선언 변수
- 함수 안에서만 접근
```javascript
function showMessage() {
  let message = "안녕하세요!"; // 지역 변수
  alert( message );
}
showMessage();    // 안녕하세요!
alert( message ); // ReferenceError: message is not defined
```

### 외부 변수
- 함수 외부 변수 접근
```javascript
let userName = 'John'; // 외부 변수
function showMessage() {
  let message = 'Hello, ' + userName;
  alert(message);
}
showMessage(); // Hello, John
```
- 함수 외부 변수 수정
```javascript
let userName = 'John';
function showMessage() {
  userName = "Bob"; // 외부 변수 수정
  let message = 'Hello, ' + userName;
  alert(message);
}
alert( userName );  // John, 함수 호출 전
showMessage();
alert( userName );  // Bob , 함수 호출 후
```
- 지역 변수 없을 때만 외부 변수 사용
- 외부 변수 동명 내부 변수 선언 시
  - 외부 변수 : 동명 내부 변수에 가려짐
```javascript
let userName = 'John';  // 외부 변수
function showMessage() {
  let userName = "Bob"; // 동명 내부 변수
  let message = 'Hello, ' + userName; // Bob
  alert(message);
}
showMessage();     // Hello, Bob, 내부 변수 userName 사용
alert( userName ); // John      , 외부 변수 접근 X
```

<br />

<img class="icon" src="../../images/commons/icons/circle-exclamation-solid.svg" /> **전역 변수**

- 함수 외부 선언 변수
- 모든 함수에서 접근 가능
- 동명 지역 변수에 가려지면 접근 X
- 가급적 사용 X
- 프로젝트 전반에 사용되는 데이터 변수

<br />

### 매개변수 <sub>(인자)</sub>
- 임의의 데이터
  - 함수 내부 전달
```javascript
function showMessage(who, text) {  // 인자: who, text
  alert(who + ': ' + text);
}
showMessage('Ann', 'Hello!');      // Ann: Hello!
showMessage('Ann', "What's up?");  // Ann: What's up?
```
- 복사된 값 사용
```javascript
function showMessage(who, text) {
  who = '*' + who + '*';
  alert( who + ': ' + text );
}
let who = "Ann";
showMessage(who, "Hello"); // *Ann*: Hello
alert( who );              //  Ann (복사된 값 사용 · 외부 변수 변화)
```

#### 매개변수 <sub>(인자)</sub> vs 인수
- 매개변수
  - 함수 선언문 괄호 변수 <sub>(선언)</sub>
- 인수
  - 함수 호출 시 매개변수 전달 값 <sub>(호출)</sub>

### 기본값
- 함수 호출 시 매개변수 인수 전달 X
  - `undefined`
```javascript
function showMessage(who, text) {
  alert(who + ': ' + text);
}
showMessage("Ann"); // "Ann: undefined"
```
- 기본값 설정
```javascript
function showMessage(who, text = "no text given") {
  alert( who + ": " + text );
}
showMessage("Ann");            // Ann: no text given
showMessage("Ann", undefined); // Ann: no text given, 명시적 undefined 값 전달
```
- 복잡한 표현식 기본값
```javascript
function showMessage(from, text = anotherFunction()) {
  /*
   text 값 부재 시
   - anotherFunction (함수) 호출
   - 함수 반환 값 할당
   */
}
```

<br />

<img class="icon" src="../../images/commons/icons/circle-exclamation-solid.svg" /> **매개변수 기본값 평가 시점**

- 함수 호출할 때마다 평가
  - 해당 매개변수 없을 때만

<br />

#### 매개변수 기본값 설정 다른 방법
- 함수 선언 후 매개변수 기본값 설정

##### 구식 JS 방식
- 과거 매개변수 기본값 관련 구문 X
```javascript
function showMessage(who, text) {

  // if (문)
  if (text === undefined) {
    text = 'no text given';
  }

  /*
   || (논리 연산자)
   - text 값 : falsy
     - 기본값 할당
   - "" (빈 문자열) : falsy
     - 기본값 할당
   */
  text = text || 'no text given';

  alert( who + ": " + text );
}
```

##### 모던 JS 방식
```javascript
function showCount(count) {

  // count (변수) : undefined · null
  // - "unknown" 할당
  alert(count ?? "unknown");
}
showCount(0);    // 0
showCount(null); // unknown
showCount();     // unknown
```

### 반환 값
- 함수 호출한 곳에 특정 값 반환
```javascript
function sum(a, b) {
  return a + b;
}
let result = sum(1, 2);
alert( result ); // 3
```

##### `return` <sub>(지시자)</sub>
- 실행 흐름 도달 시
  - 함수 실행 즉시 중단
  - 함수 호출한 곳에 값 반환
- 함수 내
  - 어디서든 사용 가능
  - 여러 개 사용 가능
```javascript
function checkAge(age) {
  if (age >= 18) {
    return true;
  } else {
    return confirm('보호자의 동의를 받으셨나요?');
  }
}
let age = prompt('나이를 알려주세요', 18);
if ( checkAge(age) ) {
  alert( '접속 허용' );
} else {
  alert( '접속 차단' );
}
```
- `return` 만 명시 <sub>(값 X)</sub>
   - 함수 즉시 종료
```javascript
function showMovie(age) {
  if ( !checkAge(age) ) {
    return;
  }

  // checkAge(age) : false 반환 시
  // - 실행 X
  alert( "영화 상영" );
}
```

<br />

<img class="icon" src="../../images/commons/icons/circle-exclamation-solid.svg" /> **`return` 부재 · 만 있는 함수**

- `undefined` 반환
```javascript
// return 부재
function doNothing1() {
  /* empty */
}
alert( doNothing1() === undefined ); // true

// return 만 있음
function doNothing2() {
  return; // == return undefined
}
alert( doNothing2() === undefined ); // true
```

<br />

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`return` · 값 사이 새 줄 삽입 X**

```javascript
// 세미콜론 자동 삽입
return
 (some + long + expression + or + whatever * f(a) + f(b))

↓↓↓

// return undefined
return;
 (some + long + expression + or + whatever * f(a) + f(b))
```
- 괄호 사용
```javascript
return (
  some + long + expression
  + or +
  whatever * f(a) + f(b)
)
```

<br />

### 함수명 짓기
- 대개 동사
  - 어떤 동작 수행
- 간결 · 명확
  - 함수명만 보고도 함수 기능 힌트
- 관습
  - 축약설명해주는 동사 접두어
  - 팀 내 합의

|접두어|의미|
|:---:|---|
|`get`|값 반환|
|`calc`|무언가 계산|
|`create`|무언가 생성|
|`check`|무언가 확인 후 불린값 반환|

- 예시

|함수명|기능|
|---|---|
|`showMessage( … )`|메시지 출력|
|`getAge( … )`|나이 값 얻고 반환|
|`calcSum( … )`|합계 계산 후 결과 반환|
|`createForm( … )`|form 생성 후 작성된 form 반환|
|`checkPermission( … )`|승인 여부 확인 후 불린값 반환|

<br />

<img class="icon" src="../../images/commons/icons/circle-exclamation-solid.svg" /> **1개 함수 : 1개 동작**

- 함수명 언급 동작만 정확히 수행
  - 이외 동작 수행 X
- 독립적인 2개 동작
  - 독립된 함수 2개로 나눠 수행
- 빈번한 실수

|함수명|동작||
|---|---|:---:|
|`getAge`|나이 값 얻기|O|
||나이 출력|X|
|`createForm`|form 생성 후 반환|O|
||form 문서 추가|X|
|`checkPermission`|승인 여부 확인 후 결과 반환|O|
||승인 여부 표시 메시지 띄움|X|

- 접두어 붙여 만든 모든 함수
  - 팀 내 규칙 준수

<br />

<img class="icon" src="../../images/commons/icons/circle-exclamation-solid.svg" /> **아주 짧은 이름**
- 특별한 함수명

|함수명|라이브러리|
|:---:|---|
|`$`|jQuery|
|`_`|Lodash|

<br />

### 함수 ≒ 주석
- 최대한 간결
  - 테스트 · 디버깅 용이
- 함수 그 자체로 주석 역할
  - 자기 설명적 코드
- 한 가지 기능만 수행
  - 길어지면 함수 분리

```javascript
function showPrimes1(n) {
  nextPrime: for (let i = 2; i < n; i++) {
    for (let j = 2; j < i; j++) {
      if (i % j == 0) continue nextPrime;
    }
    alert( i ); // 소수
  }
}

// 함수 분리
function showPrimes2(n) {
  for (let i = 2; i < n; i++) {
    if (!isPrime(i)) continue;
    alert( i ); // 소수
  }
}
function isPrime(n) {
  for (let i = 2; i < n; i++) {
    if ( n % i == 0) return false;
  }
  return true;
}
```

<br />

## 요약
함수 선언 방식으로 함수를 만들 수 있습니다.
```javascript
function 함수이름(복수의, 매개변수는, 콤마로, 구분합니다) {
  /* 함수 본문 */
}
```

- 함수에 전달된 매개변수는 복사된 후 함수의 지역변수가 됩니다.
- 함수는 외부 변수에 접근할 수 있습니다. 하지만 함수 바깥에서 함수 내부의 지역변수에 접근하는 건 불가능합니다.
- 함수는 값을 반환할 수 있습니다. 값을 반환하지 않는 경우는 반환 값이 `undefined`가 됩니다.

깔끔하고 이해하기 쉬운 코드를 작성하려면 함수 내부에서 외부 변수를 사용하는 방법 대신 지역 변수와 매개변수를 활용하는 게 좋습니다.

개발자는 매개변수를 받아서 그 변수를 가지고 반환 값을 만들어 내는 함수를 더 쉽게 이해할 수 있습니다. 매개변수 없이 함수 내부에서 외부 변수를 수정해 반환 값을 만들어 내는 함수는 쉽게 이해하기 힘듭니다.

함수 이름을 지을 땐 아래와 같은 규칙을 따르는 것이 좋습니다.

- 함수 이름은 함수가 어떤 동작을 하는지 설명할 수 있어야 합니다. 이렇게 이름을 지으면 함수 호출 코드만 보아도 해당 함수가 무엇을 하고 어떤 값을 반환할지 바로 알 수 있습니다.
- 함수는 동작을 수행하기 때문에 이름이 주로 동사입니다.
- `create…`, `show…`, `get…`, `check…` 등의 잘 알려진 접두어를 사용해 이름을 지을 수 있습니다. 접두어를 사용하면 함수 이름만 보고도 해당 함수가 어떤 동작을 하는지 파악할 수 있습니다.

함수는 스크립트를 구성하는 주요 구성 요소입니다. 지금까지 다룬 내용은 함수의 기본입니다. 여기선 함수를 만드는 방법, 사용하는 방법을 소개했는데 이 내용은 시작일 뿐입니다. 이어지는 챕터에선 지금까지 배운 것을 바탕으로 함수가 제공하는 고급 기능에 대해 학습해 보도록 하겠습니다.

<br />

## <img class="icon" src="../../images/commons/icons/circle-check-solid.svg" /> 과제

### `"else"`는 정말 필요한가요?
아래 함수는 매개변수 `age`가 `18`보다 큰 경우 `true`를 반환합니다.

그 이외의 경우는 컨펌 대화상자를 통해 사용자에게 질문한 후, 해당 결과를 반환합니다.
```javascript
function checkAge(age) {
  if (age > 18) {
    return true;
  } else {
    // ...
    return confirm('보호자의 동의를 받으셨나요?');
  }
}
```

위 코드에서 `else`문을 삭제해도 기존 코드와 동일하게 작동할까요?
```javascript
function checkAge(age) {
  if (age > 18) {
    return true;
  }
  // ...
  return confirm('보호자의 동의를 받으셨나요?');
}

```
아니면 뭔가 변화가 있을까요?

<br />

<img class="icon" src="../../images/commons/icons/circle-answer.svg" />

동일하게 동작합니다.

<hr />

### `'?'`나 `'||'`를 사용하여 함수 다시 작성하기
아래 함수는 매개변수 `age`가 `18`보다 큰 경우 `true`를 반환합니다.

그 이외의 경우는 컨펌 대화상자를 통해 사용자에게 질문한 후, 해당 결과를 반환합니다.
```javascript
function checkAge(age) {
  if (age > 18) {
    return true;
  } else {
    return confirm('보호자의 동의를 받으셨나요?');
  }
}
```

`if`문을 사용하지 않고 동일한 동작을 하는 함수를 한 줄에 작성해보세요.

아래 조건을 충족하는 해답 2개를 작성해야 합니다.

물음표 연산자 `?`를 사용하여 본문을 작성
`OR` 연산자 `||`를 사용하여 본문을 작성

<br />

<img class="icon" src="../../images/commons/icons/circle-answer.svg" />

물음표 연산자 `'?'`를 사용한 해답:
```javascript
function checkAge(age) {
  return (age > 18) ? true : confirm('보호자의 동의를 받으셨나요?');
}
```

OR 연산자 `||`를 사용한 해답(물음표 연산자를 사용한 해답보다 짧음):
```javascript
function checkAge(age) {
  return (age > 18) || confirm('보호자의 동의를 받으셨나요?');
}
```

`age > 18`을 감싸고 있는 괄호는 가독성을 높이기 위해 넣었습니다. 괄호가 없어도 동일하게 동작합니다.

<hr />

### `min(a, b)` 함수 만들기
`a`와 `b` 중 작은 값을 반환해주는 함수, `min(a,b)`을 만들어보세요.

만든 함수는 아래와 같이 동작해야 합니다.
```javascript
min(2, 5) == 2
min(3, -1) == -1
min(1, 1) == 1
```

<br />

<img class="icon" src="../../images/commons/icons/circle-answer.svg" />

if문을 사용한 해답:
```javascript
function min(a, b) {
  if (a < b) {
    return a;
  } else {
    return b;
  }
}
```

물음표 연산자 `'?'`를 사용한 해답:
```javascript
function min(a, b) {
  return a < b ? a : b;
}
```

참고. `a == b`인 경우엔 `a`나 `b` 중 어떤 것을 반환해도 상관없습니다.

<hr />

### `pow(x,n)` 함수 만들기
`x`의 `n`제곱을 반환해주는 함수, `pow(x,n)`를 만들어보세요. `x`의 `n` 제곱은 `x`를 `n`번 곱해서 만들 수 있습니다.
```javascript
pow(3, 2) = 3 * 3 = 9
pow(3, 3) = 3 * 3 * 3 = 27
pow(1, 100) = 1 * 1 * ...* 1 = 1
```

프롬프트 대화상자를 띄워 사용자로부터 `x`와 `n`을 입력받고 `pow(x,n)`의 반환 값을 보여주는 코드를 작성해 보세요.

주의사항: `n`은 `1` 이상의 자연수이어야 합니다. 이외의 경우엔 자연수를 입력하라는 얼럿 창을 띄워주어야 합니다.

<br />

<img class="icon" src="../../images/commons/icons/circle-answer.svg" />

```javascript
function pow(x, n) {
  let result = x;

  for (let i = 1; i < n; i++) {
    result *= x;
  }

  return result;
}

let x = prompt("x?", '');
let n = prompt("n?", '');

if (n < 1) {
  alert(`${n}은 양의 정수이어야 합니다.`);
} else {
  alert( pow(x, n) );
}
```

<hr />
