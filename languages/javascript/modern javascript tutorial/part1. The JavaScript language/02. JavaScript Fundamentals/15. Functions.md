함수
====

##### 프로그램 주요 구성 요소
- 유사 동작 코드 중복 방지

### 함수 선언

##### 함수 선언문 구성
- `function` <sub>(키워드)</sub>
- 함수명
- 매개변수
  - 본문 전달 데이터 저장 변수
  - `(…)` <sub>(괄호)</sub> 내 위치
  - `,` <sub>(콤마)</sub> 구분
  - 개수 제한 X
- 본문
  - 호출 시 실행 코드
  - `{…}` <sub>(중괄호)</sub> 내 위치
```javascript
function name(param1, param2, … paramN) {
  …본문…
}
```

##### 함수 호출
- 함수명 + `(…)` <sub>(괄호 · 매개변수 전달 위치)</sub>
  - `함수명(…매개변수…)`

##### `showMessage` <sub>(함수)</sub>
```javascript
// 함수 선언
function showMessage() {
  alert( '안녕하세요!' );
}

// 함수 호출 (본문 실행)
showMessage();
showMessage();
```

##### 주요 용도
- 중복 코드 방지

### 지역 변수

##### 함수 내 선언 변수
- 함수 내에서만 접근 가능
```javascript
function showMessage() {

  // 지역 변수
  let message = "안녕하세요!";

  alert( message );
}

showMessage(); // 안녕하세요!

// ReferenceError: message is not defined
alert( message );
```

### 외부 변수

##### 외부 변수 접근 가능
```javascript
// 외부 변수
let userName = 'John';

function showMessage() {
  let message = 'Hello, ' + userName;
  alert(message);
}
showMessage(); // Hello, John
```

##### 외부 변수 수정
```javascript
let userName = 'John';
function showMessage() {

  // 외부 변수 수정
  userName = "Bob";

  let message = 'Hello, ' + userName;
  alert(message);
}
alert( userName ); // John (함수 호출 전)
showMessage();
alert( userName ); // Bob  (함수 호출 후)
```

##### 지역 변수 없을 때만 외부 변수 사용
- 외부 변수 동명 내부 변수 선언 시
  - 외부 변수 : 동명 내부 변수에 가려짐
```javascript
// 외부 변수
let userName = 'John';

function showMessage() {

  // 동명 내부 변수
  let userName = "Bob";

  // Bob
  let message = 'Hello, ' + userName;
  alert(message);
}

// Hello, Bob (내부 변수)
showMessage();

// John (외부 변수)
// - 내부 변수 접근 불가능
alert( userName );
```

<br />

<img src="../../images/commons/icons/circle-exclamation-solid.svg" /> **전역 변수**

- 함수 외부 선언 변수
- 모든 함수에서 접근 가능
- 동명 지역 변수에 가려짐 접근 불가능
- 가급적 사용 지양
- 프로젝트 전반에 사용되는 데이터 변수

<br />

### 매개변수 <sub>(인자)</sub>

##### 임의 데이터
- 함수 내부 전달
```javascript
// 인자
// - who
// - text
function showMessage(who, text) {
  alert(who + ': ' + text);
}

// Ann: Hello!
showMessage('Ann', 'Hello!');

// Ann: What's up?
showMessage('Ann', "What's up?");
```

##### 복사된 값 사용
```javascript
function showMessage(who, text) {
  who = '*' + who + '*';
  alert( who + ': ' + text );
}
let who = "Ann";

// *Ann*: Hello
showMessage(who, "Hello");

// 복사된 값 사용 · 외부 변수 변화
// - Ann
alert( who );
```

#### 매개변수 <sub>(인자)</sub> vs 인수

##### 매개변수 <sub>(인자)</sub>
- 함수 선언문 내 `(…)` <sub>(괄호)</sub> 변수 <sub>(선언)</sub>

##### 인수
- 함수 호출 시 매개변수 전달 값 <sub>(호출)</sub>

### 기본값

##### 함수 호출 시 인수 미전달
- `undefined` 값 할당
```javascript
function showMessage(who, text) {
  alert(who + ': ' + text);
}

// "Ann: undefined"
showMessage("Ann");
```

##### 기본값 설정
```javascript
function showMessage(who, text = "no text given") {
  alert( who + ": " + text );
}

// Ann: no text given
showMessage("Ann");

// 명시적 undefined 값 전달
// - Ann: no text given
showMessage("Ann", undefined);
```

##### 복잡한 표현식 기본값
```javascript
function showMessage(from, text = anotherFunction()) {
  /*
   text 값 부재 시
   - anotherFunction (함수) 호출
   - 함수 반환 값 할당
   */
}
```

<br />

<img src="../../images/commons/icons/circle-exclamation-solid.svg" /> **매개변수 기본값 평가 시점**

##### 함수 호출할 때마다 평가
- 해당 매개변수 없을 때만

<br />

#### 매개변수 기본값 설정 다른 방법
- 함수 선언 후 매개변수 기본값 설정

##### 구식 JS 방식
- 과거 매개변수 기본값 관련 구문 無
```javascript
function showMessage(who, text) {

  // if (문)
  if (text === undefined) {
    text = 'no text given';
  }

  /*
   || (논리 연산자)
   - text 값 : falsy
     - 기본값 할당
   - "" (빈 문자열) : falsy
     - 기본값 할당
   */
  text = text || 'no text given';

  alert( who + ": " + text );
}
```

##### 모던 JS 방식
```javascript
function showCount(count) {

  // count (변수) : undefined · null
  // - "unknown" 할당
  alert(count ?? "unknown");
}
showCount(0);    // 0
showCount(null); // unknown
showCount();     // unknown
```

### 반환 값

##### 함수 호출한 곳에 특정 값 반환
```javascript
function sum(a, b) {
  return a + b;
}
let result = sum(1, 2);
alert( result ); // 3
```

##### `return` <sub>(지시자)</sub>
- 실행 흐름 도달 시
  - 함수 실행 즉시 중단
  - 함수 호출한 곳에 값 반환
- 함수 내
  - 어디서든 사용 가능
  - 1개 이상 사용 가능
```javascript
function checkAge(age) {
  if (age >= 18) {
    return true;
  } else {
    return confirm('보호자의 동의를 받으셨나요?');
  }
}
let age = prompt('나이를 알려주세요', 18);
if ( checkAge(age) ) {
  alert( '접속 허용' );
} else {
  alert( '접속 차단' );
}
```

##### `return` <sub>(지시자)</sub> 만 명시 <sub>(반환 값 無)</sub>
- 함수 즉시 종료
```javascript
function showMovie(age) {
  if ( !checkAge(age) ) {
    return;
  }

  // false 반환 시
  // - checkAge(age) 미실행
  alert( "영화 상영" );
}
```

<br />

<img src="../../images/commons/icons/circle-exclamation-solid.svg" /> **`return` 부재 · 만 있는 함수**

##### `undefined` 반환
```javascript
// return 부재
function doNothing1() {
  /* 빈 함수 본문 */
}

// true
alert( doNothing1() === undefined );

// return 만 있음
function doNothing2() {
  return; // == return undefined
}

// true
alert( doNothing2() === undefined );
```

<br />

<img src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`return` ~ 값 사이 새 줄 삽입 X**

```javascript
// `;` (세미콜론) 자동 삽입
return
 (some + long + expression + or + whatever * f(a) + f(b))

↓↓↓

// return undefined
return;
 (some + long + expression + or + whatever * f(a) + f(b))
```

##### `(…)` <sub>(괄호)</sub> 사용
```javascript
return (
  some + long + expression
  + or +
  whatever * f(a) + f(b)
)
```

<br />

### 함수명 짓기

##### 보통 동사
- 어떤 동작 수행

##### 간결 · 명확
- 함수명만 보고도 함수 기능 힌트

##### 관습
- 축약설명해주는 동사 접두어
- 팀 내 합의

|접두어|의미|
|:---:|---|
|`get`|값 반환|
|`calc`|무언가 계산|
|`create`|무언가 생성|
|`check`|무언가 확인 후 `boolean` 값 반환|

##### 예시

|함수명|기능|
|---|---|
|`showMessage(…)`|메시지 출력|
|`getAge(…)`|나이 값 얻고 반환|
|`calcSum(…)`|합계 계산 후 결과 반환|
|`createForm(…)`|form 생성 후 작성된 form 반환|
|`checkPermission(…)`|승인 여부 확인 후 `boolean` 값 반환|

<br />

<img src="../../images/commons/icons/circle-exclamation-solid.svg" /> **1개 함수 : 1개 동작**

##### 함수명 언급 동작만 정확히 수행
- 이 외 동작 X

##### 독립적인 2개 동작
- 독립된 함수 2개로 나눠 수행

##### 빈번한 실수

|함수명|동작||
|---|---|:---:|
|`getAge`|나이 값 얻기|O|
||나이 출력|X|
|`createForm`|form 생성 후 반환|O|
||form 문서 추가|X|
|`checkPermission`|승인 여부 확인 후 결과 반환|O|
||승인 여부 메시지 표시|X|

##### 접두어 붙여 만든 모든 함수
- 팀 내 규칙 준수

<br />

<img src="../../images/commons/icons/circle-exclamation-solid.svg" /> **아주 짧은 이름**
- 특별한 함수명

|함수명|라이브러리|
|:---:|---|
|`$`|jQuery|
|`_`|Lodash|

<br />

### 함수 ≒ 주석

##### 최대한 간결
- 테스트 · 디버깅 용이

##### 함수 그 자체로 주석 역할
- 자기 설명적 코드

##### 한 가지 기능만 수행
- 길어지면 함수 분리
```javascript
function showPrimes1(n) {
  nextPrime: for (let i = 2; i < n; i++) {
    for (let j = 2; j < i; j++) {
      if (i % j == 0) continue nextPrime;
    }
    alert( i ); // 소수
  }
}

// 함수 분리
function showPrimes2(n) {
  for (let i = 2; i < n; i++) {
    if (!isPrime(i)) continue;
    alert( i ); // 소수
  }
}
function isPrime(n) {
  for (let i = 2; i < n; i++) {
    if ( n % i == 0) return false;
  }
  return true;
}
```

<br />

요약
====

##### 함수 선언 방식
```javascript
function 함수명(다수의, 매개변수는, 콤마로, 구분) {
  /* 함수 본문 */
}
```
- 함수 전달 매개변수
  - 복사 후 → 함수 지역변수
- 함수 내부 → 외부 접근 가능
  - 함수 외부 → 내부 접근 불가능
- 값 반환 가능
  - 미반환 시 `undefined` 반환

##### 깔끔하고 이해 쉬운 코드
- 함수 내부 → 외부 변수 접근 지양
- 지역 · 매개변수 활용

##### 함수명 규칙
- 함수명
  - 함수 동작 설명
  - 호출 코드만으로 바로 이해
- 주로 동사
- 잘 알려진 접두어 사용
  - `create…`
  - `show…`
  - `get…`
  - `check…`
  - 기타 등등

<br />

## <img src="../../images/commons/icons/circle-check-solid.svg" /> 과제

### `else` 는 정말 필요한가요?

##### `else` <sub>(문)</sub> 삭제 후 동일 작동 여부
```javascript
function checkAge(age) {
  if (age > 18) {
    return true;
  } else { // ←
    return confirm('보호자의 동의를 받으셨나요?');
  }
}
```

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

- 동일 동작

<hr />

### `?` · `||` 사용해 함수 다시 작성하기

##### 동일 동작 함수 한 줄에 작성
- `if` <sub>(문)</sub> 미사용

##### 조건
1. `?` <sub>(물음표 연산자)</sub> 사용
2. `||` <sub>(OR 연산자)</sub> 사용
```javascript
function checkAge(age) {
  if (age > 18) {
    return true;
  } else {
    return confirm('보호자의 동의를 받으셨나요?');
  }
}
```

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

##### 1. `?` <sub>(물음표 연산자)</sub> 사용
```javascript
function checkAge(age) {
  return (age > 18) ? true : confirm('보호자의 동의를 받으셨나요?');
}
```

##### 2. `||` <sub>(OR 연산자)</sub> 사용
```javascript
function checkAge(age) {
  return (age > 18) || confirm('보호자의 동의를 받으셨나요?');
}
```

<hr />

### `min(a, b)` <sub>(함수)</sub> 만들기

##### `min(a, b)` <sub>(함수)</sub> 작성
- `a` · `b` 중 작은 값 반환
```javascript
min(2, 5) == 2
min(3, -1) == -1
min(1, 1) == 1
```

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

##### `if` <sub>(문)</sub> 사용
```javascript
function min(a, b) {
  if (a < b) {
    return a;
  } else {
    return b;
  }
}
```

##### `?` <sub>(물음표 연산자)</sub> 사용
```javascript
function min(a, b) {
  return a < b ? a : b;
}
```

<hr />

### `pow(x,n)` <sub>(함수)</sub> 만들기

##### `pow(x,n)` <sub>(함수)</sub> 작성
- `x` 의 `n` 제곱 반환
```javascript
pow(3, 2) = 3 * 3 = 9
pow(3, 3) = 3 * 3 * 3 = 27
pow(1, 100) = 1 * 1 * … * 1 = 1
```

##### 조건
- 사용자 입력 받기 <sub>(프롬프트 대화상자)</sub>
  - `x`
  - `n`
- 반환 값 출력

##### 주의
- `n`
  - `1` 이상의 자연수
- 이 외 경우
  - 자연수 입력 안내 얼럿창 표시

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

```javascript
function pow(x, n) {
  let result = x;

  for (let i = 1; i < n; i++) {
    result *= x;
  }

  return result;
}

let x = prompt("x?", '');
let n = prompt("n?", '');

if (n < 1) {
  alert(`${n}은 양의 정수이어야 합니다.`);
} else {
  alert( pow(x, n) );
}
```
