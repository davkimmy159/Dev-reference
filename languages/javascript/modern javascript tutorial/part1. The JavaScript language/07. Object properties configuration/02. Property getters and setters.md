접근자 프로퍼티 <sub>(\[g·s\]etter)</sub>
====

##### 객체 내 프로퍼티 종류 <sub>(2가지)</sub>
- a. 데이터 프로퍼티
- b. 접근자 프로퍼티
  - 본질 == 함수
    - 값 접근 <sub>(getter)</sub>
    - 값 설정 <sub>(setter)</sub>
  - 외부 코드 시점
    - 프로퍼티 <sub>(함수 X)</sub>

### \[g·s\]etter

##### 객체 내 메서드 표현
- `get propertyName()`
  - getter <sub>(값 접근)</sub>
- `set propertyName(…)`
  - setter <sub>(값 설정)</sub>
```javascript
let obj = {

  // getter (값 접근)
  // - 프로퍼티 접근 시 실행
  //   - obj.propertyName
  get propertyName() { … },

  // setter (값 설정)
  // - 프로퍼티 값 할당 시 실행
  //   - obj.propertyName = value
  set propertyName(value) { … }
};
```

##### `fullName` <sub>(접근자 프로퍼티)</sub>
- `get fullName() {…}`
- `set fullName(value) {…}`
```javascript
let user = {
  name: "John",
  surname: "Smith",

  // user.fullName
  get fullName() {
    return `${this.name} ${this.surname}`;
  },

  // user.fullName = value
  set fullName(value) {
    [this.name, this.surname] = value.split(" ");
  }
};

// 값 접근 시 getter (메서드) 호출 
alert(user.fullName); // John Smith

// 값 할당 시 setter (메서드) 호출
user.fullName = "Alice Cooper";

alert(user.name);    // Alice
alert(user.surname); // Cooper
```

##### 외부 코드 시점
- 일반 프로퍼티 형태
- 함수 호출 형태 X

##### \[g·s\]etter <sub>(메서드)</sub> 구현 시
- 객체 내 가상 프로퍼티 생성 <sub>(실제 존재 X)</sub>
  - 읽기 · 쓰기 가능

### 접근자 프로퍼티 설명자

##### `value` <sub>(값)</sub> · `writable` <sub>(플래그)</sub> 無
- `get()` <sub>(인수 부재 함수)</sub>
  - `value` <sub>(값)</sub> 대응
  - 프로퍼티 접근 시 호출
- `set(…)` <sub>(인수 1개 함수)</sub>
  - `writable` <sub>(플래그)</sub> 대응
  - 프로퍼티 값 설정 시 호출
- `enumerable` <sub>(플래그)</sub>
  - 데이터 프로퍼티 동일
- `configurable` <sub>(플래그)</sub>
  - 데이터 프로퍼티 동일

##### `Object.defineProperty` <sub>(메서드)</sub>
- `get()` · `set(…)` <sub>(함수)</sub> 전달 시
  - 접근자 프로퍼티 생성
```javascript
let user = {
  name: "John",
  surname: "Smith"
};

Object.defineProperty(user, 'fullName', {
//value: …,
  get() {      // 값 접근
    return `${this.name} ${this.surname}`;
  },

//writable: boolean,
  set(value) { // 값 설정
    [this.name, this.surname] = value.split(" ");
  }
});

// John Smith
alert(user.fullName);

// name, surname
for (let key in user) alert(key);
```

##### 프로퍼티 종류
- 둘 중 하나만 가능
  - 데이터 프로퍼티 <sub>(`value`)</sub>
  - 접근자 프로퍼티 <sub>(`get` · `set`)</sub>
- 둘 다 설정 시 에러
```javascript
// Error: Invalid property descriptor.
Object.defineProperty({}, 'prop', {

  // 데이터 프로퍼티
  value: 2,

  // 접근자 프로퍼티
  get() { return 1 }
});
```

### \[g·s\]etter 똑똑하게 활용하기

##### 프로퍼티 값 감싸는 래퍼처럼 사용 시
- 프로퍼티 값 원하는 대로 통제 가능
```javascript
let user = {
  get name() {
    return this._name;
  },

  set name(value) {
    if (value.length < 4) {
      alert("입력하신 값이 너무 짧습니다. 네 글자 이상으로 구성된 이름을 입력하세요.");
      return;
    }
    this._name = value;
  }
};

user.name = "Pete";
alert(user.name); // Pete

// 너무 짧은 이름 할당하려 함
user.name = "";
```

##### `user` <sub>(객체)</sub> 이름 정보
- `_name` <sub>(프로퍼티)</sub> 저장

##### 프로퍼티 접근
- \[g·s\]etter 사용

##### 외부 코드
- 직접 접근 가능 <sub>(기술적)</sub>
  - `user._name`

##### 관습
- `_property` <sub>(맨앞 밑줄 프로퍼티)</sub>
  - 객체 내부에서만 활용
  - 외부 간섭 X

### 호환성 위해 사용

##### \[g·s\]etter <sub>(접근자 프로퍼티)</sub> 사용 시
- 데이터 프로퍼티 행동 · 값
  - 원하는 대로 조정 가능
- 객체 구현
  - `name` · `age` <sub>(데이터 프로퍼티)</sub>
```javascript
function User(name, age) {
  this.name = name;
  this.age = age;
}

let john = new User("John", 25);

alert( john.age ); // 25
```

##### 요구사항 변화
- `age` → `birthday`
```javascript
function User(name, birthday) {
  this.name = name;
// this.age = age;
  this.birthday = birthday;
}

let john = new User("John", new Date(1992, 6, 1));
```

#### 생성자 수정 시

##### 기존 코드 <sub>(`age` 사용)</sub> 전부 수정 필요
- 시간 오래 소모
- 여러 사람 `age` 사용 시
  - 모두 찾아 수정하기 힘듦
- `user` <sub>(객체)</sub> 내 `age` <sub>(프로퍼티)</sub>
  - 있어도 나쁠 것 없음

##### `age` <sub>(프로퍼티)</sub> 위한 `getter` <sub>(접근자 프로퍼티)</sub> 추가
```javascript
function User(name, birthday) {
  this.name = name;
  this.birthday = birthday;

  // age
  // - 현재 일자 · 생일 기준 계산
  Object.defineProperty(this, "age", {
    get() {
      let todayYear = new Date().getFullYear();
      return todayYear - this.birthday.getFullYear();
    }
  });
}

let john = new User("John", new Date(1992, 6, 1));

// birthday 사용
alert( john.birthday );

// age 사용
alert( john.age );
```
