내장 클래스 확장
====

##### 내장 클래스 확장 가능
- 배열
- `Map`
- 기타 등등

##### `PowerArray` <sub>(클래스)</sub>
- `Array` <sub>(내장 클래스)</sub> 상속 <sub>(배열 확장)</sub>
```javascript
class PowerArray extends Array {

  // 커스텀 메서드 추가
  isEmpty() {
    return this.length === 0;
  }
}

let array = new PowerArray(1, 2, 5, 10, 50);

array.isEmpty(); // false

// filter (배열 내장 메서드)
// - PowerArray (확장 클래스) 객체 반환
let filtered = array.filter(item => item >= 10);
//  filtered = [10, 50]

filtered.isEmpty(); // false
```

##### 배열 내장 메서드 반환 값
- 하위 <sub>(확장)</sub> 클래스 객체
  - 내부 `constructor` <sub>(프로퍼티)</sub> 사용
```javascript
array.constructor === PowerArray
```

##### `array.filter(…)` 반환 자료형
- `Array` <sub>(내장 클래스)</sub> X
- `PowerArray` <sub>(확장 클래스)</sub>
  - `array.constructor` 기반
  - 커스텀 메서드 사용 가능

특수 정적 getter인 `Symbol.species`를 클래스에 추가할 수 있는데, `Symbol.species`가 있으면 `map`, `filter` 등의 메서드를 호출할 때 만들어지는 개체의 생성자를 지정할 수 있습니다. 원하는 생성자를 반환하기만 하면 되죠.

`map`이나 `filter`같은 내장 메서드가 일반 배열을 반환하도록 하려면 아래 예시처럼 `Symbol.species`가 `Array`를 반환하도록 해주면 됩니다.

##### `[Symbol.species]` <sub>(정적 메서드)</sub>
- 특수 정적 <sub>(`static`)</sub> getter <sub>(접근자 프로퍼티)</sub>
- 클래스에 추가
- 생성 개체 생성자 지정
  - 원하는 생성자 반환
  - 내장 메서드 적용
```javascript
class PowerArray extends Array {
  isEmpty() {
    return this.length === 0;
  }

  /*
   생성자 지정
   - 내장 객체 메서드 적용
   - 기본 Array 타입 반환
   */
  static get [Symbol.species]() {
    return Array;
  }
}

let array = new PowerArray(1, 2, 5, 10, 50);
alert(array.isEmpty()); // false

// 내장 객체 메서드 사용 생성자
// - array.constructor[Symbol.species]
//   - 기본 Array 타입
let filtered = array.filter(item => item >= 10);

// Array 인스턴스
alert(filtered.isEmpty()); // Error: filtered.isEmpty is not a function
```

<br />

<img src="../../images/commons/icons/circle-exclamation-solid.svg" /> **기타 컬렉션 : 유사하게 동작**

- `Map`
- `Set`
- 기타 등등

<br />

### 내장 객체 · 정적 메서드 상속

##### 내장 객체
- 인스턴스화 X
  - `Array`
  - `Date`
  - 기타 등등
- 자체 정적 메서드 구현
  - `Object.keys`
  - `Array.isArray`
  - 기타 등등
- 정적 메서드 상속 X

![object-date-inheritance](../../images/01/09/05/object-date-inheritance.svg)

##### 내장 클래스 인스턴스
- 인스턴스화
  - `[1, 2, 3]` <sub>(배열 리터럴)</sub>
  - `new Date()`
  - 기타 등등
- `prototype` 에 메서드 구현
- 객체 메서드 상속
  - `prototype` 체인

##### 내장 객체 프로토타입
- ex\)
  - `Object.[[Prototype]]`
  - `Array.[[Prototype]]`
  - `Date.[[Prototype]]`
  - 기타 등등
- 상속 X
  - 정적 메서드 상속 · 사용 X
```javascript
let array = [1, 2, 3];
array.[[prototype]]               === Array.prototype;

// 객체 상속
array.[[prototype]].[[prototype]] === Object.prototype;

// 내장 클래스 상속 X
Array.[[prototype]]               !== Object;
```
