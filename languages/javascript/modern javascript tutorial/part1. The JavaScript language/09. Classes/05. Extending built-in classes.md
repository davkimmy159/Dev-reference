내장 클래스 확장
====

##### 내장 클래스 확장 가능
- 배열
- `Map` <sub>(클래스)</sub>
- 기타 등등

#### `PowerArray` <sub>(클래스)</sub>

##### `Array` <sub>(내장 클래스)</sub> 상속 <sub>(배열 확장)</sub>
```javascript
class PowerArray extends Array {
  isEmpty() { // 커스텀 메서드
    return this.length === 0;
  }
}

let array = new PowerArray(1, 2, 5, 10, 50);

array.isEmpty(); // false

// filter (배열 내장 메서드)
// - PowerArray (확장 클래스) 객체 반환
let filtered = array.filter(item => item >= 10);
//  filtered = [10, 50]

filtered.isEmpty(); // false
```

##### 내장 메서드 반환 값
- 하위 <sub>(확장)</sub> 클래스 객체
  - 내부 `constructor` <sub>(프로퍼티)</sub> 사용
```javascript
array.constructor === PowerArray
```

##### `array.filter(…)` 반환 자료형
- `Array` <sub>(내장 클래스)</sub> X
- `PowerArray` <sub>(확장 클래스)</sub>
  - `array.constructor` 기반
  - 커스텀 메서드 사용 가능

#### `[Symbol.species]()` <sub>(특수 정적 getter)</sub>

##### 내장 메서드 내 사용 생성자 지정
- 반환 값
  - 생성자
```javascript
array.constructor[Symbol.species] === 반환 값 (생성자)
```

##### 내장 메서드 반환 자료형 변경
- `Array` <sub>(내장 클래스)</sub>
```javascript
class PowerArray extends Array {
  isEmpty() { … } // 커스텀 메서드

  // 내장 메서드 내 사용 생성자 지정
  static get [Symbol.species]() {
    return Array; // 내장 생성자 반환
  }
}

filtered.isEmpty(); // false

let array = new PowerArray(1, 2, 5, 10, 50);

array.isEmpty(); // false

// filter (배열 내장 메서드)
// - Array (내장 클래스) 객체 (배열) 반환
let filtered = array.filter(item => item >= 10);
//  filtered = [10, 50]


// 커스텀 메서드 사용 불가능 (일반 배열)
filtered.isEmpty(); // Error: filtered.isEmpty is not a function
```

<br />

<img src="../../images/commons/icons/circle-exclamation-solid.svg" /> **기타 컬렉션 동작 유사**

- `Map` <sub>(클래스)</sub>
- `Set` <sub>(클래스)</sub>
- 기타 등등

<br />

### 내장 생성자 <sub>(객체)</sub> 내 정적 메서드 상속

##### 내장 생성자 <sub>(객체)</sub>
- 자체 정적 메서드 구현
  - `Object.keys`
  - `Array.isArray`
  - 기타 등등
- 내장 클래스 간 프로토타입 상속 관계 형성
  - `Array` → `Object` 상속
  - 기타 등등
- 정적 메서드 상속 X

![object-date-inheritance](../../images/01/09/05/object-date-inheritance.svg)

##### 내장 클래스 인스턴스
- 인스턴스화
  - `[1, 2, 3]` <sub>(배열 리터럴)</sub>
  - `new Date()`
  - 기타 등등
- `prototype` 에 메서드 구현
- 객체 메서드 상속
  - `prototype` 체인

##### 내장 객체 프로토타입
- ex\)
  - `Object.[[Prototype]]`
  - `Array.[[Prototype]]`
  - `Date.[[Prototype]]`
  - 기타 등등
- 상속 X
  - 정적 메서드 상속 · 사용 X
```javascript
let array = [1, 2, 3];
array.[[prototype]]               === Array.prototype;

// 객체 상속
array.[[prototype]].[[prototype]] === Object.prototype;

// 내장 클래스 상속 X
Array.[[prototype]]               !== Object;
```
