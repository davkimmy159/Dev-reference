화살표 함수 다시 살펴보기
=======================

- 단순히 짧게 쓰기 위한 용도 X

##### 동떨어진 곳에서 실행될 작은 함수 작성 상황 자주 발생
- `arr.forEach(func)`
  - `arr` <sub>(배열)</sub> 요소 대상 `func` <sub>(함수)</sub> 실행
- `setTimeout(func)`
  - 내장 스케줄러에 의해 `func` <sub>(함수)</sub> 실행
- 기타 등등

##### JS 함수
- 생성 후 어딘가 전달
  - 아주 자연스러움

##### 함수 컨텍스트
- 어딘가에 함수 전달 시
  - 잃을 수 있음
- 화살표 함수 사용 시
  - 잃지 않음

### 화살표 함수 : `this` X

##### 화살표 함수 내 `this` 접근 시
- 외부에서 가져옴
```javascript
let group = {
  title: "1모둠",
  students: ["보라", "호진", "지민"],

  // this.title (화살표 함수 본문)
  // - showList (화살표 함수 바깥 메서드) 가리키는 대상과 동일
  // - this.title == group.title
  showList() {
    this.students.forEach(
      student => alert(this.title + ': ' + student)
    );
  }
};

group.showList();
```
```javascript
let group = {
  title: "1모둠",
  students: ["보라", "호진", "지민"],

  // 일반 함수
  // - this == undefined
  showList() {
    this.students.forEach(function(student) {

      // TypeError: Cannot read property 'title' of undefined
      alert(this.title + ': ' + student)
    });
  }
};

group.showList();
```

##### 일반 함수
- `this` == `undefined`

##### 화살표 함수
- `this` 없음
  - 외부 `this` 사용
  - 에러 발생 X

<br />

<img src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **화살표 함수 : `new` 함께 실행 X**

##### `this` X
- 생성자 함수 사용 X
- `new` 함께 호출 X

<br />

<img src="../../images/commons/icons/circle-exclamation-solid.svg" /> **화살표 함수 vs `bind`**

##### `.bind(this)`
- 함수의 '한정된 버전' 생성

##### 화살표 함수
- 어떤 것도 바인딩 X
- 단지 `this` 부재
- `this` 사용 시
  - 외부 렉시컬 환경 검색
  - 일반 변수 서칭 유사

<br />

### 화살표 함수 : `arguments` X

##### `arguments` <sub>(유사 배열 · 함수 인수 객체)</sub> 미지원
- 일반 함수와 차이

##### 포워딩 데코레이터 생성 시 유용
- 현재 `this` 값 · `arguments` 정보
  - 함께 실어 호출
```javascript
function defer(f, ms) {
  return function() {
    setTimeout(() => f.apply(this, arguments), ms)
  };
}

function sayHi(who) {
  alert('안녕, ' + who);
}

let sayHiDeferred = defer(sayHi, 2000);
sayHiDeferred("철수"); // 2초 후 "안녕, 철수" 출력
```

##### 일반 함수 사용 시
- `ctx` · `args` <sub>(변수)</sub> 필요
  - `setTimeout` 콜백 함수가 사용
```javascript
function defer(f, ms) {
  return function(...args) {
    let ctx = this;
    setTimeout(function() { return f.apply(ctx, args); }, ms);
  };
}
```

<br />

## 요약
화살표 함수가 일반 함수와 다른 점은 다음과 같습니다.
- `this`를 가지지 않습니다.
- `arguments`를 지원하지 않습니다.
- `new`와 함께 호출할 수 없습니다.
- 이 외에도 화살표 함수는 `super`가 없다는 특징도 있는데, 아직 `super`에 대해 배우지 않았기 때문에 이번 챕터에선 해당 내용을 다루지 않았습니다. 화살표 함수와 `super`의 관계는 클래스 상속 챕터에서 학습할 예정입니다.

화살표 함수는 컨텍스트가 있는 긴 코드보다는 자체 '컨텍스트'가 없는 짧은 코드를 담을 용도로 만들어졌습니다. 그리고 이 목적에 잘 들어맞는 특징을 보입니다.
