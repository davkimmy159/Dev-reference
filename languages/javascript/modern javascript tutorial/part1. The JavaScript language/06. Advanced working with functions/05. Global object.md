전역 객체
========

- 어디서나 사용 가능한 변수 · 함수
- 보통 언어 자체 · 호스트 환경 기본 내장
- 각 호스트 환경마다 부르는 이름 상이

##### `globalThis` <sub>(전역 객체명)</sub> 표준화 내용
- 최근 JS 명세 추가
- 모든 호스트 환경 이를 따라야 함
- 몇몇 브라우저 <sub>(Chromium 기반 X)</sub>
  - `globalThis` 아직 미지원
  - 폴리필 <sub>(polyfill)</sub> 쉽게 추가 가능
```javascript
alert("Hello");

window.alert("Hello");
```

##### 브라우저 : `var` 선언 전역 함수 · 변수
- 전역 객체 프로퍼티
- `let` · `const` 선언 X
- 하위 호환성 기능
  - 비권장
- 모던 JS <sub>(모듈 사용)</sub>
  - 기능 미지원
```javascript
var gVar = 5;

alert(window.gVar); // 5
```
- `let` 선언 시
  - 전역 객체 통해 변수 접근 X
```javascript
let gLet = 5;

alert(window.gLet); // undefined
```
- 전역 접근 필요 시
  - 전역 객체에 직접 프로퍼티 추가
```javascript
// 모든 스크립트
// - currentUser (전역 프로퍼티) 접근 가능
window.currentUser = {
  name: "John"
};

alert(currentUser.name); // John

// 동명 지역 변수 존재 시
// - 전역 객체에서 명시적으로 가져오기
alert(window.currentUser.name); // John
```
- 전역 변수
  - 가급적 사용 X
- 함수 생성 시
  - 외부 · 전역 변수 사용 자제
- 권장 함수 구성
  1. '인풋' 변수 받기
  2.  이를 이용해 '아웃풋' 만들기
  - 테스트 난이도 ↓
  - 에러 발생률 ↓

### 폴리필 사용
- 브라우저 최신 기능 지원 여부 확인
  - 전역 객체 이용
```javascript
// Promise (내장 객체) 지원 여부 테스트
// 구식 브라우저
// - Promise (내장 객체) 미지원
if (!window.Promise) {
  alert("구식 브라우저를 사용 중이시군요!");
}
```

##### 폴리필 추가
- 오래된 브라우저 <sub>(명세 기능 미지원)</sub>
  - 직접 함수 생성 후
    - 전역 객체에 추가
```javascript
if (!window.Promise) {
  window.Promise = … // 모던 JS 지원 기능 직접 구현
}
```

<br />

## 요약
- 전역 객체를 사용하면 어디서든 접근 가능한 변수를 만들 수 있습니다.

  전역 객체엔 `Array`와 같은 내장 객체, `window.innerHeight`(뷰포트의 높이를 반환함)같은 브라우저 환경 전용 변수 등이 저장되어 있습니다.

- 전역 객체는 `globalThis`라는 보편적인 이름으로 불립니다.

  하지만 '관습'에 따라 브라우저에서는 `window`, Node.js에서는 `global`이라는 이름으로 불릴 때가 많습니다. `globalThis`는 제안 목록에 추가 된 지 얼마 안 된 기능이기 때문에, 비 크로미움 기반 브라우저에선 지원하지 않습니다(폴리필을 구현하면 사용할 수 있습니다).

- 프로젝트 전체에서 꼭 필요한 변수만 전역 객체에 저장하도록 하고, 전역 변수는 가능한 한 최소한으로 사용합시다.

- 모듈을 사용하고 있지 않다면, 브라우저에서 `var`로 선언한 전역 변수는 전역 객체의 프로퍼티가 됩니다.

- 이해하기 쉽고 요구사항 변경에 쉽게 대응할 수 있는 코드를 구현하려면, `window.x`처럼 전역 객체의 프로퍼티에 직접 접근합시다.
