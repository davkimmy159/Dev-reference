`var` <sub>(구식)</sub>
====

### `{…}` <sub>(블록)</sub> 스코프 X

##### 함수 · 전역 스코프 <sub>(`{…}` 블록 무시)</sub>
- `if` <sub>(문)</sub>
```javascript
if (true) {
  var test = true; // 전역 변수
}

alert(test); // true
```
- 반복문
```javascript
for (var i = 0; i < 9; i++) { // 전역 변수
  …
}

alert(i);    // 10
```

##### 함수 내 `{…}` <sub>(코드 블록)</sub>
- 함수 레벨 변수
```javascript
function sayHi() {
  if (true) {

    // 함수 내 지역 변수
    var phrase = "Hello";
  }

  alert(phrase); // Hello
}

sayHi();

alert(phrase); // Error: phrase is not defined
```

##### 과거 JS 잔재
- 과거 블록 수준 렉시컬 환경 無

### 변수 중복 선언 허용

##### 1번째 이후 선언 무시
- 할당 연산 정상 동작
```javascript
var user = "Pete";

// var 선언 무시 (할당 연산 동작)
var user = "John";

alert(user); // John
```

### '호이스팅' <sub>(hoisting)</sub>

##### `var` 사용 시 발생 현상
- `var` 선언 <sub>(정의)</sub> 변수
  - 함수 최상단 자동 이동

##### 함수 <sub>(중첩 X)</sub> 본문 내 `var` 선언 변수
- 변수 정의 위치 자동 이동 <sub>(선언 위치 무관)</sub>
  - 함수 본문 시작 지점 <sub>(함수 시작 직후 처리)</sub>
```javascript
function Same() {
  phrase = "Hello";

  alert(phrase);

  var phrase; // var 선언 변수
}

Same();

↓↓↓

function Same() {
  var phrase; // var 선언 변수 (최상단 이동)

  phrase = "Hello";

  alert(phrase);
}

same();
```

##### `{…}` <sub>(코드 블록)</sub> 무시 <sub>(유무 여부 무관)</sub>
```javascript
function same() {
  phrase = "Hello";

  if (false) {
    var phrase; // `{…}` (블록) 무시 (통과)
  }

  alert(phrase);
}

same();

↓↓↓

function same() {
  var phrase // `{…}` (블록) 무시 (최상단 이동)

  phrase = "Hello";

  if (false) {}

  alert(phrase);
}

same();
```

##### 할당
- 호이스팅 미발생
```javascript
function same() {
  alert(phrase);

  // var 변수 선언 · 값 할당
  var phrase = "Hello";
}

same();

↓↓↓

function same() {
  var phrase; // var 변수 선언 (최상단 이동)

  alert(phrase);    // undefined

  phrase = "Hello"; // 값 할당 (기존 위치 유지)
}

same();
```

### 즉시 실행 함수 표현식

##### immediately-invoked function expressions <sub>(IIFE)</sub>
- `var` : `{…}` <sub>(블록)</sub> 레벨 스코프 가짐
```javascript
/* `(…)` (괄호) 로 함수 둘러싸기 */
(function() {
  // 함수만의 변수
  let message = "Hello";

  alert(message); // Hello
})();

↓↓↓ // `(…)` (괄호) 제거

/* `(…)` (괄호) 로 함수 둘러싸지 않을 시 */
function() { // Error: Function statements require a function name
  let message = "Hello";
  alert(message); // Hello
}();
```

##### `function` <sub>(키워드)</sub> 등장 시
- JS : 함수 선언문 시작 예상

##### 선언문 함수 생성 시
- 함수명 선언 필수

##### 함수 선언문 정의 함수
- 동시 정의 · 호출 허용 X
```javascript
/* 맨 아래 `(…)` (괄호) 때문에 문법 에러 */
function go() {
  }(); // ← 함수 선언문
       //   - 선언 즉시 호출 X
```

##### `(…)` <sub>(괄호)</sub> 로 함수 감싸기 <sub>`(function { … })`</sub>
- 함수 선언문 X
- 표현식으로 인식
- 이름 부재 가능
- 즉시 호출 가능
- `(…)` <sub>(괄호)</sub> 외 다양한 방법 가능
- 모던 JS 불필요
```javascript
/* IIFE 만드는 다양한 방법 */

(function() {
  alert("함수를 괄호로 둘러싸기");
})();

(function() {
  alert("전체를 괄호로 둘러싸기");
}());

!function() {
  alert("표현식 앞에 비트 NOT 연산자 붙이기");
}();

+function() {
  alert("표현식 앞에 단항 덧셈 연산자 붙이기");
}();
```

<br />

요약
====

##### `var` 선언 변수 특성 <sub>(2가지)</sub>
1. 스코프
    - `{…}` <sub>(블록)</sub> 스코프 X
    - 함수 수준 스코프
2. 선언 처리 시점
    - 함수 시작점
    - 스크립트 시작점 <sub>(전역)</sub>
- 대다수 상황 나쁜 부작용 발생
  - `let` 표준 도입 이유 <sub>(부작용 제거)</sub>
