ìœ ë‹ˆì½”ë“œ, ë¬¸ìì—´ ë‚´ë¶€
=========================

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **ì‹¬í™”**

- ë¬¸ìì—´ ë‚´ë¶€ í•™ìŠµ
- ìœ ìš©í•œ ìƒí™©
   - ì´ëª¨ì§€
   - ìˆ˜í•™ ê¸°í˜¸
   - ìƒí˜• ë¬¸ì
   - ê¸°íƒ€ ë“±ë“±

#### JS ë¬¸ìì—´

##### ìœ ë‹ˆì½”ë“œ ê¸°ë°˜
- ê° ê¸€ì : ì¼ë ¨ì˜ byte í‘œí˜„
  - 1 - 4 byte

##### 16ì§„ìˆ˜ ìœ ë‹ˆì½”ë“œ í‘œí˜„
- ë¬¸ìì—´ ë‚´ ë¬¸ì ì‚½ì… ê°€ëŠ¥
  - `\xXX`
  - `\uXXXX XXXX`
  - `\u{Xâ€¦XXXXXX}`

#### `\xXX`

##### êµ¬ì„±
- 16ì§„ìˆ˜ ìˆ«ì 2ê°œ
  - `00` ~ `FF`

##### ì²« 256ê°œ ìœ ë‹ˆì½”ë“œ ë¬¸ì í‘œí˜„
- ë¼í‹´ ì•ŒíŒŒë²³
- ê¸°ë³¸ ë¬¸ë²• ê¸€ì
- ê¸°íƒ€ ë“±ë“±
- ex&#41; `"\x7A"` == `"z"` <sub>(ìœ ë‹ˆì½”ë“œ `U+007A`)</sub>

```javaScript
alert( "\x7A" ); // z
alert( "\xA9" ); // Â©, ì €ì‘ê¶Œ ë¬¸ì
```

#### `\uXXXX XXXX`

##### êµ¬ì„±
- 16ì§„ìˆ˜ ìˆ«ì 4ê°œ
  - `0000` ~ `FFFF`

##### `U+FFFF` ì´ˆê³¼ ìœ ë‹ˆì½”ë“œ ë¬¸ì í‘œí˜„ ì‹œ
- ì„œë¡œê²Œì´íŠ¸ ìŒ í•„ìš”

```javaScript
alert( "\u00A9" ); // Â©, ì €ì‘ê¶Œ ë¬¸ì
alert( "\u044F" ); // Ñ, í‚¤ë¦´ ë¬¸ì
alert( "\u2191" ); // â†‘, ìœ„í™”ì‚´í‘œ ë¬¸ì
```

#### `\u{Xâ€¦XXXXXX}`

##### êµ¬ì„±
- 16ì§„ìˆ˜ ìˆ«ì <sub>(1 ~ 6 bytes)</sub>
  - `0` ~ `10FFFF` <sub>(ê°€ì¥ ë†’ì€ ìœ ë‹ˆì½”ë“œ)</sub>

##### ëª¨ë“  ìœ ë‹ˆì½”ë“œ ë¬¸ì í‘œí˜„

```javaScript
alert( "\u{20331}" ); // ä½«, ë“œë¬¸ í•œì ë¬¸ì (ê¸´ ìœ ë‹ˆì½”ë“œ)
alert( "\u{1F60D}" ); // ğŸ˜, ì›ƒëŠ” ì–¼êµ´ ë¬¸ì (ê¸´ ìœ ë‹ˆì½”ë“œ)
```

### ì„œë¡œê²Œì´íŠ¸ ìŒ

##### ìì£¼ ì‚¬ìš©ë˜ëŠ” ë¬¸ìë“¤
- 2byte ì½”ë“œ
  - 16ì§„ìˆ˜ ìˆ«ì 4ê°œ

##### 2byte ì½”ë“œ í‘œí˜„
- ëŒ€ë‹¤ìˆ˜ ìœ ëŸ½ê¶Œ ì–¸ì–´ ë¬¸ì Â· ìˆ«ì
- í•œì¤‘ì¼ í†µí•© í•œì
  - 'CJK Unified Ideographs'

##### ìµœì´ˆ JS : UTF-16 ì¸ì½”ë”© ê¸°ë°˜
- ê¸€ì ë‹¹ 2byte í—ˆìš©
  - ì¡°í•© ê°œìˆ˜ : 65536ê°œ
- ëª¨ë“  ê°€ëŠ¥í•œ ê¸°í˜¸ í‘œì‹œ
  -  í„±ì—†ì´ ë¶€ì¡±

##### ì˜ ì•ˆ ì“°ì´ëŠ” Â· 2byte ì´ìƒ ìš”êµ¬ ê¸°í˜¸
- 2byte ë¬¸ì ìŒ ì¡°í•©í•´ ì¸ì½”ë”©
  - ì„œë¡œê²Œì´íŠ¸ ìŒ
- ë¶€ì‘ìš©
  - ê¸°í˜¸ ê¸¸ì´ : 2
```javaScript
alert( 'ğ’³'.length );  // 2, ìˆ˜í•™ ê¸°í˜¸ ëŒ€ë¬¸ì X
alert( 'ğŸ˜‚'.length ); // 2, ìš¸ë©´ì„œ ì›ƒëŠ” ì–¼êµ´ (ì´ëª¨ì§€)
alert( 'ğ©·¶'.length );  // 2, ì˜ ì•ˆ ì“°ì´ëŠ” ì¤‘êµ­ì–´
```

##### JS ì´ˆê¸°
- ì„œë¡œê²Œì´íŠ¸ ìŒ ë¶€ì¬
  - ì œëŒ€ë¡œ ì²˜ë¦¬ X

##### í•˜ë‚˜ì˜ ê¸°í˜¸ ê¸¸ì´
- 2 <sub>(`length` í”„ë¡œí¼í‹°)</sub>

##### ì„œë¡œê²Œì´íŠ¸ ìŒ ê¸°í˜¸
- ë‘ ê¸€ìë¡œ ì¸ì‹
  - ë‹¤ë£¨ê¸° ê¹Œë‹¤ë¡œì›€
```javaScript
alert( 'ğ’³'[0] ); // ì´ìƒí•œ ê¸°í˜¸ í‘œì‹œ
alert( 'ğ’³'[1] ); // ì„œë¡œê²Œì´íŠ¸ ìŒ ì¼ë¶€
```
- ì„œë¡œ ìŒ ì´ë£¨ì§€ ì•Šìœ¼ë©´ ë¬´ì˜ë¯¸

##### ê¸°í˜¸ ëŒ€ì‹  ì½”ë“œ ì‚¬ìš© ê°€ëŠ¥
- ì„œë¡œê²Œì´íŠ¸ ìŒ ê·¸ë£¹
  - 1ë²ˆì§¸
    - `0xd800` ~ `0xdbff`
  - 2ë²ˆì§¸
    - `0xdc00` ~ `0xdfff`
  - ê¸°íƒ€ ë“±ë“±
- í•´ë‹¹ ì½”ë“œ ê·¸ë£¹ ìœ„ì¹˜
  - ì„œë¡œê²Œì´íŠ¸ ìŒ ìœ„í•´ ë¹„ì›Œë‘  <sub>(í‘œì¤€)</sub>

##### ì„œë¡œê²Œì´íŠ¸ ìŒ ì²˜ë¦¬ ë©”ì„œë“œ : í‘œì¤€ ì¶”ê°€
- `String.fromCodePoint`
- `String.codePointAt`

##### ê¸°ëŠ¥ ë™ì¼ ê¸°ì¡´ ë©”ì„œë“œ <sub>(ì„œë¡œê²Œì´íŠ¸ ìŒ ì²˜ë¦¬ X)</sub>
- `String.fromCharCode`
- `str.charCodeAt`

One can see the difference here:
```javaScript
// charCodeAt is not surrogate-pair aware, so it gives codes for the 1st part of ğ’³:

alert( 'ğ’³'.charCodeAt(0).toString(16) ); // d835

// codePointAt is surrogate-pair aware
alert( 'ğ’³'.codePointAt(0).toString(16) ); // 1d4b3, reads both parts of the surrogate pair
```
That said, if we take from position 1 (and thatâ€™s rather incorrect here), then they both return only the 2nd part of the pair:
```javaScript
alert( 'ğ’³'.charCodeAt(1).toString(16) ); // dcb3
alert( 'ğ’³'.codePointAt(1).toString(16) ); // dcb3
// meaningless 2nd half of the pair
```
You will find more ways to deal with surrogate pairs later in the chapter Iterables. There are probably special libraries for that too, but nothing famous enough to suggest here.

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **Takeaway: splitting strings at an arbitrary point is dangerous**

We canâ€™t just split a string at an arbitrary position, e.g. take str.slice(0, 4) and expect it to be a valid string, e.g.:

alert( 'hi ğŸ˜‚'.slice(0, 4) ); //  hi [?]
Here we can see a garbage character (first half of the smile surrogate pair) in the output.

Just be aware of it if you intend to reliably work with surrogate pairs. May not be a big problem, but at least you should understand what happens.

### Diacritical marks and normalization