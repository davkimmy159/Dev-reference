### ì—­ì ìš© <sub>(`ease*`)</sub>

|`ease*`|ì ìš©|
|:---:|:---:|
|`easeIn`|ì¼ë°˜|
|`easeOut`|ì—­|

#### `easeOut`

##### `timingEaseOut`
- íƒ€ì´ë° í•¨ìˆ˜ `easeOut` <sub>(ëª¨ë“œ)</sub> ì ìš©
```javascript
timingEaseOut(timeFraction) = 1 - timing(1 - timeFraction);
```

##### `makeEaseOut` <sub>(í•¨ìˆ˜)</sub>
- ì¸ìˆ˜
  - ì¼ë°˜ íƒ€ì´ë° í•¨ìˆ˜
- ë°˜í™˜ê°’
  - ë˜í¼ í•¨ìˆ˜ <sub>(íƒ€ì´ë° í•¨ìˆ˜ ì—­ì ìš©)</sub>
```javascript
function makeEaseOut(timing) {
  return function(timeFraction) {
    return 1 - timing(1 - timeFraction);
  }
}
```

##### `bounce` <sub>(ë°˜ë™ íƒ€ì´ë° í•¨ìˆ˜)</sub> ì—­ì ìš©
- ë°˜ë™ íš¨ê³¼
  - ë ë¶€ë¶„ í¬ê²Œ ì ìš©
```javascript
let bounceEaseOut = makeEaseOut(bounce);
```

##### ê²°ê³¼

![timing-functions-1](../../images/03/05/03/timing-functions-1.png)

![timing-functions-3](../../images/03/05/03/timing-functions-3.png)

![easeOut-1](../../images/03/05/03/easeOut-1.png)

![timing-functions-3](../../images/03/05/03/timing-functions-3.png)

![easeOut-2](../../images/03/05/03/easeOut-2.png)

![timing-functions-3](../../images/03/05/03/timing-functions-3.png)

```html
<!-- index.html -->
<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css">
  <script src="https://js.cx/libs/animate.js"></script>
</head>

<body>
  <div id="path">
    <div id="brick"></div>
  </div>

  <script>
    function makeEaseOut(timing) {
      return function(timeFraction) {
        return 1 - timing(1 - timeFraction);
      }
    }

    function bounce(timeFraction) {
      for (let a = 0, b = 1, result; 1; a += b, b /= 2) {
        if (timeFraction >= (7 - 4 * a) / 11) {
          return -Math.pow((11 - 6 * a - 11 * timeFraction) / 4, 2) + Math.pow(b, 2);
        }
      }
    }

    let bounceEaseOut = makeEaseOut(bounce);

    brick.onclick = function() {
      animate({
        duration: 3000,
        timing: bounceEaseOut,
        draw: function(progress) {
          brick.style.left = progress * 500 + 'px';
        }
      });
    };
  </script>
</body>

</html>
```
```css
/* style.css */
#brick { width: 40px; height: 20px; background: #EE6B47; position: relative; cursor: pointer; }
#path { outline: 1px solid #E8C48E; width: 540px; height: 20px; }
```

![bounce-inout](../../images/03/05/03/bounce-inout.svg)

##### `bounce` <sub>(ë°˜ë™ í•¨ìˆ˜)</sub> ì ìš©

|ì„  ìƒ‰ìƒ|ì ìš©|
|:---:|:---:|
|ğŸŸ ì£¼í™©ìƒ‰ğŸŸ |ì¼ë°˜ <sub>(`easeIn`)</sub>|
|ğŸ”µíŒŒë€ìƒ‰ğŸ”µ|ì—­ <sub>(`easeOut`)</sub>|

#### `easeInOut`

##### íš¨ê³¼ ì ìš© ì‹œì 
- ì²˜ìŒ Â· ë ë¶€ë¶„

##### ì• ë‹ˆë©”ì´ì…˜ ìƒíƒœ ê³„ì‚° ì˜ˆì‹œ
```javascript
// ì• ë‹ˆë©”ì´ì…˜ ì²« ì ˆë°˜
if (timeFraction <= 0.5) {
  return timing(2 * timeFraction) / 2;

// ì• ë‹ˆë©”ì´ì…˜ ë ì ˆë°˜
} else {
  return (2 - timing(2 * (1 - timeFraction))) / 2;
}
```

##### `makeEaseInOut` <sub>(í•¨ìˆ˜)</sub>
- ì¸ìˆ˜
  - ì¼ë°˜ íƒ€ì´ë° í•¨ìˆ˜
- ë°˜í™˜ê°’
  - ë˜í¼ í•¨ìˆ˜ <sub>(íƒ€ì´ë° í•¨ìˆ˜ ì²˜ìŒ Â· ë ì ìš©)</sub>
```javascript
function makeEaseInOut(timing) {
  return function(timeFraction) {
    if (timeFraction < .5)
      return timing(2 * timeFraction) / 2;
    else
      return (2 - timing(2 * (1 - timeFraction))) / 2;
  }
}
```
##### `bounce` <sub>(ë°˜ë™ íƒ€ì´ë° í•¨ìˆ˜)</sub> ì²˜ìŒ Â· ë ì ìš©
- ë°˜ë™ íš¨ê³¼
  - ì²˜ìŒ Â· ë ë¶€ë¶„ í¬ê²Œ ì ìš©
```javascript
bounceEaseInOut = makeEaseInOut(bounce);
```

##### ê²°ê³¼

![timing-functions-1](../../images/03/05/03/timing-functions-1.png)

![easeInOut-1](../../images/03/05/03/easeInOut-1.png)

![timing-functions-1](../../images/03/05/03/timing-functions-1.png)

![easeInOut-2](../../images/03/05/03/easeInOut-2.png)

![timing-functions-1](../../images/03/05/03/timing-functions-1.png)

![easeInOut-3](../../images/03/05/03/easeInOut-3.png)

![timing-functions-3](../../images/03/05/03/timing-functions-3.png)

![easeInOut-4](../../images/03/05/03/easeInOut-4.png)

![timing-functions-3](../../images/03/05/03/timing-functions-3.png)

![easeInOut-5](../../images/03/05/03/easeInOut-5.png)

![timing-functions-3](../../images/03/05/03/timing-functions-3.png)

```html
<!-- index.html -->
<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css">
  <script src="https://js.cx/libs/animate.js"></script>
</head>

<body>
  <div id="path">
    <div id="brick"></div>
  </div>

  <script>
    function makeEaseInOut(timing) {
      return function(timeFraction) {
        if (timeFraction < .5)
          return timing(2 * timeFraction) / 2;
        else
          return (2 - timing(2 * (1 - timeFraction))) / 2;
      }
    }

    function bounce(timeFraction) {
      for (let a = 0, b = 1, result; 1; a += b, b /= 2) {
        if (timeFraction >= (7 - 4 * a) / 11) {
          return -Math.pow((11 - 6 * a - 11 * timeFraction) / 4, 2) + Math.pow(b, 2)
        }
      }
    }

    let bounceEaseInOut = makeEaseInOut(bounce);

    brick.onclick = function() {
      animate({
        duration: 3000,
        timing: bounceEaseInOut,
        draw: function(progress) {
          brick.style.left = progress * 500 + 'px';
        }
      });
    };
  </script>
</body>

</html>
```
```css
/* style.css */
#brick { width: 40px; height: 20px; background: #EE6B47; position: relative; cursor: pointer; }
#path { outline: 1px solid #E8C48E; width: 540px; height: 20px; }
```

##### `easeIn` Â· `easeOut` ê²°í•©
- ì²˜ìŒ ì ˆë°˜
  - `easeIn` <sub>(ì¼ë°˜ ì ìš©)</sub>
- ë ì ˆë°˜
  - `easeOut` <sub>(ì—­ ì ìš©)</sub>

![circ-ease](../../images/03/05/03/circ-ease.svg)

##### `circ` <sub>(íƒ€ì´ë° í•¨ìˆ˜)</sub>

|ì„  ìƒ‰ìƒ|ì ìš©|
|:---:|:---:|
|ğŸŸ ì£¼í™©ìƒ‰ğŸŸ |ì¼ë°˜ <sub>(`easeIn`)</sub>|
|ğŸŸ¢ì—°ë‘ìƒ‰ğŸŸ¢|ì—­ <sub>(`easeOut`)</sub>|
|ğŸ”µí•˜ëŠ˜ìƒ‰ğŸ”µ|ì²˜ìŒ Â· ë <sub>(`easeInOut`)</sub>|

### More interesting "draw"
Instead of moving the element we can do something else. All we need is to write the write the proper `draw`.

Here's the animated "bouncing" text typing:

##### ê²°ê³¼

_**í•´ë‹¹ ì´ë¯¸ì§€ ì°¾ê¸°**_

```html
<!-- index.html -->
<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css">
  <script src="https://js.cx/libs/animate.js"></script>
</head>

<body>

  <textarea id="textExample" rows="5" cols="60">He took his vorpal sword in hand:
Long time the manxome foe he soughtâ€”
So rested he by the Tumtum tree,
And stood awhile in thought.
  </textarea>

  <button onclick="animateText(textExample)">Run the animated typing!</button>

  <script>
    function animateText(textArea) {
      let text = textArea.value;
      let to = text.length,
        from = 0;

      animate({
        duration: 5000,
        timing: bounce,
        draw: function(progress) {
          let result = (to - from) * progress + from;
          textArea.value = text.substr(0, Math.ceil(result))
        }
      });
    }

    function bounce(timeFraction) {
      for (let a = 0, b = 1, result; 1; a += b, b /= 2) {
        if (timeFraction >= (7 - 4 * a) / 11) {
          return -Math.pow((11 - 6 * a - 11 * timeFraction) / 4, 2) + Math.pow(b, 2)
        }
      }
    }
  </script>

</body>

</html>
```
```css
/* style.css */
textarea { display: block; border: 1px solid #BBB; color: #444; font-size: 110%; }
button { margin-top: 10px; }
```

<br />

## ìš”ì•½
For animations that CSS can't handle well, or those that need tight control, JavaScript can help. JavaScript animations should be implemented via `requestAnimationFrame`. That built-in method allows to setup a callback function to run when the browser will be preparing a repaint. Usually that's very soon, but the exact time depends on the browser.

When a page is in the background, there are no repaints at all, so the callback won't run: the animation will be suspended and won't consume resources. That's great.

Here's the helper `animate` function to setup most animations:
```javascript
function animate({timing, draw, duration}) {

  let start = performance.now();

  requestAnimationFrame(function animate(time) {
    // timeFraction goes from 0 to 1
    let timeFraction = (time - start) / duration;
    if (timeFraction > 1) timeFraction = 1;

    // calculate the current animation state
    let progress = timing(timeFraction);

    draw(progress); // draw it

    if (timeFraction < 1) {
      requestAnimationFrame(animate);
    }

  });
}
```

Options:
- `duration` â€“ the total animation time in ms.
- `timing` â€“ the function to calculate animation progress. Gets a time fraction from 0 to 1, returns the animation progress, usually from 0 to 1.
- `draw` â€“ the function to draw the animation.

Surely we could improve it, add more bells and whistles, but JavaScript animations are not applied on a daily basis. They are used to do something interesting and non-standard. So you'd want to add the features that you need when you need them.

JavaScript animations can use any timing function. We covered a lot of examples and transformations to make them even more versatile. Unlike CSS, we are not limited to Bezier curves here.

The same is about `draw`: we can animate anything, not just CSS properties.

<br />

## <img src="../../images/commons/icons/circle-check-solid.svg" /> ê³¼ì œ

### Animate the bouncing ball
Make a bouncing ball. Click to see how it should look:

![assignment-animate-the-bouncing-ball-1](../../images/03/05/03/assignment-animate-the-bouncing-ball-1.png)
![assignment-animate-the-bouncing-ball-0](../../images/03/05/03/assignment-animate-the-bouncing-ball-0.png)
![assignment-animate-the-bouncing-ball-2](../../images/03/05/03/assignment-animate-the-bouncing-ball-2.png)
![assignment-animate-the-bouncing-ball-0](../../images/03/05/03/assignment-animate-the-bouncing-ball-0.png)
![assignment-animate-the-bouncing-ball-3](../../images/03/05/03/assignment-animate-the-bouncing-ball-3.png)
![assignment-animate-the-bouncing-ball-0](../../images/03/05/03/assignment-animate-the-bouncing-ball-0.png)

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

To bounce we can use CSS property `top` and `position:absolute` for the ball inside the field with `position:relative`.

The bottom coordinate of the field is `field.clientHeight`. The `top` <sub>(CSS í”„ë¡œí¼í‹°)</sub> refers to the upper edge of the ball. So it should go from `0` till `field.clientHeight` - `ball.clientHeight`, that's the final lowest position of the upper edge of the ball.

To to get the "bouncing" effect we can use the timing function `bounce` in `easeOut` mode.

Here's the final code for the animation:
```javascript
let to = field.clientHeight - ball.clientHeight;

animate({
  duration: 2000,
  timing: makeEaseOut(bounce),
  draw(progress) {
    ball.style.top = to * progress + 'px'
  }
});
```

[ìƒŒë“œë°•ìŠ¤ë¥¼ ì—´ì–´ ì •ë‹µì„ í™•ì¸í•´ë³´ì„¸ìš”.](https://plnkr.co/edit/QI3nkpLU2F7wKX79?p=preview)

<hr />

### Animate the ball bouncing to the right
Make the ball bounce to the right. Like this:

![assignment-animate-the-ball-bouncing-to-the-right-1](../../images/03/05/03/assignment-animate-the-ball-bouncing-to-the-right-1.png)
![assignment-animate-the-ball-bouncing-to-the-right-2](../../images/03/05/03/assignment-animate-the-ball-bouncing-to-the-right-2.png)
![assignment-animate-the-ball-bouncing-to-the-right-3](../../images/03/05/03/assignment-animate-the-ball-bouncing-to-the-right-3.png)
![assignment-animate-the-ball-bouncing-to-the-right-4](../../images/03/05/03/assignment-animate-the-ball-bouncing-to-the-right-4.png)

Write the animation code. The distance to the left is `100px`.

Take the solution of the previous task as the source.

<br />

<img src="../../images/commons/icons/circle-answer.svg" />

In the previous, we had only one property to animate. Now we need one more: `elem.style.left`.

The horizontal coordinate changes by another law: it does not "bounce", but gradually increases shifting the ball to the right.

We can write one more `animate` for it.

As the time function we could use `linear`, but something like `makeEaseOut(quad)` looks much better.

The code:
```javascript
let height = field.clientHeight - ball.clientHeight;
let width = 100;

// animate top (bouncing)
animate({
  duration: 2000,
  timing: makeEaseOut(bounce),
  draw: function(progress) {
    ball.style.top = height * progress + 'px'
  }
});

// animate left (moving to the right)
animate({
  duration: 2000,
  timing: makeEaseOut(quad),
  draw: function(progress) {
    ball.style.left = width * progress + "px"
  }
});
```

[ìƒŒë“œë°•ìŠ¤ë¥¼ ì—´ì–´ ì •ë‹µì„ í™•ì¸í•´ë³´ì„¸ìš”.](https://plnkr.co/edit/N4KUmyLBqpFYSMee?p=preview)
