텍스트 디코더 · 인코더
=================

이진 데이터가 문자열이라면 어떨지 생각해봅시다. 예를 들어 텍스트 데이터가 있는 파일을 받았다고 가정하겠습니다.

##### [`TextDecoder`](https://encoding.spec.whatwg.org/#interface-textdecoder) <sub>(내장 객체)</sub>
- 값 → 문자열 <sub>(변환)</sub>
  - 버퍼 · 인코딩 전달

##### 디코더 <sub>(객체)</sub> 생성
```javascript
let decoder = new TextDecoder([label], [options]);
```

##### `label` <sub>(인코딩 방식)</sub>
- `'utf-8'` <sub>(기본값)</sub>
- `'big5'`
  `'windows-1251'`
  기타 등등

##### `options` <sub>(선택)</sub>
- `fatal`<sub>(`boolean`)</sub>
  - 잘못된 글자 <sub>(디코딩 불가능 글자)</sub> 예외 던지기 여부
  - `false` <sub>(기본값)</sub>
    - 글자 → `\uFFFD` <sub>(대체)</sub>
- `ignoreBOM` <sub>(`boolean`)</sub>
  - 미사용 바이트 순서 표식 무시 여부
    - Byte Order Mark <sub>(BOM)</sub>

##### 디코딩 실행
```javascript
let str = decoder.decode([input], [options]);
```

##### `input`
- 디코딩 대상 `BufferSource` <sub>(객체)</sub>

##### `options` <sub>(선택)</sub>
  - `stream` – 많은 양의 데이터를 받아들여 `decoder`를 반복적으로 호출할 때도 decoding이 반복적으로 실행됩니다. 이런 경우 멀티 바이트 문자가 많은 데이터로 분할될 수 있습니다. 이 옵션은 데이터 분할을 방지하기 위해 `TextDecoder`에 `"unfinished"` 문자를 입력시키고 다음 데이터가 오면 디코딩하도록 지시합니다.

예시:
```javascript
let uint8Array = new Uint8Array([72, 101, 108, 108, 111]);

alert( new TextDecoder().decode(uint8Array) ); // Hello
```
```javascript
let uint8Array = new Uint8Array([228, 189, 160, 229, 165, 189]);

alert( new TextDecoder().decode(uint8Array) ); // 你好
```

버퍼의 하위 배열 뷰를 생성하여 버퍼의 일부를 디코딩 할 수 있습니다.
```javascript
let uint8Array = new Uint8Array([0, 72, 101, 108, 108, 111, 0]);

// 문자열을 나타내는 배열의 요소는 중간에 존재합니다.
// 배열의 복사 없이 문자열을 출력할 수 있습니다.
let binaryString = uint8Array.subarray(1, -1);

alert( new TextDecoder().decode(binaryString) ); // Hello
```

### 텍스트 인코더
[`TextEncoder`](https://encoding.spec.whatwg.org/#interface-textencoder)는 반대로 문자열을 바이트로 변환합니다.

문법은 다음과 같습니다.
```javascript
let encoder = new TextEncoder();
```

`TextEncoder`는 인코딩 시 'utf-8'만 지원합니다.

2가지 메서드가 있습니다.
- `encode(str)` – `Uint8Array`에 문자열을 반환합니다.
- `encodeInto(str, destination)` – `Uint8Array` 구조 형태로 문자열 `str`를 `destination`에 인코딩합니다.
```javascript
let encoder = new TextEncoder();

let uint8Array = encoder.encode("Hello");
alert(uint8Array); // 72,101,108,108,111
```
