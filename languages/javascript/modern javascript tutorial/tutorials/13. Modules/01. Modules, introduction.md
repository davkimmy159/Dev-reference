모듈 소개
========

##### 분리된 파일 각각
- 클래스 하나
- 라이브러리 하나
  - 특정 목적 복수 함수

##### JS 초기
- 모듈 필요 X
  - 스크립트 크기 小
  - 기능 단순

##### JS 현재
- 모듈 필요성 ↑
  - 스크립트 크기 大
  - 기능 복잡

#### 모듈 라이브러리

##### AMD
- 가장 오래된 모듈 시스템 중 하나
  - require.js <sub>(라이브러리)</sub> 통해 처음 개발

##### CommonJS
- Node.js 서버 용도

##### UMD
- 다양한 모듈 시스템 함께 사용
  - AMD
  - CommonJS
  - 기타 등등

##### JS 모듈 시스템
- 2015년 표준 등재
- 대부분의 주요 브라우저 · Node.js
  - 모듈 시스템 지원

### 모듈이란
- 단지 파일 하나
- 스크립트 하나 == 모듈 하나

##### 특수 지시자
- `export` <sub>(모듈 내보내기)</sub>
  - 외부 모듈
    - 해당 변수 · 함수 접근
- `import` <sub>(모듈 가져오기)</sub>
  - 외부 모듈 기능 가져오기

```javascript
/*
 export (지시자)
 - sayHi.js (파일) 내부 sayHi (함수)
   - 외부 내보내기
 📁 sayHi.js
 */
export function sayHi(user) {
  alert(`Hello, ${user}!`);
}
```
```javascript
/*
 import (지시자)
 - `main.js` (파일)
   - `sayHi` (함수) 가져오기 · 사용
 📁 main.js
 */
import {sayHi} from './sayHi.js';

alert(sayHi);  // 함수
sayHi('John'); // Hello, John!
```

##### `import` <sub>(지시자)</sub>
- 모듈 가져오기
  - `"./sayHi.js"` <sub>(상대 경로)</sub> 기준
  - `sayHi` <sub>(함수)</sub>
    - 상응 변수에 할당

##### 브라우저 내 모듈 동작
- 특수 키워드 · 기능 함께 사용
- `<script type="module">`
  - `"module"` 속성 설정
  - 해당 스크립트 == 모듈 <sub>(브라우저 인지)</sub>

```html
<!-- index.html -->
<!doctype html>
<script type="module">
  import { sayHi } from './say.js';

  document.body.innerHTML = sayHi('John');
</script>
```
```javascript
// 📁 main.js
export function sayHi(user) {
  return `Hello, ${user}!`;
}
```
```javascript
// 결과
Hello, John!
```

##### 브라우저
- 자동으로 모듈 가져오고 평가 후 실행

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **모듈 : 로컬 파일 X, HTTP · HTTPS <sub>(프로토콜)</sub> 통해서만 동작**

##### `file://` 프로토콜 <sub>(로컬)</sub>
- `import` · `export` <sub>(지시자)</sub> 동작 X

##### HTTP · HTTPS
- 정상 동작
  - `static-server` <sub>(로컬 웹 서버)</sub>
  - 라이브 서버 익스텐션 <sub>(코드 에디터)</sub>
  - 기타 등등

### 모듈 핵심 기능
- 모든 호스트 환경 공통 적용

#### 항상 엄격 모드 실행
```html
<script type="module">
  a = 5; // 에러
</script>
```

#### 모듈 레벨 스코프
- 모듈 자신만의 스코프 존재
- 모듈 내부 정의 변수 · 함수
  - 외부 스크립트 접근 X

##### 예시
- 가져오기
  - user.js
  - hello.js
- user.js 선언 변수 <sub>(`user`)</sub>
  - hello.js 사용
    - 에러 발생

```html
<!-- index.html -->
<!doctype html>
<script type="module" src="user.js"></script>
<script type="module" src="hello.js"></script>
```
```javascript
// 📁 user.js
let user = "John";
```
```javascript
// 📁 hello.js
// 모듈 : 변수 공유 X
// - 에러 발생
// - `Uncaught ReferenceError: user is not defined`
alert(user);
```
```javascript
// 결과

```
- 외부 공개 모듈
  - `export`
- 내보내진 모듈 가져와 사용
  - `import`

```html
<!-- index.html -->
<!doctype html>
<script type="module" src="hello.js"></script>
```
```javascript
// 📁 user.js
export let user = "John";
```
```javascript
// 📁 hello.js
import {user} from './user.js';

document.body.innerHTML = user; // John
```
```javascript
// 결과
John
```

##### 브라우저 환경
- 모듈 생성 시 <sub>(`<script type="module">`)</sub>
  - 독립적인 스코프 생성
```html
<script type="module">
  <!-- 해당 모듈 안에서만 접근 가능 -->
  let user = "John";
</script>

<script type="module">
  <!-- Error: user is not defined -->
  alert(user);
</script>
```

##### `window` 레벨 전역 변수 생성 시 <sub>(브라우저 환경)</sub>
- 명시적 변수 할당 · 접근
  - ex&#41; `window.user`
  - 정말 필요한 경우에만 사용