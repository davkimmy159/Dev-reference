참조에 의한 객체 복사
===================

##### 원시값
  - '값 그대로' 저장 · 할당 · 복사
```javascript
// 2개 독립된 변수
// - 각각 "Hello!" (문자열) 저장
let message = "Hello!";
let phrase = message;
```

##### 객체
- '참조에 의해' 저장 · 복사
  - '객체에 대한 참조 값' 저장
     - 객체 저장 메모리 주소
```javascript
/*
 객체
 - 메모리 내 어딘가 저장
 user (변수)
 - 객체 '참조'할 수 있는 값 저장
 */
let user = {
  name: "John"
};
```
- 객체 할당된 변수 복사 시
  - 객체 참조 값 복사
  - 객체 복사 X
```javascript
// 변수 2개
// - 각 변수 동일 '객체 참조 값' 저장
let user = { name: "John" };
let admin = user; // 참조값 복사
```
- 객체 접근 · 조작 시
  - 여러 변수 사용 가능
```javascript
let user = { name: 'John' }; // 객체 생성
let admin = user;            // 객체 참조 값 복사
admin.name = 'Pete';         // admin (변수) 에 의해 변경
alert(user.name);            // 'Pete'
```

#### 참조에 의한 비교

##### 객체 비교 시
- `==` · `===` <sub>(동등 · 일치 연산자)</sub> 동일 동작
- 두 변수 객체 참조 값
  - 동일 : 참
  - 상이 : 거짓
```javascript
let a = {};
let b = a; // 참조에 의한 복사

// 두 변수 동일 객체 참조
// - 참조 값 동일
alert( a == b );  // true
alert( a === b ); // true
```
```javascript
// 빈 객체 2개 생성
// - 독립된 두 객체
let a = {};
let b = {};

// 두 변수 다른 객체 참조
// - 참조 값 상이
alert( a == b );  // false
alert( a === b ); // false
```

### 객체 복사 · 병합과 `Object.assign`

- JS 객체 복제 내장 메서드 지원 X
  - 객체 복제 할 일 거의 없음

##### 객체 복제 필요 시
- 객체 생성 후 프로퍼티 순회
  - 원시 수준까지 프로퍼티 복사
```javascript
let user = {
  name: "John",
  age: 30
};
let clone = {}; // 새 빈 객체

// 빈 객체에 user 프로퍼티 전부 복사
for (let key in user) {
  clone[key] = user[key];
}

// 완전히 독립적인 복제본
clone.name = "Pete"; // clone 데이터 변경
alert( user.name );  // "John" (기존 객체)
```
- `Object.assign`
```javascript
Object.assign(dest, [src1, src2, src3...]);
```
  - `dest`
    - 목표 객체
  - `src1, src2, src3...`
    - 복사 대상 객체
  1. 객체 `src1, src2, src3...`
      - `dest` <sub>(프로퍼티)</sub> 에 복사
  2. `dest` 반환
```javascript
let user = { name: "John" };
let permissions1 = { canView: true };
let permissions2 = { canEdit: true };

// permissions1 · permissions2 프로퍼티 user 로 복사
Object.assign(user, permissions1, permissions2);
// user == { name: "John", canView: true, canEdit: true };
```
- 동일 이름 프로퍼티
  - 기존 값 덮어씌워짐
```javascript
let user = { name: "John" };
Object.assign(user, { name: "Pete" });
alert(user.name); // user == { name: "Pete" }
```
- 간단 객체 복사 <sub>(반복문 X)</sub>
```javascript
let user = {
  name: "John",
  age: 30
};

let clone = Object.assign({}, user);
```

### 중첩 객체 복사
- 객체 복제 시
  - 객체 프로퍼티 복제 X · 공유
```javascript
let user = {
  name: "John",
  sizes: {
    height: 182,
    width: 50
  }
};
let clone = Object.assign({}, user);
alert( user.sizes === clone.sizes ); // true, 같은 객체

// user · clone
// - sizes 프로퍼티 공유
user.sizes.width++;
alert(clone.sizes.width); // 51
```
- 깊은 복사
  - 프로퍼티 객체 경우 객체 구조 복사 반복문 사용
- 깊은 복사 표준 알고리즘
  - Structured cloning algorithm
- JS 라이브러리 lodash
  - `_.cloneDeep(obj)`
