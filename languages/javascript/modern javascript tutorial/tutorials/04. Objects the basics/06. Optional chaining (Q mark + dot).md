옵셔널 체이닝 `?.`
=================

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **최근 추가됨**

- 구식 브라우저 폴리필 필요

<br />

- 프로퍼티 없는 중첩 객체 에러 없이 안전하게 접근

### 옵셔널 체이닝 필요 이유
- 없는 정보 접근 시 에러 발생
```javascript
let user = {}; // 주소 정보 없는 사용자
alert(user.address.street); // TypeError: Cannot read property 'street' of undefined
```
- 페이지 미존재 요소 정보 접근 시 에러 발생

```javascript
// querySelector( … ) 호출 결과 null인 경우 에러 발생
let html = document.querySelector('.my-element').innerHTML;
```
- 명세서 `?.`<sub>(옵셔널 체이닝)</sub> 등장 전
  - `&&` <sub>(AND 연산자)</sub> 사용해 문제 해결
  - 실제 해당 객체 · 프로퍼티 있는지 확인
  - 코드 길어짐
```javascript
let user = {}; // 주소 정보 없는 사용자
alert( user && user.address && user.address.street ); // undefined, 에러 발생 X
```

### `?.`<sub>(옵셔널 체이닝)</sub> 등장
- '앞' 평가 대상 `undefined` · `null`
  - 평가 중단 · `undefined` 반환
- '앞' 평가 대상에만 동작 · 확장 X
```javascript
let user = {};                  // 주소 정보 없는 사용자
alert( user?.address?.street ); // undefined, 에러 발생 X
```
- 객체 미존재 시 에러 발생 X
```javascript
let user = null;

/*
 user?.
 - null · undefined 만 처리
 user.address 프로퍼티 미존재 시
 - 2번째 점 연산자 에러 발생
 */
alert( user?.address );        // undefined
alert( user?.address.street ); // undefined
```

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`?.`<sub>(옵셔널 체이닝)</sub> 남용 X**

- 존재하지 않아도 괜찮은 대상에만 사용
- 논리상 필수값에 사용 X
```javascript
// 논리상 user 필수값
// 논리상 address 필수값 X
// - ?. 사용
user.address?.street;

// 실수로 인해 user 값 미할당 시 바로 알아낼 수 있도록 에러 발생
// - 그렇지 않으면 에러 초기 발견 X (디버깅 난이도 ↑)
```

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`?.`<sub>(옵셔널 체이닝)</sub> 앞 변수 반드시 선언**

```javascript
/*
 변수 user 미선언 시 평가 때 에러 발생
 - 선언 완료 변수 대상으로만 동작
 let · const · var 사용해 변수 user 정의
 */
user?.address; // ReferenceError: user is not defined
```

### 단락 평가
- 왼쪽 평가대상 값 없으면 즉시 평가 중단
  - 오른쪽 동작도 중단
```javascript
let user = null;
let x = 0;
user?.sayHi(x++); // 아무 일도 일어나지 않음
alert(x);         // 0 (증가 X)
```

### `?.()` vs `?.[]`
- `?.`<sub>(옵셔널 체이닝)</sub> ≠ 연산자
  - 함수 · 대괄호 함께 동작하는 특별한 문법 구조체
- 존재 여부 불확실한 함수 호출
```javascript
let user1 = {
  admin() {
    alert("관리자 계정입니다.");
  }
}
let user2 = {};  // admin 메서드 X
user1.admin?.(); // admin 메서드 호출
user2.admin?.(); // 에러 없이 평가 중단
```
- `[]` <sub>(대괄호)</sub> 프로퍼티 접근
  - `?.prop` → `?.[key]`
- 존재 여부 불확실한 프로퍼티 안전하게 접근

```javascript
let user1 = {
  firstName: "Violet"
};
let user2 = null;
let key = "firstName";
alert( user1?.[key] ); // Violet
alert( user2?.[key] ); // undefined
alert( user1?.[key]?.something?.not?.existing); // undefined
```
- `?.`<sub>(옵셔널 체이닝)</sub> · `delete` 조합
```javascript
delete user?.name; // user 존재 시 user.name 삭제
```

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`?.`<sub>(옵셔널 체이닝)</sub> : 읽기 · 삭제 가능 (쓰기 X)**

- 할당 연산자 왼쪽에 사용 X
```javascript
// undefined = "Violet"
user?.name = "Violet"; // SyntaxError: Invalid left-hand side in assignment
```
