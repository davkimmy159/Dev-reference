async 이터레이터와 제너레이터
===========================

### `async` 이터레이터
- 일반 이터레이터 유사
- 약간의 문법적인 차이

##### 일반 이터러블 == 객체
```javascript
/* 일반 이터러블 (객체) */
let range = {
  from: 1,
  to: 5,

  [Symbol.iterator]() {
    return {
      current: this.from,
      last: this.to,

      next() {
        if (this.current <= this.last) {
          return { done: false, value: this.current++ };
        } else {
          return { done: true };
        }
      }
    };
  }
};

for(let value of range) {
  alert(value); // 1, 2, 3, 4, 5
}
```

##### 이터러블 (일반 → 비동기)
1. `[Symbol.iterator]`
    - → `[Symbol.asyncIterator]`
2. `next()` <sub>(메서드)</sub>
    - 프라미스 반환
3. `for (let i of it)`
    - → `for await (let i of it)`
```javascript
let range = {
  from: 1,
  to: 5,

  // for await…of 최초 실행 시
  // - [Symbol.asyncIterator] (메서드) 호출
  [Symbol.asyncIterator]() {

    /*
     [Symbol.asyncIterator] (메서드)
     - 이터레이터 (객체) 반환
     for await…of (비동기 반복문)
     - 반환된 이터레이터 객체만 대상 동작
     - 다음 값
       - next() (메서드) 에서 정해짐
     */
    return {
      current: this.from,
      last: this.to,

      // for await…of (비동기 반복문)
      // - 각 이터레이션마다 next() (메서드) 호출
      async next() {

        /*
         next() (메서드)
         - { done: …, value: … } (객체) 반환
           - 자동 프라미스로 감싸짐 (async)
         */

        // await 사용 가능
        // - 비동기 작업
        await new Promise(resolve => setTimeout(resolve, 1000));

        if (this.current <= this.last) {
          return { done: false, value: this.current++ };
        } else {
          return { done: true };
        }
      }
    };
  }
};

(async () => {
  for await (let value of range) {
    alert(value); // 1,2,3,4,5
  }
})()
```
##### `async` 이터레이터
- 일반 이터레이터 구조 유사

##### 차이
1. `[Symbol.asyncIterator]` <sub>(메서드)</sub> 구현
2. `[Symbol.asyncIterator]` <sub>(메서드)</sub>
    - `next()` <sub>(메서드)</sub> 구현 객체 반환
      - 프라미스 반환 메서드
3. `next()` <sub>(메서드)</sub>
    - `async` 메서드
      - 강제 X
      - `await` 사용 가능
    - 일반 메서드
      - 프라미스 반환
4. `for await (let value of range)`
    - `[Symbol.asyncIterator]` 1회 호출
    - 이후 각 값 대상 `next()` <sub>(메서드)</sub> 호출


||이터레이터|`async` 이터레이터|
|---|---|---|
|이터레이터 제공 메서드|`[Symbol.iterator]`|`[Symbol.asyncIterator]`|
|`next()` <sub>(메서드)</sub> 반환 값|모든 값|`Promise`|
|사용 반복문|`for…of`|`for await…of`|

<img class="icon" src="../../images/commons/icons/triangle-exclamation-solid.svg" /> **`...` <sub>(전개 구문)</sub> : 비동기적 동작 X**

- 일반적인 동기 이터레이터 필요 기능
  - 비동기 이터레이터 함께 사용 X
- `...` <sub>(전개 구문)</sub>
  - 일반 이터레이터 필요
```javascript
// [Symbol.iterator] (메서드) 부재
// - 에러 발생
alert( [...range] );
```
- `...` <sub>(전개 구문)</sub>
  - == `await` 없는 `for…of` <sub>(반복문)</sub>
  - `[Symbol.asyncIterator]` X
  - `[Symbol.iterator]` 찾음